<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CS318 - Pintos: src/filesys/file.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CS318 - Pintos
   </div>
   <div id="projectbrief">Pintos source browser for JHU CS318 course</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_462cf8f5a5a6b6c35369e33c5cc1b3e4.html">filesys</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">file.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="file_8h_source.html">filesys/file.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="debug_8h_source.html">debug.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="inode_8h_source.html">filesys/inode.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="malloc_8h_source.html">threads/malloc.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for file.c:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c__incl.png" border="0" usemap="#src_2filesys_2file_8c" alt=""/></div>
<map name="src_2filesys_2file_8c" id="src_2filesys_2file_8c">
<area shape="rect" title=" " alt="" coords="193,5,304,31"/>
<area shape="rect" href="file_8h.html" title=" " alt="" coords="20,79,111,104"/>
<area shape="rect" href="debug_8h.html" title=" " alt="" coords="363,152,432,177"/>
<area shape="rect" href="inode_8h.html" title=" " alt="" coords="138,79,244,104"/>
<area shape="rect" href="malloc_8h.html" title=" " alt="" coords="338,79,457,104"/>
<area shape="rect" href="off__t_8h.html" title=" " alt="" coords="5,152,104,177"/>
<area shape="rect" href="stdint_8h.html" title=" " alt="" coords="87,299,151,324"/>
<area shape="rect" href="stdbool_8h.html" title=" " alt="" coords="264,152,339,177"/>
<area shape="rect" href="block_8h.html" title=" " alt="" coords="128,152,240,177"/>
<area shape="rect" href="stddef_8h.html" title=" " alt="" coords="334,225,403,251"/>
<area shape="rect" href="inttypes_8h.html" title=" " alt="" coords="132,225,210,251"/>
</map>
</div>
</div>
<p><a href="file_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfile.html">file</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An open file.  <a href="structfile.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae9c6487eb7f772982a437b42483c6827"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structfile.html">file</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#ae9c6487eb7f772982a437b42483c6827">file_open</a> (struct <a class="el" href="structinode.html">inode</a> *<a class="el" href="structinode.html">inode</a>)</td></tr>
<tr class="memdesc:ae9c6487eb7f772982a437b42483c6827"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens a file for the given INODE, of which it takes ownership, and returns the new file.  <a href="file_8c.html#ae9c6487eb7f772982a437b42483c6827">More...</a><br /></td></tr>
<tr class="separator:ae9c6487eb7f772982a437b42483c6827"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b56dded2607135b7d304654ecc659ba"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structfile.html">file</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#a0b56dded2607135b7d304654ecc659ba">file_reopen</a> (struct <a class="el" href="structfile.html">file</a> *<a class="el" href="structfile.html">file</a>)</td></tr>
<tr class="memdesc:a0b56dded2607135b7d304654ecc659ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens and returns a new file for the same inode as FILE.  <a href="file_8c.html#a0b56dded2607135b7d304654ecc659ba">More...</a><br /></td></tr>
<tr class="separator:a0b56dded2607135b7d304654ecc659ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d12e9de7ab756bef5396c7b37698c9a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#a4d12e9de7ab756bef5396c7b37698c9a">file_close</a> (struct <a class="el" href="structfile.html">file</a> *<a class="el" href="structfile.html">file</a>)</td></tr>
<tr class="memdesc:a4d12e9de7ab756bef5396c7b37698c9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes FILE.  <a href="file_8c.html#a4d12e9de7ab756bef5396c7b37698c9a">More...</a><br /></td></tr>
<tr class="separator:a4d12e9de7ab756bef5396c7b37698c9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6119517daaf8c3e6b31d15cff4bbf4a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structinode.html">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#ac6119517daaf8c3e6b31d15cff4bbf4a">file_get_inode</a> (struct <a class="el" href="structfile.html">file</a> *<a class="el" href="structfile.html">file</a>)</td></tr>
<tr class="memdesc:ac6119517daaf8c3e6b31d15cff4bbf4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the inode encapsulated by FILE.  <a href="file_8c.html#ac6119517daaf8c3e6b31d15cff4bbf4a">More...</a><br /></td></tr>
<tr class="separator:ac6119517daaf8c3e6b31d15cff4bbf4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa970e0e3d037e457750745798328db97"><td class="memItemLeft" align="right" valign="top"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#aa970e0e3d037e457750745798328db97">file_read</a> (struct <a class="el" href="structfile.html">file</a> *<a class="el" href="structfile.html">file</a>, void *<a class="el" href="input_8c.html#a02352b0fa3692f7c9029b2e12edcdbb6">buffer</a>, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> size)</td></tr>
<tr class="memdesc:aa970e0e3d037e457750745798328db97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads SIZE bytes from FILE into BUFFER, starting at the file's current position.  <a href="file_8c.html#aa970e0e3d037e457750745798328db97">More...</a><br /></td></tr>
<tr class="separator:aa970e0e3d037e457750745798328db97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f62f31208f5a024b47fc3ac90ed0b9c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#a9f62f31208f5a024b47fc3ac90ed0b9c">file_read_at</a> (struct <a class="el" href="structfile.html">file</a> *<a class="el" href="structfile.html">file</a>, void *<a class="el" href="input_8c.html#a02352b0fa3692f7c9029b2e12edcdbb6">buffer</a>, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> size, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> file_ofs)</td></tr>
<tr class="memdesc:a9f62f31208f5a024b47fc3ac90ed0b9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads SIZE bytes from FILE into BUFFER, starting at offset FILE_OFS in the file.  <a href="file_8c.html#a9f62f31208f5a024b47fc3ac90ed0b9c">More...</a><br /></td></tr>
<tr class="separator:a9f62f31208f5a024b47fc3ac90ed0b9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c3629e8008d2ad73290be83f84d27eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#a5c3629e8008d2ad73290be83f84d27eb">file_write</a> (struct <a class="el" href="structfile.html">file</a> *<a class="el" href="structfile.html">file</a>, const void *<a class="el" href="input_8c.html#a02352b0fa3692f7c9029b2e12edcdbb6">buffer</a>, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> size)</td></tr>
<tr class="memdesc:a5c3629e8008d2ad73290be83f84d27eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes SIZE bytes from BUFFER into FILE, starting at the file's current position.  <a href="file_8c.html#a5c3629e8008d2ad73290be83f84d27eb">More...</a><br /></td></tr>
<tr class="separator:a5c3629e8008d2ad73290be83f84d27eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a066213728ed4ad6314a980f50c2c93d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#a066213728ed4ad6314a980f50c2c93d7">file_write_at</a> (struct <a class="el" href="structfile.html">file</a> *<a class="el" href="structfile.html">file</a>, const void *<a class="el" href="input_8c.html#a02352b0fa3692f7c9029b2e12edcdbb6">buffer</a>, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> size, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> file_ofs)</td></tr>
<tr class="memdesc:a066213728ed4ad6314a980f50c2c93d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes SIZE bytes from BUFFER into FILE, starting at offset FILE_OFS in the file.  <a href="file_8c.html#a066213728ed4ad6314a980f50c2c93d7">More...</a><br /></td></tr>
<tr class="separator:a066213728ed4ad6314a980f50c2c93d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3d3b96cd45ef585d53ec95adcc06117"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#aa3d3b96cd45ef585d53ec95adcc06117">file_deny_write</a> (struct <a class="el" href="structfile.html">file</a> *<a class="el" href="structfile.html">file</a>)</td></tr>
<tr class="memdesc:aa3d3b96cd45ef585d53ec95adcc06117"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prevents write operations on FILE's underlying inode until <a class="el" href="file_8c.html#afe7d1da8b53f8b896fc5faf646468356" title="Re-enables write operations on FILE&#39;s underlying inode.">file_allow_write()</a> is called or FILE is closed.  <a href="file_8c.html#aa3d3b96cd45ef585d53ec95adcc06117">More...</a><br /></td></tr>
<tr class="separator:aa3d3b96cd45ef585d53ec95adcc06117"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe7d1da8b53f8b896fc5faf646468356"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#afe7d1da8b53f8b896fc5faf646468356">file_allow_write</a> (struct <a class="el" href="structfile.html">file</a> *<a class="el" href="structfile.html">file</a>)</td></tr>
<tr class="memdesc:afe7d1da8b53f8b896fc5faf646468356"><td class="mdescLeft">&#160;</td><td class="mdescRight">Re-enables write operations on FILE's underlying inode.  <a href="file_8c.html#afe7d1da8b53f8b896fc5faf646468356">More...</a><br /></td></tr>
<tr class="separator:afe7d1da8b53f8b896fc5faf646468356"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8866ac568cc804793c456ccb4af71957"><td class="memItemLeft" align="right" valign="top"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#a8866ac568cc804793c456ccb4af71957">file_length</a> (struct <a class="el" href="structfile.html">file</a> *<a class="el" href="structfile.html">file</a>)</td></tr>
<tr class="memdesc:a8866ac568cc804793c456ccb4af71957"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the size of FILE in bytes.  <a href="file_8c.html#a8866ac568cc804793c456ccb4af71957">More...</a><br /></td></tr>
<tr class="separator:a8866ac568cc804793c456ccb4af71957"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a123a2f99235d86d6accb4dff5568680a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#a123a2f99235d86d6accb4dff5568680a">file_seek</a> (struct <a class="el" href="structfile.html">file</a> *<a class="el" href="structfile.html">file</a>, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> new_pos)</td></tr>
<tr class="memdesc:a123a2f99235d86d6accb4dff5568680a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the current position in FILE to NEW_POS bytes from the start of the file.  <a href="file_8c.html#a123a2f99235d86d6accb4dff5568680a">More...</a><br /></td></tr>
<tr class="separator:a123a2f99235d86d6accb4dff5568680a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9f6a0a4a3da3eb0c8db747d505fea39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file_8c.html#ab9f6a0a4a3da3eb0c8db747d505fea39">file_tell</a> (struct <a class="el" href="structfile.html">file</a> *<a class="el" href="structfile.html">file</a>)</td></tr>
<tr class="memdesc:ab9f6a0a4a3da3eb0c8db747d505fea39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current position in FILE as a byte offset from the start of the file.  <a href="file_8c.html#ab9f6a0a4a3da3eb0c8db747d505fea39">More...</a><br /></td></tr>
<tr class="separator:ab9f6a0a4a3da3eb0c8db747d505fea39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="afe7d1da8b53f8b896fc5faf646468356"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe7d1da8b53f8b896fc5faf646468356">&#9670;&nbsp;</a></span>file_allow_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void file_allow_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Re-enables write operations on FILE's underlying inode. </p>
<p>(Writes might still be denied by some other file that has the same inode open.) </p>

<p class="definition">Definition at line <a class="el" href="file_8c_source.html#l00133">133</a> of file <a class="el" href="file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="file_8c_source.html#l00011">file::deny_write</a>, <a class="el" href="file_8c_source.html#l00009">file::inode</a>, <a class="el" href="inode_8c_source.html#l00333">inode_allow_write()</a>, and <a class="el" href="stddef_8h_source.html#l00004">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="file_8c_source.html#l00046">file_close()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_afe7d1da8b53f8b896fc5faf646468356_cgraph.png" border="0" usemap="#file_8c_afe7d1da8b53f8b896fc5faf646468356_cgraph" alt=""/></div>
<map name="file_8c_afe7d1da8b53f8b896fc5faf646468356_cgraph" id="file_8c_afe7d1da8b53f8b896fc5faf646468356_cgraph">
<area shape="rect" title="Re&#45;enables write operations on FILE&#39;s underlying inode." alt="" coords="5,5,117,31"/>
<area shape="rect" href="inode_8c.html#af980635032a3d7215e955e3aa0e1c902" title="Re&#45;enables writes to INODE." alt="" coords="165,5,292,31"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_afe7d1da8b53f8b896fc5faf646468356_icgraph.png" border="0" usemap="#file_8c_afe7d1da8b53f8b896fc5faf646468356_icgraph" alt=""/></div>
<map name="file_8c_afe7d1da8b53f8b896fc5faf646468356_icgraph" id="file_8c_afe7d1da8b53f8b896fc5faf646468356_icgraph">
<area shape="rect" title="Re&#45;enables write operations on FILE&#39;s underlying inode." alt="" coords="1045,200,1157,225"/>
<area shape="rect" href="file_8h.html#a11e71f5d8bdfe65c54a1ae9b83c5d67a" title="Closes FILE." alt="" coords="920,200,997,225"/>
<area shape="rect" href="free-map_8h.html#ac00d55315a3b01794bcdc6cc9d5ba5f5" title="Writes the free map to disk and closes the free map file." alt="" coords="756,75,872,100"/>
<area shape="rect" href="fsutil_8h.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="filesys/fsutil.h" alt="" coords="607,149,707,175"/>
<area shape="rect" href="fsutil_8h.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="449,200,523,225"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="766,251,862,276"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="791,300,837,325"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="616,19,698,44"/>
<area shape="rect" href="filesys_8h.html#aeb7068b9b8e7563972715862ca8106f5" title="Shuts down the file system module, writing any unwritten data to disk." alt="" coords="609,75,705,100"/>
<area shape="rect" href="filesys_8h.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="445,5,528,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,100,87,125"/>
<area shape="rect" href="shutdown_8h.html#a5a3f691cafea75080890d3c921840da7" title="devices/shutdown.h" alt="" coords="414,75,558,100"/>
<area shape="rect" href="shutdown_8h.html#a1c9d5e29ad8899afe0c34571ddee18f9" title="Shuts down the machine in the way configured by shutdown_configure()." alt="" coords="288,49,366,75"/>
<area shape="rect" href="init_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f" title="Prints a kernel command line help message and powers off the machine." alt="" coords="298,99,356,124"/>
<area shape="rect" href="kernel_2debug_8c.html#a0dba4a46c338129ae12e314e07e9fbe3" title="Halts the OS, printing the source file name, line number, and function name, plus a user&#45;specific mes..." alt="" coords="138,100,236,125"/>
<area shape="rect" href="init_8c.html#a598c2f3a0a33552aa203aa847dc265b6" title="Parses options in ARGV[] and returns the first non&#45;option argument." alt="" coords="135,149,240,175"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="142,200,232,225"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="606,301,708,327"/>
<area shape="rect" href="process_8h.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="425,301,547,327"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="291,301,363,327"/>
</map>
</div>

</div>
</div>
<a id="a4d12e9de7ab756bef5396c7b37698c9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d12e9de7ab756bef5396c7b37698c9a">&#9670;&nbsp;</a></span>file_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void file_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes FILE. </p>

<p class="definition">Definition at line <a class="el" href="file_8c_source.html#l00046">46</a> of file <a class="el" href="file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="file_8c_source.html#l00133">file_allow_write()</a>, <a class="el" href="malloc_8c_source.html#l00219">free()</a>, <a class="el" href="file_8c_source.html#l00009">file::inode</a>, <a class="el" href="inode_8c_source.html#l00164">inode_close()</a>, and <a class="el" href="stddef_8h_source.html#l00004">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="free-map_8c_source.html#l00065">free_map_close()</a>, <a class="el" href="fsutil_8c_source.html#l00167">fsutil_append()</a>, <a class="el" href="fsutil_8c_source.html#l00034">fsutil_cat()</a>, <a class="el" href="fsutil_8c_source.html#l00073">fsutil_extract()</a>, and <a class="el" href="process_8c_source.html#l00209">load()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_a4d12e9de7ab756bef5396c7b37698c9a_cgraph.png" border="0" usemap="#file_8c_a4d12e9de7ab756bef5396c7b37698c9a_cgraph" alt=""/></div>
<map name="file_8c_a4d12e9de7ab756bef5396c7b37698c9a_cgraph" id="file_8c_a4d12e9de7ab756bef5396c7b37698c9a_cgraph">
<area shape="rect" title="Closes FILE." alt="" coords="5,309,82,334"/>
<area shape="rect" href="file_8c.html#afe7d1da8b53f8b896fc5faf646468356" title="Re&#45;enables write operations on FILE&#39;s underlying inode." alt="" coords="130,258,242,283"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="332,309,376,334"/>
<area shape="rect" href="inode_8c.html#a74e1a19b5bcae248617541fe6f2f77c5" title="Closes INODE and writes it to disk." alt="" coords="140,359,232,385"/>
<area shape="rect" href="inode_8c.html#af980635032a3d7215e955e3aa0e1c902" title="Re&#45;enables writes to INODE." alt="" coords="290,258,417,283"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="471,309,583,334"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="651,207,763,233"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1026,310,1134,335"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1035,418,1125,443"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="659,778,755,803"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="479,613,575,638"/>
<area shape="rect" href="string_8c.html#ab1e7a2e7d71d61a771b43da7c18fdba6" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="865,6,933,31"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="637,133,777,158"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="465,106,589,131"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="868,157,930,182"/>
<area shape="rect" href="vaddr_8h.html#a5a07aa5a4d70694db19884626f4b0fa3" title="Round down to nearest page boundary." alt="" coords="1502,469,1619,494"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="1360,518,1438,543"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1203,469,1280,494"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1359,418,1439,443"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1371,469,1427,494"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1354,1050,1444,1075"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="825,714,973,753"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1187,721,1295,746"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="852,829,946,854"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1361,697,1437,722"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1343,746,1454,771"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1197,923,1286,949"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1030,1025,1130,1050"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1025,569,1135,594"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1031,822,1129,847"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1349,873,1449,898"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1198,1025,1285,1050"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1365,569,1433,594"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1204,770,1279,795"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="669,613,745,638"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1201,518,1282,543"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="848,511,950,537"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="843,613,955,638"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="1044,467,1116,493"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="858,258,940,283"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="829,359,969,385"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="840,107,958,133"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1051,57,1109,82"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1021,258,1139,283"/>
<area shape="rect" href="bitmap_8c.html#ab8d6660c5e30dab9cecef1240c7423d9" title="Returns the value of the bit numbered IDX in B." alt="" coords="1196,258,1287,283"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1037,359,1123,385"/>
<area shape="rect" href="bitmap_8c.html#adb8912537854d4a2dcb1f35940a7134b" title="Atomically sets the bit numbered BIT_IDX in B to true." alt="" coords="1192,361,1291,386"/>
<area shape="rect" href="bitmap_8c.html#a576f7d29f091eac024f70ae8d68997a9" title="Bitmap size." alt="" coords="1034,107,1126,133"/>
<area shape="rect" href="inode_8c.html#af6294d594eab7d7afccf0d0cefd35a13" title="Returns the number of sectors to allocate for an inode SIZE bytes long." alt="" coords="293,410,415,435"/>
<area shape="rect" href="free-map_8c.html#a65586c8713124a199b6db7397c1aba6f" title="Makes CNT sectors starting at SECTOR available for use." alt="" coords="643,359,771,385"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_a4d12e9de7ab756bef5396c7b37698c9a_icgraph.png" border="0" usemap="#file_8c_a4d12e9de7ab756bef5396c7b37698c9a_icgraph" alt=""/></div>
<map name="file_8c_a4d12e9de7ab756bef5396c7b37698c9a_icgraph" id="file_8c_a4d12e9de7ab756bef5396c7b37698c9a_icgraph">
<area shape="rect" title="Closes FILE." alt="" coords="920,200,997,225"/>
<area shape="rect" href="free-map_8h.html#ac00d55315a3b01794bcdc6cc9d5ba5f5" title="Writes the free map to disk and closes the free map file." alt="" coords="756,75,872,100"/>
<area shape="rect" href="fsutil_8h.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="filesys/fsutil.h" alt="" coords="607,149,707,175"/>
<area shape="rect" href="fsutil_8h.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="449,200,523,225"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="766,251,862,276"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="791,300,837,325"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="616,19,698,44"/>
<area shape="rect" href="filesys_8h.html#aeb7068b9b8e7563972715862ca8106f5" title="Shuts down the file system module, writing any unwritten data to disk." alt="" coords="609,75,705,100"/>
<area shape="rect" href="filesys_8h.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="445,5,528,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,100,87,125"/>
<area shape="rect" href="shutdown_8h.html#a5a3f691cafea75080890d3c921840da7" title="devices/shutdown.h" alt="" coords="414,75,558,100"/>
<area shape="rect" href="shutdown_8h.html#a1c9d5e29ad8899afe0c34571ddee18f9" title="Shuts down the machine in the way configured by shutdown_configure()." alt="" coords="288,49,366,75"/>
<area shape="rect" href="init_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f" title="Prints a kernel command line help message and powers off the machine." alt="" coords="298,99,356,124"/>
<area shape="rect" href="kernel_2debug_8c.html#a0dba4a46c338129ae12e314e07e9fbe3" title="Halts the OS, printing the source file name, line number, and function name, plus a user&#45;specific mes..." alt="" coords="138,100,236,125"/>
<area shape="rect" href="init_8c.html#a598c2f3a0a33552aa203aa847dc265b6" title="Parses options in ARGV[] and returns the first non&#45;option argument." alt="" coords="135,149,240,175"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="142,200,232,225"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="606,301,708,327"/>
<area shape="rect" href="process_8h.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="425,301,547,327"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="291,301,363,327"/>
</map>
</div>

</div>
</div>
<a id="aa3d3b96cd45ef585d53ec95adcc06117"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3d3b96cd45ef585d53ec95adcc06117">&#9670;&nbsp;</a></span>file_deny_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void file_deny_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prevents write operations on FILE's underlying inode until <a class="el" href="file_8c.html#afe7d1da8b53f8b896fc5faf646468356" title="Re-enables write operations on FILE&#39;s underlying inode.">file_allow_write()</a> is called or FILE is closed. </p>
<p>Preventing writes. </p>

<p class="definition">Definition at line <a class="el" href="file_8c_source.html#l00119">119</a> of file <a class="el" href="file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="file_8c_source.html#l00011">file::deny_write</a>, <a class="el" href="file_8c_source.html#l00009">file::inode</a>, <a class="el" href="inode_8c_source.html#l00323">inode_deny_write()</a>, and <a class="el" href="stddef_8h_source.html#l00004">NULL</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_aa3d3b96cd45ef585d53ec95adcc06117_cgraph.png" border="0" usemap="#file_8c_aa3d3b96cd45ef585d53ec95adcc06117_cgraph" alt=""/></div>
<map name="file_8c_aa3d3b96cd45ef585d53ec95adcc06117_cgraph" id="file_8c_aa3d3b96cd45ef585d53ec95adcc06117_cgraph">
<area shape="rect" title="Prevents write operations on FILE&#39;s underlying inode until file_allow_write() is called or FILE is cl..." alt="" coords="5,5,116,31"/>
<area shape="rect" href="inode_8c.html#ab39a43eb15fff5d8f28df20a8762b290" title="Disables writes to INODE." alt="" coords="164,5,289,31"/>
</map>
</div>

</div>
</div>
<a id="ac6119517daaf8c3e6b31d15cff4bbf4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6119517daaf8c3e6b31d15cff4bbf4a">&#9670;&nbsp;</a></span>file_get_inode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a>* file_get_inode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the inode encapsulated by FILE. </p>

<p class="definition">Definition at line <a class="el" href="file_8c_source.html#l00058">58</a> of file <a class="el" href="file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="file_8c_source.html#l00009">file::inode</a>.</p>

</div>
</div>
<a id="a8866ac568cc804793c456ccb4af71957"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8866ac568cc804793c456ccb4af71957">&#9670;&nbsp;</a></span>file_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> file_length </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the size of FILE in bytes. </p>
<p><a class="el" href="file_8h.html">filesys/file.h</a> </p>

<p class="definition">Definition at line <a class="el" href="file_8c_source.html#l00145">145</a> of file <a class="el" href="file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="file_8c_source.html#l00009">file::inode</a>, <a class="el" href="inode_8c_source.html#l00342">inode_length()</a>, and <a class="el" href="stddef_8h_source.html#l00004">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="fsutil_8c_source.html#l00167">fsutil_append()</a>, <a class="el" href="process_8c_source.html#l00209">load()</a>, and <a class="el" href="process_8c_source.html#l00326">validate_segment()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_a8866ac568cc804793c456ccb4af71957_cgraph.png" border="0" usemap="#file_8c_a8866ac568cc804793c456ccb4af71957_cgraph" alt=""/></div>
<map name="file_8c_a8866ac568cc804793c456ccb4af71957_cgraph" id="file_8c_a8866ac568cc804793c456ccb4af71957_cgraph">
<area shape="rect" title="Returns the size of FILE in bytes." alt="" coords="5,5,87,31"/>
<area shape="rect" href="inode_8c.html#a67214eb44fb24ef254fca76f9a63fd6d" title="Returns the length, in bytes, of INODE&#39;s data." alt="" coords="135,5,233,31"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_a8866ac568cc804793c456ccb4af71957_icgraph.png" border="0" usemap="#file_8c_a8866ac568cc804793c456ccb4af71957_icgraph" alt=""/></div>
<map name="file_8c_a8866ac568cc804793c456ccb4af71957_icgraph" id="file_8c_a8866ac568cc804793c456ccb4af71957_icgraph">
<area shape="rect" title="Returns the size of FILE in bytes." alt="" coords="1035,56,1118,81"/>
<area shape="rect" href="fsutil_8h.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="filesys/fsutil.h" alt="" coords="713,5,814,31"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="740,56,787,81"/>
<area shape="rect" href="process_8c.html#a6791a2f8c763395aef1dff4c8409550b" title="Checks whether PHDR describes a valid, loadable segment in FILE and returns true if so,..." alt="" coords="862,107,987,132"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="135,31,225,56"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,31,87,56"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="564,56,665,81"/>
<area shape="rect" href="process_8h.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="393,56,516,81"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="273,56,345,81"/>
</map>
</div>

</div>
</div>
<a id="ae9c6487eb7f772982a437b42483c6827"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9c6487eb7f772982a437b42483c6827">&#9670;&nbsp;</a></span>file_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structfile.html">file</a>* file_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens a file for the given INODE, of which it takes ownership, and returns the new file. </p>
<p>Opening and closing files.</p>
<p>Returns a null pointer if an allocation fails or if INODE is null. </p>

<p class="definition">Definition at line <a class="el" href="file_8c_source.html#l00018">18</a> of file <a class="el" href="file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="malloc_8c_source.html#l00159">calloc()</a>, <a class="el" href="file_8c_source.html#l00011">file::deny_write</a>, <a class="el" href="malloc_8c_source.html#l00219">free()</a>, <a class="el" href="file_8c_source.html#l00009">file::inode</a>, <a class="el" href="inode_8c_source.html#l00164">inode_close()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, and <a class="el" href="file_8c_source.html#l00010">file::pos</a>.</p>

<p class="reference">Referenced by <a class="el" href="file_8c_source.html#l00039">file_reopen()</a>, <a class="el" href="filesys_8c_source.html#l00067">filesys_open()</a>, <a class="el" href="free-map_8c_source.html#l00073">free_map_create()</a>, and <a class="el" href="free-map_8c_source.html#l00054">free_map_open()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_ae9c6487eb7f772982a437b42483c6827_cgraph.png" border="0" usemap="#file_8c_ae9c6487eb7f772982a437b42483c6827_cgraph" alt=""/></div>
<map name="file_8c_ae9c6487eb7f772982a437b42483c6827_cgraph" id="file_8c_ae9c6487eb7f772982a437b42483c6827_cgraph">
<area shape="rect" title="Opens a file for the given INODE, of which it takes ownership, and returns the new file." alt="" coords="5,943,81,968"/>
<area shape="rect" href="malloc_8c.html#a2b87cd3f63698b243dddb141a4c1e72a" title="Allocates and return A times B bytes initialized to zeroes." alt="" coords="129,816,184,841"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="412,943,456,968"/>
<area shape="rect" href="inode_8c.html#a74e1a19b5bcae248617541fe6f2f77c5" title="Closes INODE and writes it to disk." alt="" coords="232,1044,325,1069"/>
<area shape="rect" href="malloc_8c.html#a7ac38fce3243a7dcf448301ee9ffd392" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="249,588,308,613"/>
<area shape="rect" href="string_8c.html#ab1e7a2e7d71d61a771b43da7c18fdba6" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="965,820,1034,845"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="554,715,667,740"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="554,867,667,892"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1460,664,1542,689"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1130,765,1231,791"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1288,512,1397,537"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="754,323,850,348"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="754,461,850,487"/>
<area shape="rect" href="palloc_8c.html#a135bc426d035b41313b4542adfd2c05f" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="543,512,678,537"/>
<area shape="rect" href="palloc_8c.html#aa8cccdccaa05d4023e3e65c15ed486af" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="374,512,493,537"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="969,869,1030,895"/>
<area shape="rect" href="vaddr_8h.html#a5a07aa5a4d70694db19884626f4b0fa3" title="Round down to nearest page boundary." alt="" coords="1604,347,1721,372"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="1624,713,1702,739"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1629,639,1697,664"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="1307,740,1379,765"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1298,1148,1387,1173"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1623,881,1703,907"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1462,832,1540,857"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1635,832,1691,857"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1298,5,1388,31"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="925,316,1073,355"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1289,157,1397,183"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="953,107,1046,132"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1463,247,1539,272"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1445,171,1556,196"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1456,309,1546,335"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1293,309,1393,335"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1132,56,1230,81"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1613,196,1713,221"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="961,461,1038,487"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1124,411,1237,436"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="726,765,877,791"/>
<area shape="rect" href="bitmap_8c.html#a88a9127abe8322926d25de46140b778a" title="Finding set or unset bits." alt="" coords="951,768,1048,793"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="929,919,1069,944"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1121,968,1240,993"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1137,919,1224,944"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1289,832,1397,857"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="732,1019,872,1044"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="549,968,672,993"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="958,968,1040,993"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="941,1069,1058,1095"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1151,1019,1210,1044"/>
<area shape="rect" href="bitmap_8c.html#a576f7d29f091eac024f70ae8d68997a9" title="Bitmap size." alt="" coords="1134,1069,1227,1095"/>
<area shape="rect" href="inode_8c.html#af6294d594eab7d7afccf0d0cefd35a13" title="Returns the number of sectors to allocate for an inode SIZE bytes long." alt="" coords="373,1044,495,1069"/>
<area shape="rect" href="free-map_8c.html#a65586c8713124a199b6db7397c1aba6f" title="Makes CNT sectors starting at SECTOR available for use." alt="" coords="737,1068,866,1093"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_ae9c6487eb7f772982a437b42483c6827_icgraph.png" border="0" usemap="#file_8c_ae9c6487eb7f772982a437b42483c6827_icgraph" alt=""/></div>
<map name="file_8c_ae9c6487eb7f772982a437b42483c6827_icgraph" id="file_8c_ae9c6487eb7f772982a437b42483c6827_icgraph">
<area shape="rect" title="Opens a file for the given INODE, of which it takes ownership, and returns the new file." alt="" coords="1014,171,1089,196"/>
<area shape="rect" href="file_8h.html#a2f1e61c23b36a5ff6cdb36a674669001" title="Opens and returns a new file for the same inode as FILE." alt="" coords="861,71,949,96"/>
<area shape="rect" href="filesys_8h.html#a6dd9e1e66d780ecd7580dabcf72559b4" title="Opens the file with the given NAME." alt="" coords="857,120,953,145"/>
<area shape="rect" href="free-map_8h.html#a928c69cba9ea179d6fe581acd970c512" title="Creates a new free map file on disk and writes the free map to it." alt="" coords="844,195,966,220"/>
<area shape="rect" href="free-map_8h.html#a82ae69d4b7534829d5c1672231c62370" title="Opens the free map file and reads it from disk." alt="" coords="847,244,962,269"/>
<area shape="rect" href="fsutil_8h.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="filesys/fsutil.h" alt="" coords="406,5,506,31"/>
<area shape="rect" href="fsutil_8h.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="273,56,347,81"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="568,107,664,132"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="732,157,778,183"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="135,107,225,132"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,157,87,183"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="565,157,666,183"/>
<area shape="rect" href="process_8h.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="395,157,517,183"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="274,157,346,183"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="714,207,796,232"/>
<area shape="rect" href="filesys_8h.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="574,208,657,233"/>
</map>
</div>

</div>
</div>
<a id="aa970e0e3d037e457750745798328db97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa970e0e3d037e457750745798328db97">&#9670;&nbsp;</a></span>file_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> file_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads SIZE bytes from FILE into BUFFER, starting at the file's current position. </p>
<p>Reading and writing.</p>
<p>Returns the number of bytes actually read, which may be less than SIZE if end of file is reached. Advances FILE's position by the number of bytes read. </p>

<p class="definition">Definition at line <a class="el" href="file_8c_source.html#l00069">69</a> of file <a class="el" href="file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="input_8c_source.html#l00007">buffer</a>, <a class="el" href="file_8c_source.html#l00009">file::inode</a>, <a class="el" href="inode_8c_source.html#l00201">inode_read_at()</a>, and <a class="el" href="file_8c_source.html#l00010">file::pos</a>.</p>

<p class="reference">Referenced by <a class="el" href="fsutil_8c_source.html#l00167">fsutil_append()</a>, <a class="el" href="fsutil_8c_source.html#l00034">fsutil_cat()</a>, <a class="el" href="process_8c_source.html#l00209">load()</a>, and <a class="el" href="process_8c_source.html#l00383">load_segment()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_aa970e0e3d037e457750745798328db97_cgraph.png" border="0" usemap="#file_8c_aa970e0e3d037e457750745798328db97_cgraph" alt=""/></div>
<map name="file_8c_aa970e0e3d037e457750745798328db97_cgraph" id="file_8c_aa970e0e3d037e457750745798328db97_cgraph">
<area shape="rect" title="Reads SIZE bytes from FILE into BUFFER, starting at the file&#39;s current position." alt="" coords="5,367,78,392"/>
<area shape="rect" href="inode_8c.html#a31fcd756c686b818d56067b4460bfdb9" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="126,367,232,392"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="292,191,378,216"/>
<area shape="rect" href="inode_8c.html#a9b48abdaf996c82819f49d6d8fc4c224" title="Returns the block device sector that contains byte offset POS within INODE." alt="" coords="280,240,389,266"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="650,291,694,316"/>
<area shape="rect" href="inode_8c.html#a67214eb44fb24ef254fca76f9a63fd6d" title="Returns the length, in bytes, of INODE&#39;s data." alt="" coords="286,518,384,543"/>
<area shape="rect" href="malloc_8c.html#a7ac38fce3243a7dcf448301ee9ffd392" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="305,468,365,494"/>
<area shape="rect" href="string_8c.html#ac81277697db3331c21cac338b661817a" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="299,567,371,592"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="447,191,547,216"/>
<area shape="rect" href="block_8c.html#a805c68661c9837f08b82b27fb82b9f94" title="Returns BLOCK&#39;s name (e.g." alt="" coords="626,191,719,216"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="807,343,920,368"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="807,392,920,418"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1376,291,1484,316"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1385,240,1475,266"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="815,796,912,822"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="815,696,912,722"/>
<area shape="rect" href="string_8c.html#ab1e7a2e7d71d61a771b43da7c18fdba6" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1219,292,1287,318"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="991,166,1131,191"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="802,140,925,166"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1222,190,1284,215"/>
<area shape="rect" href="vaddr_8h.html#a5a07aa5a4d70694db19884626f4b0fa3" title="Round down to nearest page boundary." alt="" coords="1696,494,1813,519"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="1716,444,1794,470"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1554,291,1632,316"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1715,242,1794,267"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1727,291,1783,316"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1385,1152,1475,1178"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="987,790,1135,828"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1376,874,1484,899"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1014,1000,1108,1026"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1555,680,1631,706"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1537,854,1648,879"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1548,766,1638,791"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1380,747,1480,772"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1375,595,1485,620"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1204,1051,1302,1076"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1721,544,1789,570"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1023,696,1099,722"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1552,494,1634,519"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1202,443,1304,468"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1197,696,1309,722"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="1394,443,1466,468"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1212,140,1294,166"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1183,342,1323,367"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1194,39,1312,64"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1401,14,1459,39"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1371,140,1489,166"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1387,342,1473,367"/>
<area shape="rect" href="palloc_8c.html#a135bc426d035b41313b4542adfd2c05f" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="604,646,740,671"/>
<area shape="rect" href="palloc_8c.html#aa8cccdccaa05d4023e3e65c15ed486af" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="437,646,556,671"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="788,646,939,671"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_aa970e0e3d037e457750745798328db97_icgraph.png" border="0" usemap="#file_8c_aa970e0e3d037e457750745798328db97_icgraph" alt=""/></div>
<map name="file_8c_aa970e0e3d037e457750745798328db97_icgraph" id="file_8c_aa970e0e3d037e457750745798328db97_icgraph">
<area shape="rect" title="Reads SIZE bytes from FILE into BUFFER, starting at the file&#39;s current position." alt="" coords="1015,81,1087,107"/>
<area shape="rect" href="fsutil_8h.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="filesys/fsutil.h" alt="" coords="713,5,814,31"/>
<area shape="rect" href="fsutil_8h.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="577,56,651,81"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="740,107,787,132"/>
<area shape="rect" href="process_8c.html#a2f03f0e1bdd5d41d15c2ea83f0135b7f" title="Loads a segment starting at offset OFS in FILE at address UPAGE." alt="" coords="862,157,967,183"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="135,56,225,81"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,56,87,81"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="564,107,665,132"/>
<area shape="rect" href="process_8h.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="393,107,516,132"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="273,107,345,132"/>
</map>
</div>

</div>
</div>
<a id="a9f62f31208f5a024b47fc3ac90ed0b9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f62f31208f5a024b47fc3ac90ed0b9c">&#9670;&nbsp;</a></span>file_read_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> file_read_at </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>file_ofs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads SIZE bytes from FILE into BUFFER, starting at offset FILE_OFS in the file. </p>
<p>Returns the number of bytes actually read, which may be less than SIZE if end of file is reached. The file's current position is unaffected. </p>

<p class="definition">Definition at line <a class="el" href="file_8c_source.html#l00082">82</a> of file <a class="el" href="file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="input_8c_source.html#l00007">buffer</a>, <a class="el" href="file_8c_source.html#l00009">file::inode</a>, and <a class="el" href="inode_8c_source.html#l00201">inode_read_at()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_a9f62f31208f5a024b47fc3ac90ed0b9c_cgraph.png" border="0" usemap="#file_8c_a9f62f31208f5a024b47fc3ac90ed0b9c_cgraph" alt=""/></div>
<map name="file_8c_a9f62f31208f5a024b47fc3ac90ed0b9c_cgraph" id="file_8c_a9f62f31208f5a024b47fc3ac90ed0b9c_cgraph">
<area shape="rect" title="Reads SIZE bytes from FILE into BUFFER, starting at offset FILE_OFS in the file." alt="" coords="5,367,96,392"/>
<area shape="rect" href="inode_8c.html#a31fcd756c686b818d56067b4460bfdb9" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="144,367,251,392"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="310,191,397,216"/>
<area shape="rect" href="inode_8c.html#a9b48abdaf996c82819f49d6d8fc4c224" title="Returns the block device sector that contains byte offset POS within INODE." alt="" coords="299,240,408,266"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="669,291,713,316"/>
<area shape="rect" href="inode_8c.html#a67214eb44fb24ef254fca76f9a63fd6d" title="Returns the length, in bytes, of INODE&#39;s data." alt="" coords="304,518,402,543"/>
<area shape="rect" href="malloc_8c.html#a7ac38fce3243a7dcf448301ee9ffd392" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="323,468,383,494"/>
<area shape="rect" href="string_8c.html#ac81277697db3331c21cac338b661817a" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="317,567,389,592"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="465,191,565,216"/>
<area shape="rect" href="block_8c.html#a805c68661c9837f08b82b27fb82b9f94" title="Returns BLOCK&#39;s name (e.g." alt="" coords="644,191,737,216"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="826,343,938,368"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="826,392,938,418"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1395,291,1503,316"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1404,240,1493,266"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="834,796,930,822"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="834,696,930,722"/>
<area shape="rect" href="string_8c.html#ab1e7a2e7d71d61a771b43da7c18fdba6" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1237,292,1306,318"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="1010,166,1149,191"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="820,140,944,166"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1241,190,1302,215"/>
<area shape="rect" href="vaddr_8h.html#a5a07aa5a4d70694db19884626f4b0fa3" title="Round down to nearest page boundary." alt="" coords="1715,494,1832,519"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="1735,444,1812,470"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1573,291,1650,316"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1734,242,1813,267"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1746,291,1801,316"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1404,1152,1494,1178"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1005,790,1154,828"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1395,874,1503,899"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1033,1000,1126,1026"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1573,680,1649,706"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1556,854,1667,879"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1567,766,1656,791"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1399,747,1499,772"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1394,595,1503,620"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1223,1051,1320,1076"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1740,544,1807,570"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1041,696,1118,722"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1571,494,1652,519"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1221,443,1322,468"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1215,696,1328,722"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="1413,443,1485,468"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1230,140,1313,166"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1202,342,1341,367"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1213,39,1330,64"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1419,14,1478,39"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1389,140,1508,166"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1405,342,1492,367"/>
<area shape="rect" href="palloc_8c.html#a135bc426d035b41313b4542adfd2c05f" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="623,646,758,671"/>
<area shape="rect" href="palloc_8c.html#aa8cccdccaa05d4023e3e65c15ed486af" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="456,646,575,671"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="806,646,957,671"/>
</map>
</div>

</div>
</div>
<a id="a0b56dded2607135b7d304654ecc659ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b56dded2607135b7d304654ecc659ba">&#9670;&nbsp;</a></span>file_reopen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structfile.html">file</a>* file_reopen </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens and returns a new file for the same inode as FILE. </p>
<p>Returns a null pointer if unsuccessful. </p>

<p class="definition">Definition at line <a class="el" href="file_8c_source.html#l00039">39</a> of file <a class="el" href="file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="file_8c_source.html#l00018">file_open()</a>, <a class="el" href="file_8c_source.html#l00009">file::inode</a>, and <a class="el" href="inode_8c_source.html#l00146">inode_reopen()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_a0b56dded2607135b7d304654ecc659ba_cgraph.png" border="0" usemap="#file_8c_a0b56dded2607135b7d304654ecc659ba_cgraph" alt=""/></div>
<map name="file_8c_a0b56dded2607135b7d304654ecc659ba_cgraph" id="file_8c_a0b56dded2607135b7d304654ecc659ba_cgraph">
<area shape="rect" title="Opens and returns a new file for the same inode as FILE." alt="" coords="5,1004,93,1030"/>
<area shape="rect" href="file_8c.html#ae9c6487eb7f772982a437b42483c6827" title="Opens a file for the given INODE, of which it takes ownership, and returns the new file." alt="" coords="154,979,230,1004"/>
<area shape="rect" href="inode_8c.html#a2314e746f5653780aab519437db1296d" title="Reopens and returns INODE." alt="" coords="141,1028,244,1054"/>
<area shape="rect" href="malloc_8c.html#a2b87cd3f63698b243dddb141a4c1e72a" title="Allocates and return A times B bytes initialized to zeroes." alt="" coords="292,928,347,954"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="574,928,619,954"/>
<area shape="rect" href="inode_8c.html#a74e1a19b5bcae248617541fe6f2f77c5" title="Closes INODE and writes it to disk." alt="" coords="395,1155,487,1180"/>
<area shape="rect" href="malloc_8c.html#a7ac38fce3243a7dcf448301ee9ffd392" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="411,599,471,624"/>
<area shape="rect" href="string_8c.html#ab1e7a2e7d71d61a771b43da7c18fdba6" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1128,928,1197,954"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="717,726,830,751"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="717,827,830,852"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1623,675,1704,700"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1293,726,1394,751"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1451,574,1560,599"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="916,320,1013,346"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="916,472,1013,498"/>
<area shape="rect" href="palloc_8c.html#a135bc426d035b41313b4542adfd2c05f" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="706,523,841,548"/>
<area shape="rect" href="palloc_8c.html#aa8cccdccaa05d4023e3e65c15ed486af" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="537,523,656,548"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1131,979,1193,1004"/>
<area shape="rect" href="vaddr_8h.html#a5a07aa5a4d70694db19884626f4b0fa3" title="Round down to nearest page boundary." alt="" coords="1767,700,1884,726"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="1787,776,1865,802"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1792,638,1859,663"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="1470,726,1541,751"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1461,1116,1550,1142"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1786,927,1865,952"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1625,878,1703,903"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1798,878,1853,903"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1460,16,1551,42"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1088,316,1236,355"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1451,182,1559,207"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1116,267,1209,292"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1626,263,1702,288"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1608,188,1719,214"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1619,364,1708,390"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1455,371,1555,396"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1295,67,1392,92"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1124,472,1200,498"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1287,472,1400,498"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="889,1130,1040,1155"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1092,1130,1232,1155"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1300,1130,1387,1155"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1451,827,1559,852"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="895,1080,1035,1106"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="712,1030,835,1055"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1121,1231,1203,1256"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1103,1080,1221,1106"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1314,1030,1373,1055"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1284,1231,1403,1256"/>
<area shape="rect" href="bitmap_8c.html#a576f7d29f091eac024f70ae8d68997a9" title="Bitmap size." alt="" coords="1297,1080,1390,1106"/>
<area shape="rect" href="inode_8c.html#af6294d594eab7d7afccf0d0cefd35a13" title="Returns the number of sectors to allocate for an inode SIZE bytes long." alt="" coords="535,1155,658,1180"/>
<area shape="rect" href="free-map_8c.html#a65586c8713124a199b6db7397c1aba6f" title="Makes CNT sectors starting at SECTOR available for use." alt="" coords="900,1231,1029,1256"/>
</map>
</div>

</div>
</div>
<a id="a123a2f99235d86d6accb4dff5568680a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a123a2f99235d86d6accb4dff5568680a">&#9670;&nbsp;</a></span>file_seek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void file_seek </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>new_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the current position in FILE to NEW_POS bytes from the start of the file. </p>
<p>File position. </p>

<p class="definition">Definition at line <a class="el" href="file_8c_source.html#l00154">154</a> of file <a class="el" href="file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, and <a class="el" href="file_8c_source.html#l00010">file::pos</a>.</p>

<p class="reference">Referenced by <a class="el" href="process_8c_source.html#l00209">load()</a>, and <a class="el" href="process_8c_source.html#l00383">load_segment()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_a123a2f99235d86d6accb4dff5568680a_icgraph.png" border="0" usemap="#file_8c_a123a2f99235d86d6accb4dff5568680a_icgraph" alt=""/></div>
<map name="file_8c_a123a2f99235d86d6accb4dff5568680a_icgraph" id="file_8c_a123a2f99235d86d6accb4dff5568680a_icgraph">
<area shape="rect" title="Sets the current position in FILE to NEW_POS bytes from the start of the file." alt="" coords="961,5,1035,31"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="713,5,759,31"/>
<area shape="rect" href="process_8c.html#a2f03f0e1bdd5d41d15c2ea83f0135b7f" title="Loads a segment starting at offset OFS in FILE at address UPAGE." alt="" coords="807,31,913,56"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="564,5,665,31"/>
<area shape="rect" href="process_8h.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="393,5,516,31"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="273,5,345,31"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="135,5,225,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
</map>
</div>

</div>
</div>
<a id="ab9f6a0a4a3da3eb0c8db747d505fea39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9f6a0a4a3da3eb0c8db747d505fea39">&#9670;&nbsp;</a></span>file_tell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> file_tell </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current position in FILE as a byte offset from the start of the file. </p>

<p class="definition">Definition at line <a class="el" href="file_8c_source.html#l00164">164</a> of file <a class="el" href="file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, and <a class="el" href="file_8c_source.html#l00010">file::pos</a>.</p>

<p class="reference">Referenced by <a class="el" href="fsutil_8c_source.html#l00034">fsutil_cat()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_ab9f6a0a4a3da3eb0c8db747d505fea39_icgraph.png" border="0" usemap="#file_8c_ab9f6a0a4a3da3eb0c8db747d505fea39_icgraph" alt=""/></div>
<map name="file_8c_ab9f6a0a4a3da3eb0c8db747d505fea39_icgraph" id="file_8c_ab9f6a0a4a3da3eb0c8db747d505fea39_icgraph">
<area shape="rect" title="Returns the current position in FILE as a byte offset from the start of the file." alt="" coords="395,5,458,31"/>
<area shape="rect" href="fsutil_8h.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="273,5,347,31"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="135,5,225,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
</map>
</div>

</div>
</div>
<a id="a5c3629e8008d2ad73290be83f84d27eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c3629e8008d2ad73290be83f84d27eb">&#9670;&nbsp;</a></span>file_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> file_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes SIZE bytes from BUFFER into FILE, starting at the file's current position. </p>
<p>Returns the number of bytes actually written, which may be less than SIZE if end of file is reached. (Normally we'd grow the file in that case, but file growth is not yet implemented.) Advances FILE's position by the number of bytes read. </p>

<p class="definition">Definition at line <a class="el" href="file_8c_source.html#l00095">95</a> of file <a class="el" href="file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="input_8c_source.html#l00007">buffer</a>, <a class="el" href="file_8c_source.html#l00009">file::inode</a>, <a class="el" href="inode_8c_source.html#l00258">inode_write_at()</a>, and <a class="el" href="file_8c_source.html#l00010">file::pos</a>.</p>

<p class="reference">Referenced by <a class="el" href="fsutil_8c_source.html#l00073">fsutil_extract()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_a5c3629e8008d2ad73290be83f84d27eb_cgraph.png" border="0" usemap="#file_8c_a5c3629e8008d2ad73290be83f84d27eb_cgraph" alt=""/></div>
<map name="file_8c_a5c3629e8008d2ad73290be83f84d27eb_cgraph" id="file_8c_a5c3629e8008d2ad73290be83f84d27eb_cgraph">
<area shape="rect" title="Writes SIZE bytes from BUFFER into FILE, starting at the file&#39;s current position." alt="" coords="5,180,79,205"/>
<area shape="rect" href="inode_8c.html#a09402d2c8d33dc00b2557daa27d944ee" title="Writes SIZE bytes from BUFFER into INODE, starting at OFFSET." alt="" coords="127,180,235,205"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="294,5,381,31"/>
<area shape="rect" href="block_8c.html#ab7e44f7861385a5c4630d899a469f9d4" title="Write sector SECTOR to BLOCK from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="294,55,382,80"/>
<area shape="rect" href="inode_8c.html#a9b48abdaf996c82819f49d6d8fc4c224" title="Returns the block device sector that contains byte offset POS within INODE." alt="" coords="283,104,392,129"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="478,332,522,357"/>
<area shape="rect" href="string_8c.html#ab1e7a2e7d71d61a771b43da7c18fdba6" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1030,307,1098,332"/>
<area shape="rect" href="inode_8c.html#a67214eb44fb24ef254fca76f9a63fd6d" title="Returns the length, in bytes, of INODE&#39;s data." alt="" coords="289,256,387,281"/>
<area shape="rect" href="malloc_8c.html#a7ac38fce3243a7dcf448301ee9ffd392" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="308,712,368,737"/>
<area shape="rect" href="string_8c.html#ac81277697db3331c21cac338b661817a" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="302,761,374,787"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="450,29,550,55"/>
<area shape="rect" href="block_8c.html#a805c68661c9837f08b82b27fb82b9f94" title="Returns BLOCK&#39;s name (e.g." alt="" coords="628,29,722,55"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="619,560,731,585"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="810,533,923,559"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1353,459,1461,484"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1362,408,1452,433"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="818,997,914,1023"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="818,864,914,889"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="796,256,936,281"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="613,256,737,281"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1033,356,1095,381"/>
<area shape="rect" href="vaddr_8h.html#a5a07aa5a4d70694db19884626f4b0fa3" title="Round down to nearest page boundary." alt="" coords="1669,687,1786,712"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="1689,637,1766,663"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1527,459,1604,484"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1688,409,1767,435"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1700,459,1755,484"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1362,1320,1452,1345"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="990,991,1138,1029"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1353,1041,1461,1067"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1017,1168,1111,1193"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1527,848,1604,873"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1510,1021,1621,1047"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1521,933,1610,959"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1357,915,1457,940"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1352,763,1462,788"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1196,1269,1294,1295"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1694,736,1761,761"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1026,864,1102,889"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1525,661,1606,687"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1194,611,1296,636"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1189,864,1301,889"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="1371,611,1443,636"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1023,156,1105,181"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="994,405,1134,431"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1005,205,1123,231"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1216,231,1274,256"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1186,156,1304,181"/>
<area shape="rect" href="palloc_8c.html#a135bc426d035b41313b4542adfd2c05f" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="607,839,743,864"/>
<area shape="rect" href="palloc_8c.html#aa8cccdccaa05d4023e3e65c15ed486af" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="440,864,559,889"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="791,661,942,687"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_a5c3629e8008d2ad73290be83f84d27eb_icgraph.png" border="0" usemap="#file_8c_a5c3629e8008d2ad73290be83f84d27eb_icgraph" alt=""/></div>
<map name="file_8c_a5c3629e8008d2ad73290be83f84d27eb_icgraph" id="file_8c_a5c3629e8008d2ad73290be83f84d27eb_icgraph">
<area shape="rect" title="Writes SIZE bytes from BUFFER into FILE, starting at the file&#39;s current position." alt="" coords="417,5,491,31"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="273,5,369,31"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="135,5,225,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
</map>
</div>

</div>
</div>
<a id="a066213728ed4ad6314a980f50c2c93d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a066213728ed4ad6314a980f50c2c93d7">&#9670;&nbsp;</a></span>file_write_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> file_write_at </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfile.html">file</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>file_ofs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes SIZE bytes from BUFFER into FILE, starting at offset FILE_OFS in the file. </p>
<p>Returns the number of bytes actually written, which may be less than SIZE if end of file is reached. (Normally we'd grow the file in that case, but file growth is not yet implemented.) The file's current position is unaffected. </p>

<p class="definition">Definition at line <a class="el" href="file_8c_source.html#l00110">110</a> of file <a class="el" href="file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="input_8c_source.html#l00007">buffer</a>, <a class="el" href="file_8c_source.html#l00009">file::inode</a>, and <a class="el" href="inode_8c_source.html#l00258">inode_write_at()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="file_8c_a066213728ed4ad6314a980f50c2c93d7_cgraph.png" border="0" usemap="#file_8c_a066213728ed4ad6314a980f50c2c93d7_cgraph" alt=""/></div>
<map name="file_8c_a066213728ed4ad6314a980f50c2c93d7_cgraph" id="file_8c_a066213728ed4ad6314a980f50c2c93d7_cgraph">
<area shape="rect" title="Writes SIZE bytes from BUFFER into FILE, starting at offset FILE_OFS in the file." alt="" coords="5,180,98,205"/>
<area shape="rect" href="inode_8c.html#a09402d2c8d33dc00b2557daa27d944ee" title="Writes SIZE bytes from BUFFER into INODE, starting at OFFSET." alt="" coords="146,180,254,205"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="313,5,400,31"/>
<area shape="rect" href="block_8c.html#ab7e44f7861385a5c4630d899a469f9d4" title="Write sector SECTOR to BLOCK from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="312,55,400,80"/>
<area shape="rect" href="inode_8c.html#a9b48abdaf996c82819f49d6d8fc4c224" title="Returns the block device sector that contains byte offset POS within INODE." alt="" coords="302,104,411,129"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="496,332,540,357"/>
<area shape="rect" href="string_8c.html#ab1e7a2e7d71d61a771b43da7c18fdba6" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1048,307,1117,332"/>
<area shape="rect" href="inode_8c.html#a67214eb44fb24ef254fca76f9a63fd6d" title="Returns the length, in bytes, of INODE&#39;s data." alt="" coords="307,256,405,281"/>
<area shape="rect" href="malloc_8c.html#a7ac38fce3243a7dcf448301ee9ffd392" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="326,712,386,737"/>
<area shape="rect" href="string_8c.html#ac81277697db3331c21cac338b661817a" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="320,761,392,787"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="468,29,568,55"/>
<area shape="rect" href="block_8c.html#a805c68661c9837f08b82b27fb82b9f94" title="Returns BLOCK&#39;s name (e.g." alt="" coords="647,29,740,55"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="637,560,750,585"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="829,533,941,559"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1372,459,1480,484"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1381,408,1470,433"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="837,997,933,1023"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="837,864,933,889"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="815,256,955,281"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="632,256,755,281"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1052,356,1113,381"/>
<area shape="rect" href="vaddr_8h.html#a5a07aa5a4d70694db19884626f4b0fa3" title="Round down to nearest page boundary." alt="" coords="1687,687,1804,712"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="1707,637,1785,663"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1545,459,1623,484"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1706,409,1786,435"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1718,459,1774,484"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1381,1320,1471,1345"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1008,991,1156,1029"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1372,1041,1480,1067"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1036,1168,1129,1193"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1546,848,1622,873"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1528,1021,1639,1047"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1539,933,1629,959"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1376,915,1476,940"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1371,763,1480,788"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1215,1269,1313,1295"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1712,736,1780,761"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1044,864,1121,889"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1543,661,1625,687"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1213,611,1314,636"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1207,864,1320,889"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="1390,611,1462,636"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1041,156,1123,181"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1012,405,1152,431"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1024,205,1141,231"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1234,231,1293,256"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1204,156,1323,181"/>
<area shape="rect" href="palloc_8c.html#a135bc426d035b41313b4542adfd2c05f" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="626,839,761,864"/>
<area shape="rect" href="palloc_8c.html#aa8cccdccaa05d4023e3e65c15ed486af" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="459,864,578,889"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="809,661,960,687"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 22 2019 10:19:16 for CS318 - Pintos by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
