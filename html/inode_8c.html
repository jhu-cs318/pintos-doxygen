<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CS318 - Pintos: src/filesys/inode.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CS318 - Pintos
   </div>
   <div id="projectbrief">Pintos source browser for JHU CS318 course</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_462cf8f5a5a6b6c35369e33c5cc1b3e4.html">filesys</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">inode.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="inode_8h_source.html">filesys/inode.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="list_8h_source.html">list.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="debug_8h_source.html">debug.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="round_8h_source.html">round.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="string_8h_source.html">string.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="filesys_8h_source.html">filesys/filesys.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="free-map_8h_source.html">filesys/free-map.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="malloc_8h_source.html">threads/malloc.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for inode.c:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c__incl.png" border="0" usemap="#src_2filesys_2inode_8c" alt=""/></div>
<map name="src_2filesys_2inode_8c" id="src_2filesys_2inode_8c">
<area shape="rect" title=" " alt="" coords="392,5,518,31"/>
<area shape="rect" href="inode_8h.html" title=" " alt="" coords="213,79,319,104"/>
<area shape="rect" href="list_8h.html" title=" " alt="" coords="5,79,54,104"/>
<area shape="rect" href="debug_8h.html" title=" " alt="" coords="648,152,718,177"/>
<area shape="rect" href="round_8h.html" title=" " alt="" coords="738,79,804,104"/>
<area shape="rect" href="string_8h.html" title=" " alt="" coords="492,152,557,177"/>
<area shape="rect" href="filesys_8h.html" title=" " alt="" coords="79,79,189,104"/>
<area shape="rect" href="free-map_8h.html" title=" " alt="" coords="342,79,469,104"/>
<area shape="rect" href="malloc_8h.html" title=" " alt="" coords="543,79,663,104"/>
<area shape="rect" href="stdbool_8h.html" title=" " alt="" coords="207,152,282,177"/>
<area shape="rect" href="off__t_8h.html" title=" " alt="" coords="84,152,183,177"/>
<area shape="rect" href="block_8h.html" title=" " alt="" coords="305,152,418,177"/>
<area shape="rect" href="stdint_8h.html" title=" " alt="" coords="102,299,166,324"/>
<area shape="rect" href="stddef_8h.html" title=" " alt="" coords="421,225,489,251"/>
<area shape="rect" href="inttypes_8h.html" title=" " alt="" coords="245,225,324,251"/>
</map>
</div>
</div>
<p><a href="inode_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structinode__disk.html">inode_disk</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">On-disk inode.  <a href="structinode__disk.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structinode.html">inode</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">In-memory inode.  <a href="structinode.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7145e6f2d09afe5fe2d061c53d248208"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8c.html#a7145e6f2d09afe5fe2d061c53d248208">INODE_MAGIC</a>&#160;&#160;&#160;0x494e4f44</td></tr>
<tr class="memdesc:a7145e6f2d09afe5fe2d061c53d248208"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identifies an inode.  <a href="inode_8c.html#a7145e6f2d09afe5fe2d061c53d248208">More...</a><br /></td></tr>
<tr class="separator:a7145e6f2d09afe5fe2d061c53d248208"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af6294d594eab7d7afccf0d0cefd35a13"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stddef_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8c.html#af6294d594eab7d7afccf0d0cefd35a13">bytes_to_sectors</a> (<a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> size)</td></tr>
<tr class="memdesc:af6294d594eab7d7afccf0d0cefd35a13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of sectors to allocate for an inode SIZE bytes long.  <a href="inode_8c.html#af6294d594eab7d7afccf0d0cefd35a13">More...</a><br /></td></tr>
<tr class="separator:af6294d594eab7d7afccf0d0cefd35a13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b48abdaf996c82819f49d6d8fc4c224"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8c.html#a9b48abdaf996c82819f49d6d8fc4c224">byte_to_sector</a> (const struct <a class="el" href="structinode.html">inode</a> *<a class="el" href="structinode.html">inode</a>, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> pos)</td></tr>
<tr class="memdesc:a9b48abdaf996c82819f49d6d8fc4c224"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the block device sector that contains byte offset POS within INODE.  <a href="inode_8c.html#a9b48abdaf996c82819f49d6d8fc4c224">More...</a><br /></td></tr>
<tr class="separator:a9b48abdaf996c82819f49d6d8fc4c224"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad89ce20702802203535257a453c0290b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8c.html#ad89ce20702802203535257a453c0290b">inode_init</a> (void)</td></tr>
<tr class="memdesc:ad89ce20702802203535257a453c0290b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the inode module.  <a href="inode_8c.html#ad89ce20702802203535257a453c0290b">More...</a><br /></td></tr>
<tr class="separator:ad89ce20702802203535257a453c0290b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa867b845d1fde30169c685397e05ac3f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8c.html#aa867b845d1fde30169c685397e05ac3f">inode_create</a> (<a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a> sector, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> length)</td></tr>
<tr class="memdesc:aa867b845d1fde30169c685397e05ac3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes an inode with LENGTH bytes of data and writes the new inode to sector SECTOR on the file system device.  <a href="inode_8c.html#aa867b845d1fde30169c685397e05ac3f">More...</a><br /></td></tr>
<tr class="separator:aa867b845d1fde30169c685397e05ac3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37507d1ac66a45c81677cbd83039af3a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structinode.html">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8c.html#a37507d1ac66a45c81677cbd83039af3a">inode_open</a> (<a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a> sector)</td></tr>
<tr class="memdesc:a37507d1ac66a45c81677cbd83039af3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads an inode from SECTOR and returns a &lsquo;struct inode&rsquo; that contains it.  <a href="inode_8c.html#a37507d1ac66a45c81677cbd83039af3a">More...</a><br /></td></tr>
<tr class="separator:a37507d1ac66a45c81677cbd83039af3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2314e746f5653780aab519437db1296d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structinode.html">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8c.html#a2314e746f5653780aab519437db1296d">inode_reopen</a> (struct <a class="el" href="structinode.html">inode</a> *<a class="el" href="structinode.html">inode</a>)</td></tr>
<tr class="memdesc:a2314e746f5653780aab519437db1296d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reopens and returns INODE.  <a href="inode_8c.html#a2314e746f5653780aab519437db1296d">More...</a><br /></td></tr>
<tr class="separator:a2314e746f5653780aab519437db1296d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acea0b304a73006889b1b20b0efae2f10"><td class="memItemLeft" align="right" valign="top"><a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8c.html#acea0b304a73006889b1b20b0efae2f10">inode_get_inumber</a> (const struct <a class="el" href="structinode.html">inode</a> *<a class="el" href="structinode.html">inode</a>)</td></tr>
<tr class="memdesc:acea0b304a73006889b1b20b0efae2f10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns INODE's inode number.  <a href="inode_8c.html#acea0b304a73006889b1b20b0efae2f10">More...</a><br /></td></tr>
<tr class="separator:acea0b304a73006889b1b20b0efae2f10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74e1a19b5bcae248617541fe6f2f77c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8c.html#a74e1a19b5bcae248617541fe6f2f77c5">inode_close</a> (struct <a class="el" href="structinode.html">inode</a> *<a class="el" href="structinode.html">inode</a>)</td></tr>
<tr class="memdesc:a74e1a19b5bcae248617541fe6f2f77c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes INODE and writes it to disk.  <a href="inode_8c.html#a74e1a19b5bcae248617541fe6f2f77c5">More...</a><br /></td></tr>
<tr class="separator:a74e1a19b5bcae248617541fe6f2f77c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af37b7ea512c8cb2a43e593b3b2d32ed9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8c.html#af37b7ea512c8cb2a43e593b3b2d32ed9">inode_remove</a> (struct <a class="el" href="structinode.html">inode</a> *<a class="el" href="structinode.html">inode</a>)</td></tr>
<tr class="memdesc:af37b7ea512c8cb2a43e593b3b2d32ed9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks INODE to be deleted when it is closed by the last caller who has it open.  <a href="inode_8c.html#af37b7ea512c8cb2a43e593b3b2d32ed9">More...</a><br /></td></tr>
<tr class="separator:af37b7ea512c8cb2a43e593b3b2d32ed9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31fcd756c686b818d56067b4460bfdb9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8c.html#a31fcd756c686b818d56067b4460bfdb9">inode_read_at</a> (struct <a class="el" href="structinode.html">inode</a> *<a class="el" href="structinode.html">inode</a>, void *buffer_, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> size, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> offset)</td></tr>
<tr class="memdesc:a31fcd756c686b818d56067b4460bfdb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET.  <a href="inode_8c.html#a31fcd756c686b818d56067b4460bfdb9">More...</a><br /></td></tr>
<tr class="separator:a31fcd756c686b818d56067b4460bfdb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09402d2c8d33dc00b2557daa27d944ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8c.html#a09402d2c8d33dc00b2557daa27d944ee">inode_write_at</a> (struct <a class="el" href="structinode.html">inode</a> *<a class="el" href="structinode.html">inode</a>, const void *buffer_, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> size, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> offset)</td></tr>
<tr class="memdesc:a09402d2c8d33dc00b2557daa27d944ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes SIZE bytes from BUFFER into INODE, starting at OFFSET.  <a href="inode_8c.html#a09402d2c8d33dc00b2557daa27d944ee">More...</a><br /></td></tr>
<tr class="separator:a09402d2c8d33dc00b2557daa27d944ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab39a43eb15fff5d8f28df20a8762b290"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8c.html#ab39a43eb15fff5d8f28df20a8762b290">inode_deny_write</a> (struct <a class="el" href="structinode.html">inode</a> *<a class="el" href="structinode.html">inode</a>)</td></tr>
<tr class="memdesc:ab39a43eb15fff5d8f28df20a8762b290"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables writes to INODE.  <a href="inode_8c.html#ab39a43eb15fff5d8f28df20a8762b290">More...</a><br /></td></tr>
<tr class="separator:ab39a43eb15fff5d8f28df20a8762b290"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af980635032a3d7215e955e3aa0e1c902"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8c.html#af980635032a3d7215e955e3aa0e1c902">inode_allow_write</a> (struct <a class="el" href="structinode.html">inode</a> *<a class="el" href="structinode.html">inode</a>)</td></tr>
<tr class="memdesc:af980635032a3d7215e955e3aa0e1c902"><td class="mdescLeft">&#160;</td><td class="mdescRight">Re-enables writes to INODE.  <a href="inode_8c.html#af980635032a3d7215e955e3aa0e1c902">More...</a><br /></td></tr>
<tr class="separator:af980635032a3d7215e955e3aa0e1c902"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67214eb44fb24ef254fca76f9a63fd6d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8c.html#a67214eb44fb24ef254fca76f9a63fd6d">inode_length</a> (const struct <a class="el" href="structinode.html">inode</a> *<a class="el" href="structinode.html">inode</a>)</td></tr>
<tr class="memdesc:a67214eb44fb24ef254fca76f9a63fd6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the length, in bytes, of INODE's data.  <a href="inode_8c.html#a67214eb44fb24ef254fca76f9a63fd6d">More...</a><br /></td></tr>
<tr class="separator:a67214eb44fb24ef254fca76f9a63fd6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af6ed16374bb5b8ec52d2cac452ac21c0"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structlist.html">list</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8c.html#af6ed16374bb5b8ec52d2cac452ac21c0">open_inodes</a></td></tr>
<tr class="memdesc:af6ed16374bb5b8ec52d2cac452ac21c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of open inodes, so that opening a single inode twice returns the same &lsquo;struct inode&rsquo;.  <a href="inode_8c.html#af6ed16374bb5b8ec52d2cac452ac21c0">More...</a><br /></td></tr>
<tr class="separator:af6ed16374bb5b8ec52d2cac452ac21c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7145e6f2d09afe5fe2d061c53d248208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7145e6f2d09afe5fe2d061c53d248208">&#9670;&nbsp;</a></span>INODE_MAGIC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INODE_MAGIC&#160;&#160;&#160;0x494e4f44</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identifies an inode. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00011">11</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9b48abdaf996c82819f49d6d8fc4c224"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b48abdaf996c82819f49d6d8fc4c224">&#9670;&nbsp;</a></span>byte_to_sector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a> byte_to_sector </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the block device sector that contains byte offset POS within INODE. </p>
<p>Returns -1 if INODE does not contain data for a byte at offset POS. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00047">47</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="block_8h_source.html#l00011">BLOCK_SECTOR_SIZE</a>, <a class="el" href="inode_8c_source.html#l00039">inode::data</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, and <a class="el" href="inode_8c_source.html#l00017">inode_disk::start</a>.</p>

<p class="reference">Referenced by <a class="el" href="inode_8c_source.html#l00201">inode_read_at()</a>, and <a class="el" href="inode_8c_source.html#l00258">inode_write_at()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_a9b48abdaf996c82819f49d6d8fc4c224_icgraph.png" border="0" usemap="#inode_8c_a9b48abdaf996c82819f49d6d8fc4c224_icgraph" alt=""/></div>
<map name="inode_8c_a9b48abdaf996c82819f49d6d8fc4c224_icgraph" id="inode_8c_a9b48abdaf996c82819f49d6d8fc4c224_icgraph">
<area shape="rect" title="Returns the block device sector that contains byte offset POS within INODE." alt="" coords="1471,237,1580,263"/>
<area shape="rect" href="inode_8h.html#aeb6be4a6658d5e2746fb704da3d929aa" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="1316,188,1423,213"/>
<area shape="rect" href="inode_8h.html#ad6ee4ad6d1d9ecedb64ec631546f6a9e" title="Writes SIZE bytes from BUFFER into INODE, starting at OFFSET." alt="" coords="1160,313,1268,339"/>
<area shape="rect" href="directory_8h.html#ab1d7741cb8f50c04ee906af9edadba10" title="Adds a file named NAME to DIR, which must not already contain a file by that name." alt="" coords="1033,264,1099,289"/>
<area shape="rect" href="directory_8h.html#a522af6dc93a360056f7391f7bd439f57" title="filesys/directory.h" alt="" coords="1172,112,1257,137"/>
<area shape="rect" href="file_8h.html#a30acfe66c0919f3f37ee17e7cd4c259b" title="Reading and writing." alt="" coords="1030,139,1102,164"/>
<area shape="rect" href="file_8h.html#a58e86db758749dcd35d513dde31d7c9c" title="Reads SIZE bytes from FILE into BUFFER, starting at offset FILE_OFS in the file." alt="" coords="1169,63,1260,88"/>
<area shape="rect" href="directory_8c.html#ab2c71a2a1a0ffa3c618792babf4fc8b9" title="Searches DIR for a file with the given NAME." alt="" coords="1184,264,1245,289"/>
<area shape="rect" href="filesys_8h.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="865,289,968,315"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="715,273,811,299"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="135,191,225,216"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,191,87,216"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="581,5,647,31"/>
<area shape="rect" href="fsutil_8h.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="filesys/fsutil.h" alt="" coords="713,216,814,241"/>
<area shape="rect" href="fsutil_8h.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="726,165,800,191"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="740,112,787,137"/>
<area shape="rect" href="process_8c.html#a2f03f0e1bdd5d41d15c2ea83f0135b7f" title="Loads a segment starting at offset OFS in FILE at address UPAGE." alt="" coords="864,88,969,113"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="564,112,665,137"/>
<area shape="rect" href="process_8h.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="393,112,516,137"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="273,113,345,139"/>
<area shape="rect" href="directory_8h.html#af57fd81b479847465ef2f4848fe0f428" title="Reading and writing." alt="" coords="1025,215,1108,240"/>
<area shape="rect" href="directory_8h.html#a90c0b9ebb330de50b9d9ad5fde4d1676" title="Removes any entry for NAME in DIR." alt="" coords="1022,313,1110,339"/>
<area shape="rect" href="filesys_8h.html#a6dd9e1e66d780ecd7580dabcf72559b4" title="Opens the file with the given NAME." alt="" coords="869,240,964,265"/>
<area shape="rect" href="filesys_8h.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="filesys/filesys.h" alt="" coords="862,339,972,364"/>
<area shape="rect" href="fsutil_8h.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="419,321,490,347"/>
<area shape="rect" href="file_8h.html#aa6b55a3ae90c9bc9718b3a2345d7666d" title="Writes SIZE bytes from BUFFER into FILE, starting at the file&#39;s current position." alt="" coords="880,388,954,413"/>
<area shape="rect" href="file_8h.html#a706816874cad7e4ba737057c35fe253b" title="Writes SIZE bytes from BUFFER into FILE, starting at offset FILE_OFS in the file." alt="" coords="1020,363,1112,388"/>
</map>
</div>

</div>
</div>
<a id="af6294d594eab7d7afccf0d0cefd35a13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6294d594eab7d7afccf0d0cefd35a13">&#9670;&nbsp;</a></span>bytes_to_sectors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stddef_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> bytes_to_sectors </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the number of sectors to allocate for an inode SIZE bytes long. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00026">26</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="block_8h_source.html#l00011">BLOCK_SECTOR_SIZE</a>, and <a class="el" href="round_8h_source.html#l00010">DIV_ROUND_UP</a>.</p>

<p class="reference">Referenced by <a class="el" href="inode_8c_source.html#l00164">inode_close()</a>, and <a class="el" href="inode_8c_source.html#l00073">inode_create()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_af6294d594eab7d7afccf0d0cefd35a13_icgraph.png" border="0" usemap="#inode_8c_af6294d594eab7d7afccf0d0cefd35a13_icgraph" alt=""/></div>
<map name="inode_8c_af6294d594eab7d7afccf0d0cefd35a13_icgraph" id="inode_8c_af6294d594eab7d7afccf0d0cefd35a13_icgraph">
<area shape="rect" title="Returns the number of sectors to allocate for an inode SIZE bytes long." alt="" coords="1532,183,1654,208"/>
<area shape="rect" href="inode_8h.html#a17768b42e21fcfe0e84cfc3532f297d9" title="Closes INODE and writes it to disk." alt="" coords="1391,233,1484,259"/>
<area shape="rect" href="inode_8h.html#a4445b24665d139b5f387bbc6428c9f81" title="Initializes an inode with LENGTH bytes of data and writes the new inode to sector SECTOR on the file ..." alt="" coords="1106,69,1204,95"/>
<area shape="rect" href="directory_8h.html#a972c4f1aef505b8bf976063d2229676a" title="Destroys DIR and frees associated resources." alt="" coords="1118,207,1193,232"/>
<area shape="rect" href="directory_8h.html#a5b00e2da83ce54480d49a91405cb625c" title="Opens and returns the directory for the given INODE, of which it takes ownership." alt="" coords="1262,259,1336,284"/>
<area shape="rect" href="directory_8h.html#a90c0b9ebb330de50b9d9ad5fde4d1676" title="Removes any entry for NAME in DIR." alt="" coords="1255,407,1343,432"/>
<area shape="rect" href="file_8h.html#a11e71f5d8bdfe65c54a1ae9b83c5d67a" title="Closes FILE." alt="" coords="956,356,1033,381"/>
<area shape="rect" href="file_8h.html#a47788113ec3770733f6cc63f00cc5bb3" title="Opening and closing files." alt="" coords="1118,157,1193,183"/>
<area shape="rect" href="filesys_8h.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="943,207,1046,232"/>
<area shape="rect" href="filesys_8h.html#a6dd9e1e66d780ecd7580dabcf72559b4" title="Opens the file with the given NAME." alt="" coords="947,305,1042,331"/>
<area shape="rect" href="filesys_8h.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="filesys/filesys.h" alt="" coords="939,407,1049,432"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="961,256,1027,281"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="779,209,875,235"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="142,309,232,335"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,348,87,373"/>
<area shape="rect" href="fsutil_8h.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="filesys/fsutil.h" alt="" coords="777,309,878,335"/>
<area shape="rect" href="fsutil_8h.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="790,359,864,384"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="804,260,850,285"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="613,259,714,284"/>
<area shape="rect" href="process_8h.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="425,259,547,284"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="291,259,363,284"/>
<area shape="rect" href="fsutil_8h.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="628,460,700,485"/>
<area shape="rect" href="directory_8h.html#a360de0f3a61721d83b1d6f3f435779de" title="Opens the root directory and returns a directory for it." alt="" coords="1103,256,1207,281"/>
<area shape="rect" href="directory_8h.html#a0a9521db17816e1e7b81f30c0e00e980" title="Opens and returns a new directory for the same inode as DIR." alt="" coords="1113,305,1198,331"/>
<area shape="rect" href="free-map_8h.html#ac00d55315a3b01794bcdc6cc9d5ba5f5" title="Writes the free map to disk and closes the free map file." alt="" coords="769,408,885,433"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="623,56,704,81"/>
<area shape="rect" href="filesys_8h.html#aeb7068b9b8e7563972715862ca8106f5" title="Shuts down the file system module, writing any unwritten data to disk." alt="" coords="616,411,711,436"/>
<area shape="rect" href="filesys_8h.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="445,107,528,132"/>
<area shape="rect" href="shutdown_8h.html#a5a3f691cafea75080890d3c921840da7" title="devices/shutdown.h" alt="" coords="414,461,558,487"/>
<area shape="rect" href="shutdown_8h.html#a1c9d5e29ad8899afe0c34571ddee18f9" title="Shuts down the machine in the way configured by shutdown_configure()." alt="" coords="288,461,366,487"/>
<area shape="rect" href="init_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f" title="Prints a kernel command line help message and powers off the machine." alt="" coords="298,511,356,536"/>
<area shape="rect" href="kernel_2debug_8c.html#a0dba4a46c338129ae12e314e07e9fbe3" title="Halts the OS, printing the source file name, line number, and function name, plus a user&#45;specific mes..." alt="" coords="138,461,236,487"/>
<area shape="rect" href="init_8c.html#a598c2f3a0a33552aa203aa847dc265b6" title="Parses options in ARGV[] and returns the first non&#45;option argument." alt="" coords="135,511,240,536"/>
<area shape="rect" href="file_8h.html#a2f1e61c23b36a5ff6cdb36a674669001" title="Opens and returns a new file for the same inode as FILE." alt="" coords="951,157,1038,183"/>
<area shape="rect" href="free-map_8h.html#a928c69cba9ea179d6fe581acd970c512" title="Creates a new free map file on disk and writes the free map to it." alt="" coords="933,56,1055,81"/>
<area shape="rect" href="free-map_8h.html#a82ae69d4b7534829d5c1672231c62370" title="Opens the free map file and reads it from disk." alt="" coords="606,107,721,132"/>
<area shape="rect" href="directory_8h.html#ab3951213f266ce0e0404203a35fefe8f" title="Opening and closing directories." alt="" coords="787,5,868,31"/>
</map>
</div>

</div>
</div>
<a id="af980635032a3d7215e955e3aa0e1c902"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af980635032a3d7215e955e3aa0e1c902">&#9670;&nbsp;</a></span>inode_allow_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inode_allow_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Re-enables writes to INODE. </p>
<p>Must be called once by each inode opener who has called <a class="el" href="inode_8c.html#ab39a43eb15fff5d8f28df20a8762b290" title="Disables writes to INODE.">inode_deny_write()</a> on the inode, before closing the inode. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00333">333</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="inode_8c_source.html#l00038">inode::deny_write_cnt</a>, and <a class="el" href="inode_8c_source.html#l00036">inode::open_cnt</a>.</p>

<p class="reference">Referenced by <a class="el" href="file_8c_source.html#l00133">file_allow_write()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_af980635032a3d7215e955e3aa0e1c902_icgraph.png" border="0" usemap="#inode_8c_af980635032a3d7215e955e3aa0e1c902_icgraph" alt=""/></div>
<map name="inode_8c_af980635032a3d7215e955e3aa0e1c902_icgraph" id="inode_8c_af980635032a3d7215e955e3aa0e1c902_icgraph">
<area shape="rect" title="Re&#45;enables writes to INODE." alt="" coords="1205,200,1332,225"/>
<area shape="rect" href="file_8h.html#ae6c27a2463c63a74d97ca503385174cb" title="Re&#45;enables write operations on FILE&#39;s underlying inode." alt="" coords="1045,200,1157,225"/>
<area shape="rect" href="file_8h.html#a11e71f5d8bdfe65c54a1ae9b83c5d67a" title="Closes FILE." alt="" coords="920,200,997,225"/>
<area shape="rect" href="free-map_8h.html#ac00d55315a3b01794bcdc6cc9d5ba5f5" title="Writes the free map to disk and closes the free map file." alt="" coords="756,75,872,100"/>
<area shape="rect" href="fsutil_8h.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="filesys/fsutil.h" alt="" coords="607,149,707,175"/>
<area shape="rect" href="fsutil_8h.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="449,200,523,225"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="766,251,862,276"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="791,300,837,325"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="616,19,698,44"/>
<area shape="rect" href="filesys_8h.html#aeb7068b9b8e7563972715862ca8106f5" title="Shuts down the file system module, writing any unwritten data to disk." alt="" coords="609,75,705,100"/>
<area shape="rect" href="filesys_8h.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="445,5,528,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,100,87,125"/>
<area shape="rect" href="shutdown_8h.html#a5a3f691cafea75080890d3c921840da7" title="devices/shutdown.h" alt="" coords="414,75,558,100"/>
<area shape="rect" href="shutdown_8h.html#a1c9d5e29ad8899afe0c34571ddee18f9" title="Shuts down the machine in the way configured by shutdown_configure()." alt="" coords="288,49,366,75"/>
<area shape="rect" href="init_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f" title="Prints a kernel command line help message and powers off the machine." alt="" coords="298,99,356,124"/>
<area shape="rect" href="kernel_2debug_8c.html#a0dba4a46c338129ae12e314e07e9fbe3" title="Halts the OS, printing the source file name, line number, and function name, plus a user&#45;specific mes..." alt="" coords="138,100,236,125"/>
<area shape="rect" href="init_8c.html#a598c2f3a0a33552aa203aa847dc265b6" title="Parses options in ARGV[] and returns the first non&#45;option argument." alt="" coords="135,149,240,175"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="142,200,232,225"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="606,301,708,327"/>
<area shape="rect" href="process_8h.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="425,301,547,327"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="291,301,363,327"/>
</map>
</div>

</div>
</div>
<a id="a74e1a19b5bcae248617541fe6f2f77c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74e1a19b5bcae248617541fe6f2f77c5">&#9670;&nbsp;</a></span>inode_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inode_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes INODE and writes it to disk. </p>
<p>If this was the last reference to INODE, frees its memory. If INODE was also a removed inode, frees its blocks. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00164">164</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="inode_8c_source.html#l00026">bytes_to_sectors()</a>, <a class="el" href="inode_8c_source.html#l00039">inode::data</a>, <a class="el" href="inode_8c_source.html#l00034">inode::elem</a>, <a class="el" href="malloc_8c_source.html#l00219">free()</a>, <a class="el" href="free-map_8c_source.html#l00045">free_map_release()</a>, <a class="el" href="inode_8c_source.html#l00018">inode_disk::length</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00249">list_remove()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="inode_8c_source.html#l00036">inode::open_cnt</a>, <a class="el" href="inode_8c_source.html#l00037">inode::removed</a>, <a class="el" href="inode_8c_source.html#l00035">inode::sector</a>, and <a class="el" href="inode_8c_source.html#l00017">inode_disk::start</a>.</p>

<p class="reference">Referenced by <a class="el" href="directory_8c_source.html#l00070">dir_close()</a>, <a class="el" href="directory_8c_source.html#l00035">dir_open()</a>, <a class="el" href="directory_8c_source.html#l00185">dir_remove()</a>, <a class="el" href="file_8c_source.html#l00046">file_close()</a>, and <a class="el" href="file_8c_source.html#l00018">file_open()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_a74e1a19b5bcae248617541fe6f2f77c5_cgraph.png" border="0" usemap="#inode_8c_a74e1a19b5bcae248617541fe6f2f77c5_cgraph" alt=""/></div>
<map name="inode_8c_a74e1a19b5bcae248617541fe6f2f77c5_cgraph" id="inode_8c_a74e1a19b5bcae248617541fe6f2f77c5_cgraph">
<area shape="rect" title="Closes INODE and writes it to disk." alt="" coords="5,299,98,325"/>
<area shape="rect" href="inode_8c.html#af6294d594eab7d7afccf0d0cefd35a13" title="Returns the number of sectors to allocate for an inode SIZE bytes long." alt="" coords="146,223,268,249"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="185,325,229,350"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="886,438,976,463"/>
<area shape="rect" href="free-map_8c.html#a65586c8713124a199b6db7397c1aba6f" title="Makes CNT sectors starting at SECTOR available for use." alt="" coords="493,274,622,299"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="322,375,434,401"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="501,43,614,69"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="877,386,985,411"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="509,943,606,969"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="330,653,426,678"/>
<area shape="rect" href="string_8c.html#ab1e7a2e7d71d61a771b43da7c18fdba6" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="715,194,784,219"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="488,158,628,183"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="316,122,440,147"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="719,43,780,69"/>
<area shape="rect" href="vaddr_8h.html#a5a07aa5a4d70694db19884626f4b0fa3" title="Round down to nearest page boundary." alt="" coords="1353,451,1470,477"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="1211,513,1288,538"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1053,386,1131,411"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1210,437,1289,462"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1222,386,1277,411"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1204,1070,1295,1095"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="676,881,824,919"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1038,845,1146,870"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="703,943,796,969"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1212,819,1288,845"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1194,869,1305,894"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1047,791,1137,817"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="881,791,981,817"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="876,589,986,614"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="882,1045,980,1070"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1199,931,1300,957"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1048,943,1136,969"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1216,575,1283,601"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1055,894,1129,919"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="519,653,596,678"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1051,538,1133,563"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="699,527,800,553"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="693,653,806,678"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="895,487,967,513"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="709,293,791,318"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="680,243,820,269"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="691,93,808,118"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="902,142,960,167"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="872,293,990,318"/>
<area shape="rect" href="bitmap_8c.html#ab8d6660c5e30dab9cecef1240c7423d9" title="Returns the value of the bit numbered IDX in B." alt="" coords="1047,293,1137,318"/>
<area shape="rect" href="bitmap_8c.html#acc12f810fdb7b50a620c3852c3656d63" title="Returns an elem_type where only the bit corresponding to BIT_IDX is turned on." alt="" coords="1212,219,1287,245"/>
<area shape="rect" href="bitmap_8c.html#abb94f95006e0ec6ff6b5c88262f28d74" title="Returns the index of the element that contains the bit numbered BIT_IDX." alt="" coords="1212,269,1287,294"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="888,243,974,269"/>
<area shape="rect" href="bitmap_8c.html#adb8912537854d4a2dcb1f35940a7134b" title="Atomically sets the bit numbered BIT_IDX in B to true." alt="" coords="1043,194,1141,219"/>
<area shape="rect" href="bitmap_8c.html#a5bb6be898ca442c95e725be80c2369a6" title="Atomically sets the bit numbered BIT_IDX in B to false." alt="" coords="1043,243,1141,269"/>
<area shape="rect" href="bitmap_8c.html#a576f7d29f091eac024f70ae8d68997a9" title="Bitmap size." alt="" coords="885,93,977,118"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_a74e1a19b5bcae248617541fe6f2f77c5_icgraph.png" border="0" usemap="#inode_8c_a74e1a19b5bcae248617541fe6f2f77c5_icgraph" alt=""/></div>
<map name="inode_8c_a74e1a19b5bcae248617541fe6f2f77c5_icgraph" id="inode_8c_a74e1a19b5bcae248617541fe6f2f77c5_icgraph">
<area shape="rect" title="Closes INODE and writes it to disk." alt="" coords="1385,221,1478,246"/>
<area shape="rect" href="directory_8h.html#a972c4f1aef505b8bf976063d2229676a" title="Destroys DIR and frees associated resources." alt="" coords="1112,71,1187,97"/>
<area shape="rect" href="directory_8h.html#a5b00e2da83ce54480d49a91405cb625c" title="Opens and returns the directory for the given INODE, of which it takes ownership." alt="" coords="1257,170,1330,195"/>
<area shape="rect" href="directory_8h.html#a90c0b9ebb330de50b9d9ad5fde4d1676" title="Removes any entry for NAME in DIR." alt="" coords="1249,221,1337,246"/>
<area shape="rect" href="file_8h.html#a11e71f5d8bdfe65c54a1ae9b83c5d67a" title="Closes FILE." alt="" coords="956,221,1033,246"/>
<area shape="rect" href="file_8h.html#a47788113ec3770733f6cc63f00cc5bb3" title="Opening and closing files." alt="" coords="1112,345,1187,370"/>
<area shape="rect" href="filesys_8h.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="943,71,1046,97"/>
<area shape="rect" href="filesys_8h.html#a6dd9e1e66d780ecd7580dabcf72559b4" title="Opens the file with the given NAME." alt="" coords="947,170,1042,195"/>
<area shape="rect" href="filesys_8h.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="filesys/filesys.h" alt="" coords="939,121,1049,146"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="961,22,1027,47"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="782,95,878,121"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="142,145,232,170"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,270,87,295"/>
<area shape="rect" href="fsutil_8h.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="filesys/fsutil.h" alt="" coords="780,195,880,221"/>
<area shape="rect" href="fsutil_8h.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="793,245,867,270"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="807,146,853,171"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="613,145,714,170"/>
<area shape="rect" href="process_8h.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="425,145,547,170"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="291,145,363,170"/>
<area shape="rect" href="fsutil_8h.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="628,43,700,69"/>
<area shape="rect" href="directory_8h.html#a360de0f3a61721d83b1d6f3f435779de" title="Opens the root directory and returns a directory for it." alt="" coords="1097,121,1201,146"/>
<area shape="rect" href="directory_8h.html#a0a9521db17816e1e7b81f30c0e00e980" title="Opens and returns a new directory for the same inode as DIR." alt="" coords="1107,170,1192,195"/>
<area shape="rect" href="free-map_8h.html#ac00d55315a3b01794bcdc6cc9d5ba5f5" title="Writes the free map to disk and closes the free map file." alt="" coords="772,295,888,321"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="623,346,704,371"/>
<area shape="rect" href="filesys_8h.html#aeb7068b9b8e7563972715862ca8106f5" title="Shuts down the file system module, writing any unwritten data to disk." alt="" coords="616,297,711,322"/>
<area shape="rect" href="filesys_8h.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="445,395,528,421"/>
<area shape="rect" href="shutdown_8h.html#a5a3f691cafea75080890d3c921840da7" title="devices/shutdown.h" alt="" coords="414,297,558,322"/>
<area shape="rect" href="shutdown_8h.html#a1c9d5e29ad8899afe0c34571ddee18f9" title="Shuts down the machine in the way configured by shutdown_configure()." alt="" coords="288,346,366,371"/>
<area shape="rect" href="init_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f" title="Prints a kernel command line help message and powers off the machine." alt="" coords="298,297,356,322"/>
<area shape="rect" href="kernel_2debug_8c.html#a0dba4a46c338129ae12e314e07e9fbe3" title="Halts the OS, printing the source file name, line number, and function name, plus a user&#45;specific mes..." alt="" coords="138,346,236,371"/>
<area shape="rect" href="init_8c.html#a598c2f3a0a33552aa203aa847dc265b6" title="Parses options in ARGV[] and returns the first non&#45;option argument." alt="" coords="135,245,240,270"/>
<area shape="rect" href="file_8h.html#a2f1e61c23b36a5ff6cdb36a674669001" title="Opens and returns a new file for the same inode as FILE." alt="" coords="951,446,1038,471"/>
<area shape="rect" href="free-map_8h.html#a928c69cba9ea179d6fe581acd970c512" title="Creates a new free map file on disk and writes the free map to it." alt="" coords="769,345,891,370"/>
<area shape="rect" href="free-map_8h.html#a82ae69d4b7534829d5c1672231c62370" title="Opens the free map file and reads it from disk." alt="" coords="606,395,721,421"/>
</map>
</div>

</div>
</div>
<a id="aa867b845d1fde30169c685397e05ac3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa867b845d1fde30169c685397e05ac3f">&#9670;&nbsp;</a></span>inode_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> inode_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a>&#160;</td>
          <td class="paramname"><em>sector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes an inode with LENGTH bytes of data and writes the new inode to sector SECTOR on the file system device. </p>
<p>Returns true if successful. Returns false if memory or disk allocation fails. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00073">73</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="block_8h_source.html#l00011">BLOCK_SECTOR_SIZE</a>, <a class="el" href="block_8c_source.html#l00134">block_write()</a>, <a class="el" href="inode_8c_source.html#l00026">bytes_to_sectors()</a>, <a class="el" href="malloc_8c_source.html#l00159">calloc()</a>, <a class="el" href="malloc_8c_source.html#l00219">free()</a>, <a class="el" href="free-map_8c_source.html#l00028">free_map_allocate()</a>, <a class="el" href="filesys_8c_source.html#l00011">fs_device</a>, <a class="el" href="inode_8c_source.html#l00011">INODE_MAGIC</a>, <a class="el" href="inode_8c_source.html#l00018">inode_disk::length</a>, <a class="el" href="inode_8c_source.html#l00019">inode_disk::magic</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, and <a class="el" href="inode_8c_source.html#l00017">inode_disk::start</a>.</p>

<p class="reference">Referenced by <a class="el" href="directory_8c_source.html#l00027">dir_create()</a>, <a class="el" href="filesys_8c_source.html#l00046">filesys_create()</a>, and <a class="el" href="free-map_8c_source.html#l00073">free_map_create()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_aa867b845d1fde30169c685397e05ac3f_cgraph.png" border="0" usemap="#inode_8c_aa867b845d1fde30169c685397e05ac3f_cgraph" alt=""/></div>
<map name="inode_8c_aa867b845d1fde30169c685397e05ac3f_cgraph" id="inode_8c_aa867b845d1fde30169c685397e05ac3f_cgraph">
<area shape="rect" title="Initializes an inode with LENGTH bytes of data and writes the new inode to sector SECTOR on the file ..." alt="" coords="5,815,104,840"/>
<area shape="rect" href="block_8c.html#ab7e44f7861385a5c4630d899a469f9d4" title="Write sector SECTOR to BLOCK from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="169,616,257,641"/>
<area shape="rect" href="inode_8c.html#af6294d594eab7d7afccf0d0cefd35a13" title="Returns the number of sectors to allocate for an inode SIZE bytes long." alt="" coords="152,765,274,791"/>
<area shape="rect" href="malloc_8c.html#a2b87cd3f63698b243dddb141a4c1e72a" title="Allocates and return A times B bytes initialized to zeroes." alt="" coords="185,815,241,840"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="507,865,552,891"/>
<area shape="rect" href="free-map_8c.html#a9cce17fe18443be5a61dbdf40c10e03a" title="Allocates CNT consecutive sectors from the free map and stores the first into *SECTORP." alt="" coords="639,1216,770,1241"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="322,235,422,260"/>
<area shape="rect" href="block_8c.html#a805c68661c9837f08b82b27fb82b9f94" title="Returns BLOCK&#39;s name (e.g." alt="" coords="483,5,576,31"/>
<area shape="rect" href="malloc_8c.html#a7ac38fce3243a7dcf448301ee9ffd392" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="342,539,402,564"/>
<area shape="rect" href="string_8c.html#ab1e7a2e7d71d61a771b43da7c18fdba6" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1059,865,1128,891"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="648,664,761,689"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="648,713,761,739"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1554,257,1636,283"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1224,359,1325,384"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1382,409,1492,435"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="848,663,944,688"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="848,460,944,485"/>
<area shape="rect" href="palloc_8c.html#a135bc426d035b41313b4542adfd2c05f" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="637,615,772,640"/>
<area shape="rect" href="palloc_8c.html#aa8cccdccaa05d4023e3e65c15ed486af" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="470,615,589,640"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1063,1017,1124,1043"/>
<area shape="rect" href="vaddr_8h.html#a5a07aa5a4d70694db19884626f4b0fa3" title="Round down to nearest page boundary." alt="" coords="1699,587,1816,612"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="1718,469,1796,495"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1723,321,1791,347"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="1401,257,1473,283"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1392,729,1482,755"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1718,731,1797,756"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1556,780,1634,805"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1729,780,1785,805"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1392,801,1482,827"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1020,656,1168,695"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1383,660,1491,685"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1047,607,1140,632"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1557,523,1633,548"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1540,653,1651,679"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1550,308,1640,333"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1387,208,1487,233"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1226,713,1324,739"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1055,257,1132,283"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1219,309,1331,335"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="820,1216,972,1241"/>
<area shape="rect" href="bitmap_8c.html#a88a9127abe8322926d25de46140b778a" title="Finding set or unset bits." alt="" coords="1045,1217,1142,1243"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1024,1267,1164,1292"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1216,1192,1334,1217"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1232,1267,1318,1292"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1383,851,1491,876"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="826,1067,966,1092"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="643,1017,767,1043"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1052,1168,1135,1193"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1035,1067,1152,1092"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1246,1092,1304,1117"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_aa867b845d1fde30169c685397e05ac3f_icgraph.png" border="0" usemap="#inode_8c_aa867b845d1fde30169c685397e05ac3f_icgraph" alt=""/></div>
<map name="inode_8c_aa867b845d1fde30169c685397e05ac3f_icgraph" id="inode_8c_aa867b845d1fde30169c685397e05ac3f_icgraph">
<area shape="rect" title="Initializes an inode with LENGTH bytes of data and writes the new inode to sector SECTOR on the file ..." alt="" coords="587,55,686,80"/>
<area shape="rect" href="directory_8h.html#ab3951213f266ce0e0404203a35fefe8f" title="Opening and closing directories." alt="" coords="438,5,519,31"/>
<area shape="rect" href="filesys_8h.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="427,104,530,129"/>
<area shape="rect" href="free-map_8h.html#a928c69cba9ea179d6fe581acd970c512" title="Creates a new free map file on disk and writes the free map to it." alt="" coords="417,55,539,80"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="280,55,362,80"/>
<area shape="rect" href="filesys_8h.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="138,55,221,80"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,80,87,105"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="273,104,369,129"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="135,104,225,129"/>
</map>
</div>

</div>
</div>
<a id="ab39a43eb15fff5d8f28df20a8762b290"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab39a43eb15fff5d8f28df20a8762b290">&#9670;&nbsp;</a></span>inode_deny_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inode_deny_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables writes to INODE. </p>
<p>May be called at most once per inode opener. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00323">323</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="inode_8c_source.html#l00038">inode::deny_write_cnt</a>, and <a class="el" href="inode_8c_source.html#l00036">inode::open_cnt</a>.</p>

<p class="reference">Referenced by <a class="el" href="file_8c_source.html#l00119">file_deny_write()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_ab39a43eb15fff5d8f28df20a8762b290_icgraph.png" border="0" usemap="#inode_8c_ab39a43eb15fff5d8f28df20a8762b290_icgraph" alt=""/></div>
<map name="inode_8c_ab39a43eb15fff5d8f28df20a8762b290_icgraph" id="inode_8c_ab39a43eb15fff5d8f28df20a8762b290_icgraph">
<area shape="rect" title="Disables writes to INODE." alt="" coords="164,5,289,31"/>
<area shape="rect" href="file_8h.html#ab5b8481ed54da3aa06ba214e827b8483" title="Preventing writes." alt="" coords="5,5,116,31"/>
</map>
</div>

</div>
</div>
<a id="acea0b304a73006889b1b20b0efae2f10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acea0b304a73006889b1b20b0efae2f10">&#9670;&nbsp;</a></span>inode_get_inumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a> inode_get_inumber </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns INODE's inode number. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00155">155</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="inode_8c_source.html#l00035">inode::sector</a>.</p>

</div>
</div>
<a id="ad89ce20702802203535257a453c0290b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad89ce20702802203535257a453c0290b">&#9670;&nbsp;</a></span>inode_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inode_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the inode module. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00062">62</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="lib_2kernel_2list_8c_source.html#l00061">list_init()</a>, and <a class="el" href="inode_8c_source.html#l00058">open_inodes</a>.</p>

<p class="reference">Referenced by <a class="el" href="filesys_8c_source.html#l00018">filesys_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_ad89ce20702802203535257a453c0290b_cgraph.png" border="0" usemap="#inode_8c_ad89ce20702802203535257a453c0290b_cgraph" alt=""/></div>
<map name="inode_8c_ad89ce20702802203535257a453c0290b_cgraph" id="inode_8c_ad89ce20702802203535257a453c0290b_cgraph">
<area shape="rect" title="Initializes the inode module." alt="" coords="5,5,84,31"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a8aa862d10f52f7b0348fce990c7c12db" title="Initializes LIST as an empty list." alt="" coords="132,5,194,31"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_ad89ce20702802203535257a453c0290b_icgraph.png" border="0" usemap="#inode_8c_ad89ce20702802203535257a453c0290b_icgraph" alt=""/></div>
<map name="inode_8c_ad89ce20702802203535257a453c0290b_icgraph" id="inode_8c_ad89ce20702802203535257a453c0290b_icgraph">
<area shape="rect" title="Initializes the inode module." alt="" coords="266,5,344,31"/>
<area shape="rect" href="filesys_8h.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="135,5,218,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
</map>
</div>

</div>
</div>
<a id="a67214eb44fb24ef254fca76f9a63fd6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67214eb44fb24ef254fca76f9a63fd6d">&#9670;&nbsp;</a></span>inode_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> inode_length </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the length, in bytes, of INODE's data. </p>
<p><a class="el" href="inode_8h.html">filesys/inode.h</a> </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00342">342</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="inode_8c_source.html#l00039">inode::data</a>, and <a class="el" href="inode_8c_source.html#l00018">inode_disk::length</a>.</p>

<p class="reference">Referenced by <a class="el" href="file_8c_source.html#l00145">file_length()</a>, <a class="el" href="inode_8c_source.html#l00201">inode_read_at()</a>, and <a class="el" href="inode_8c_source.html#l00258">inode_write_at()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_a67214eb44fb24ef254fca76f9a63fd6d_icgraph.png" border="0" usemap="#inode_8c_a67214eb44fb24ef254fca76f9a63fd6d_icgraph" alt=""/></div>
<map name="inode_8c_a67214eb44fb24ef254fca76f9a63fd6d_icgraph" id="inode_8c_a67214eb44fb24ef254fca76f9a63fd6d_icgraph">
<area shape="rect" title="Returns the length, in bytes, of INODE&#39;s data." alt="" coords="1487,247,1584,272"/>
<area shape="rect" href="file_8h.html#a4b5dd65f3cf42de1f93fa80b5f6d136b" title="filesys/file.h" alt="" coords="1041,69,1123,95"/>
<area shape="rect" href="inode_8h.html#aeb6be4a6658d5e2746fb704da3d929aa" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="1332,247,1439,272"/>
<area shape="rect" href="inode_8h.html#ad6ee4ad6d1d9ecedb64ec631546f6a9e" title="Writes SIZE bytes from BUFFER into INODE, starting at OFFSET." alt="" coords="1176,399,1284,424"/>
<area shape="rect" href="fsutil_8h.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="filesys/fsutil.h" alt="" coords="713,157,814,183"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="740,240,787,265"/>
<area shape="rect" href="process_8c.html#a6791a2f8c763395aef1dff4c8409550b" title="Checks whether PHDR describes a valid, loadable segment in FILE and returns true if so,..." alt="" coords="862,95,987,120"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="135,265,225,291"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,265,87,291"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="564,240,665,265"/>
<area shape="rect" href="process_8h.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="393,240,516,265"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="273,240,345,265"/>
<area shape="rect" href="directory_8h.html#ab1d7741cb8f50c04ee906af9edadba10" title="Adds a file named NAME to DIR, which must not already contain a file by that name." alt="" coords="1049,348,1115,373"/>
<area shape="rect" href="directory_8h.html#a522af6dc93a360056f7391f7bd439f57" title="filesys/directory.h" alt="" coords="1187,5,1272,31"/>
<area shape="rect" href="file_8h.html#a30acfe66c0919f3f37ee17e7cd4c259b" title="Reading and writing." alt="" coords="1045,247,1118,272"/>
<area shape="rect" href="file_8h.html#a58e86db758749dcd35d513dde31d7c9c" title="Reads SIZE bytes from FILE into BUFFER, starting at offset FILE_OFS in the file." alt="" coords="1184,196,1275,221"/>
<area shape="rect" href="directory_8c.html#ab2c71a2a1a0ffa3c618792babf4fc8b9" title="Searches DIR for a file with the given NAME." alt="" coords="1200,297,1260,323"/>
<area shape="rect" href="filesys_8h.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="873,399,976,424"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="715,373,811,399"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="581,37,647,63"/>
<area shape="rect" href="fsutil_8h.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="726,297,800,323"/>
<area shape="rect" href="process_8c.html#a2f03f0e1bdd5d41d15c2ea83f0135b7f" title="Loads a segment starting at offset OFS in FILE at address UPAGE." alt="" coords="872,196,977,221"/>
<area shape="rect" href="directory_8h.html#af57fd81b479847465ef2f4848fe0f428" title="Reading and writing." alt="" coords="1040,297,1123,323"/>
<area shape="rect" href="directory_8h.html#a90c0b9ebb330de50b9d9ad5fde4d1676" title="Removes any entry for NAME in DIR." alt="" coords="1038,397,1126,423"/>
<area shape="rect" href="filesys_8h.html#a6dd9e1e66d780ecd7580dabcf72559b4" title="Opens the file with the given NAME." alt="" coords="877,297,972,323"/>
<area shape="rect" href="filesys_8h.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="filesys/filesys.h" alt="" coords="869,497,980,523"/>
<area shape="rect" href="fsutil_8h.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="419,424,490,449"/>
<area shape="rect" href="file_8h.html#aa6b55a3ae90c9bc9718b3a2345d7666d" title="Writes SIZE bytes from BUFFER into FILE, starting at the file&#39;s current position." alt="" coords="888,448,961,473"/>
<area shape="rect" href="file_8h.html#a706816874cad7e4ba737057c35fe253b" title="Writes SIZE bytes from BUFFER into FILE, starting at offset FILE_OFS in the file." alt="" coords="1035,499,1128,524"/>
</map>
</div>

</div>
</div>
<a id="a37507d1ac66a45c81677cbd83039af3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37507d1ac66a45c81677cbd83039af3a">&#9670;&nbsp;</a></span>inode_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a>* inode_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a>&#160;</td>
          <td class="paramname"><em>sector</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads an inode from SECTOR and returns a &lsquo;struct inode&rsquo; that contains it. </p>
<p>Returns a null pointer if memory allocation fails. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00112">112</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="block_8c_source.html#l00121">block_read()</a>, <a class="el" href="inode_8c_source.html#l00039">inode::data</a>, <a class="el" href="inode_8c_source.html#l00038">inode::deny_write_cnt</a>, <a class="el" href="inode_8c_source.html#l00034">inode::elem</a>, <a class="el" href="filesys_8c_source.html#l00011">fs_device</a>, <a class="el" href="inode_8c_source.html#l00146">inode_reopen()</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00072">list_begin()</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00094">list_end()</a>, <a class="el" href="list_8h_source.html#l00108">list_entry</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00082">list_next()</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00209">list_push_front()</a>, <a class="el" href="malloc_8c_source.html#l00090">malloc()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="inode_8c_source.html#l00036">inode::open_cnt</a>, <a class="el" href="inode_8c_source.html#l00058">open_inodes</a>, <a class="el" href="inode_8c_source.html#l00037">inode::removed</a>, and <a class="el" href="inode_8c_source.html#l00035">inode::sector</a>.</p>

<p class="reference">Referenced by <a class="el" href="directory_8c_source.html#l00119">dir_lookup()</a>, <a class="el" href="directory_8c_source.html#l00055">dir_open_root()</a>, <a class="el" href="directory_8c_source.html#l00185">dir_remove()</a>, <a class="el" href="free-map_8c_source.html#l00073">free_map_create()</a>, and <a class="el" href="free-map_8c_source.html#l00054">free_map_open()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_a37507d1ac66a45c81677cbd83039af3a_cgraph.png" border="0" usemap="#inode_8c_a37507d1ac66a45c81677cbd83039af3a_cgraph" alt=""/></div>
<map name="inode_8c_a37507d1ac66a45c81677cbd83039af3a_cgraph" id="inode_8c_a37507d1ac66a45c81677cbd83039af3a_cgraph">
<area shape="rect" title="Reads an inode from SECTOR and returns a ‘struct inode’ that contains it." alt="" coords="5,181,96,207"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="153,5,239,31"/>
<area shape="rect" href="inode_8c.html#a2314e746f5653780aab519437db1296d" title="Reopens and returns INODE." alt="" coords="144,55,247,80"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="1982,156,2060,181"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1987,612,2054,637"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb3307f0f8fb717f84cf74110d59196a" title="Returns the element after ELEM in its list." alt="" coords="161,181,231,207"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1208,257,1316,283"/>
<area shape="rect" href="malloc_8c.html#a7ac38fce3243a7dcf448301ee9ffd392" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="166,737,226,763"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="305,5,405,31"/>
<area shape="rect" href="block_8c.html#a805c68661c9837f08b82b27fb82b9f94" title="Returns BLOCK&#39;s name (e.g." alt="" coords="484,5,577,31"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#aee78fb1351519ad20686f6eaf9018b4c" title="Returns true if ELEM is a head, false otherwise." alt="" coords="321,207,389,232"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1854,257,1933,283"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1395,257,1472,283"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1581,308,1636,333"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="299,763,411,788"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="299,1132,411,1157"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1852,485,1934,511"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1558,460,1659,485"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1207,561,1317,587"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="673,968,770,993"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="673,863,770,888"/>
<area shape="rect" href="palloc_8c.html#a135bc426d035b41313b4542adfd2c05f" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="462,812,598,837"/>
<area shape="rect" href="palloc_8c.html#aa8cccdccaa05d4023e3e65c15ed486af" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="295,812,414,837"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="500,1132,561,1157"/>
<area shape="rect" href="vaddr_8h.html#a5a07aa5a4d70694db19884626f4b0fa3" title="Round down to nearest page boundary." alt="" coords="1550,1167,1667,1192"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="1724,460,1796,485"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1715,409,1804,435"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1563,1065,1654,1091"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="845,989,993,1028"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1208,1065,1316,1091"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="872,940,966,965"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1395,964,1472,989"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1378,1065,1489,1091"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1389,663,1478,688"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1212,713,1312,739"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1051,965,1149,991"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1558,739,1659,764"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1390,764,1477,789"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1225,916,1300,941"/>
<area shape="rect" href="intq_8c.html#ac473f50d2829cba1321d34a57c425042" title="Returns the position after POS within an intq." alt="" coords="1410,915,1457,940"/>
<area shape="rect" href="thread_8c.html#ace7a46dcf0f5c9c4cbb8f47a5b3c76f5" title="Chooses and returns the next thread to be scheduled." alt="" coords="1365,561,1502,587"/>
<area shape="rect" href="switch_8h.html#aa804e4fa090f4acb6a73b98f64b81cff" title="Switches from CUR, which must be the running thread, to NEXT, which must also be running switch_threa..." alt="" coords="1378,865,1489,891"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="881,612,957,637"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1044,663,1157,688"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="646,764,797,789"/>
<area shape="rect" href="string_8c.html#ab1e7a2e7d71d61a771b43da7c18fdba6" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="687,813,756,839"/>
<area shape="rect" href="bitmap_8c.html#a88a9127abe8322926d25de46140b778a" title="Finding set or unset bits." alt="" coords="871,764,967,789"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="849,813,989,839"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1041,764,1159,789"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1057,813,1144,839"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_a37507d1ac66a45c81677cbd83039af3a_icgraph.png" border="0" usemap="#inode_8c_a37507d1ac66a45c81677cbd83039af3a_icgraph" alt=""/></div>
<map name="inode_8c_a37507d1ac66a45c81677cbd83039af3a_icgraph" id="inode_8c_a37507d1ac66a45c81677cbd83039af3a_icgraph">
<area shape="rect" title="Reads an inode from SECTOR and returns a ‘struct inode’ that contains it." alt="" coords="1186,259,1277,284"/>
<area shape="rect" href="directory_8h.html#af57fd81b479847465ef2f4848fe0f428" title="Reading and writing." alt="" coords="1035,133,1118,159"/>
<area shape="rect" href="directory_8h.html#a360de0f3a61721d83b1d6f3f435779de" title="Opens the root directory and returns a directory for it." alt="" coords="1025,208,1128,233"/>
<area shape="rect" href="directory_8h.html#a90c0b9ebb330de50b9d9ad5fde4d1676" title="Removes any entry for NAME in DIR." alt="" coords="1032,259,1120,284"/>
<area shape="rect" href="free-map_8h.html#a928c69cba9ea179d6fe581acd970c512" title="Creates a new free map file on disk and writes the free map to it." alt="" coords="1015,308,1138,333"/>
<area shape="rect" href="free-map_8h.html#a82ae69d4b7534829d5c1672231c62370" title="Opens the free map file and reads it from disk." alt="" coords="1019,357,1134,383"/>
<area shape="rect" href="filesys_8h.html#a6dd9e1e66d780ecd7580dabcf72559b4" title="Opens the file with the given NAME." alt="" coords="865,107,960,132"/>
<area shape="rect" href="fsutil_8h.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="filesys/fsutil.h" alt="" coords="564,56,665,81"/>
<area shape="rect" href="fsutil_8h.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="418,107,491,132"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="713,157,809,183"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="738,5,784,31"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="135,157,225,183"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,233,87,259"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="564,5,665,31"/>
<area shape="rect" href="process_8h.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="393,5,516,31"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="273,5,345,31"/>
<area shape="rect" href="filesys_8h.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="861,157,964,183"/>
<area shape="rect" href="filesys_8h.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="filesys/filesys.h" alt="" coords="857,259,967,284"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="581,208,647,233"/>
<area shape="rect" href="fsutil_8h.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="273,259,345,284"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="872,308,953,333"/>
<area shape="rect" href="filesys_8h.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="720,309,802,335"/>
</map>
</div>

</div>
</div>
<a id="a31fcd756c686b818d56067b4460bfdb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31fcd756c686b818d56067b4460bfdb9">&#9670;&nbsp;</a></span>inode_read_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> inode_read_at </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET. </p>
<p>Returns the number of bytes actually read, which may be less than SIZE if an error occurs or end of file is reached. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00201">201</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="block_8c_source.html#l00121">block_read()</a>, <a class="el" href="block_8h_source.html#l00011">BLOCK_SECTOR_SIZE</a>, <a class="el" href="input_8c_source.html#l00007">buffer</a>, <a class="el" href="inode_8c_source.html#l00047">byte_to_sector()</a>, <a class="el" href="malloc_8c_source.html#l00219">free()</a>, <a class="el" href="filesys_8c_source.html#l00011">fs_device</a>, <a class="el" href="inode_8c_source.html#l00342">inode_length()</a>, <a class="el" href="malloc_8c_source.html#l00090">malloc()</a>, <a class="el" href="string_8c_source.html#l00007">memcpy()</a>, and <a class="el" href="stddef_8h_source.html#l00004">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="directory_8c_source.html#l00142">dir_add()</a>, <a class="el" href="directory_8c_source.html#l00222">dir_readdir()</a>, <a class="el" href="file_8c_source.html#l00069">file_read()</a>, <a class="el" href="file_8c_source.html#l00082">file_read_at()</a>, and <a class="el" href="directory_8c_source.html#l00092">lookup()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_a31fcd756c686b818d56067b4460bfdb9_cgraph.png" border="0" usemap="#inode_8c_a31fcd756c686b818d56067b4460bfdb9_cgraph" alt=""/></div>
<map name="inode_8c_a31fcd756c686b818d56067b4460bfdb9_cgraph" id="inode_8c_a31fcd756c686b818d56067b4460bfdb9_cgraph">
<area shape="rect" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="5,381,112,407"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="171,205,258,231"/>
<area shape="rect" href="inode_8c.html#a9b48abdaf996c82819f49d6d8fc4c224" title="Returns the block device sector that contains byte offset POS within INODE." alt="" coords="160,255,269,280"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="530,305,574,331"/>
<area shape="rect" href="inode_8c.html#a67214eb44fb24ef254fca76f9a63fd6d" title="Returns the length, in bytes, of INODE&#39;s data." alt="" coords="165,532,263,557"/>
<area shape="rect" href="malloc_8c.html#a7ac38fce3243a7dcf448301ee9ffd392" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="184,483,244,508"/>
<area shape="rect" href="string_8c.html#ac81277697db3331c21cac338b661817a" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="178,581,250,607"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="326,205,426,231"/>
<area shape="rect" href="block_8c.html#a805c68661c9837f08b82b27fb82b9f94" title="Returns BLOCK&#39;s name (e.g." alt="" coords="505,205,598,231"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="687,356,799,381"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="687,405,799,431"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1256,5,1364,31"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1265,353,1354,379"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="695,559,791,584"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="695,609,791,635"/>
<area shape="rect" href="string_8c.html#ab1e7a2e7d71d61a771b43da7c18fdba6" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1098,253,1167,279"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="871,153,1010,179"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="681,204,805,229"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1102,204,1163,229"/>
<area shape="rect" href="vaddr_8h.html#a5a07aa5a4d70694db19884626f4b0fa3" title="Round down to nearest page boundary." alt="" coords="1576,533,1693,559"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="1596,383,1673,408"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1434,255,1511,280"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1595,305,1674,331"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1607,255,1662,280"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1265,508,1355,533"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="866,684,1015,723"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1256,609,1364,635"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="894,635,987,660"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1434,660,1510,685"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1417,559,1528,584"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1428,888,1517,913"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1260,913,1360,939"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1255,711,1364,736"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1084,609,1181,635"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1601,888,1668,913"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="902,989,979,1015"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1432,1065,1513,1091"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1082,1116,1183,1141"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1076,863,1189,888"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="1274,1116,1346,1141"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1091,155,1174,180"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1063,303,1202,328"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1074,53,1191,79"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1280,104,1339,129"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1250,155,1369,180"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1266,303,1353,328"/>
<area shape="rect" href="bitmap_8c.html#a576f7d29f091eac024f70ae8d68997a9" title="Bitmap size." alt="" coords="1263,55,1356,80"/>
<area shape="rect" href="palloc_8c.html#a135bc426d035b41313b4542adfd2c05f" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="484,508,619,533"/>
<area shape="rect" href="palloc_8c.html#aa8cccdccaa05d4023e3e65c15ed486af" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="317,508,436,533"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="667,508,818,533"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_a31fcd756c686b818d56067b4460bfdb9_icgraph.png" border="0" usemap="#inode_8c_a31fcd756c686b818d56067b4460bfdb9_icgraph" alt=""/></div>
<map name="inode_8c_a31fcd756c686b818d56067b4460bfdb9_icgraph" id="inode_8c_a31fcd756c686b818d56067b4460bfdb9_icgraph">
<area shape="rect" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="1295,107,1401,132"/>
<area shape="rect" href="directory_8h.html#ab1d7741cb8f50c04ee906af9edadba10" title="Adds a file named NAME to DIR, which must not already contain a file by that name." alt="" coords="1031,56,1097,81"/>
<area shape="rect" href="directory_8h.html#a522af6dc93a360056f7391f7bd439f57" title="filesys/directory.h" alt="" coords="1159,5,1244,31"/>
<area shape="rect" href="file_8h.html#a30acfe66c0919f3f37ee17e7cd4c259b" title="Reading and writing." alt="" coords="1028,256,1100,281"/>
<area shape="rect" href="file_8h.html#a58e86db758749dcd35d513dde31d7c9c" title="Reads SIZE bytes from FILE into BUFFER, starting at offset FILE_OFS in the file." alt="" coords="1156,156,1247,181"/>
<area shape="rect" href="directory_8c.html#ab2c71a2a1a0ffa3c618792babf4fc8b9" title="Searches DIR for a file with the given NAME." alt="" coords="1171,107,1232,132"/>
<area shape="rect" href="filesys_8h.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="865,56,968,81"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="715,56,811,81"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="135,132,225,157"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,132,87,157"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="581,5,647,31"/>
<area shape="rect" href="fsutil_8h.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="filesys/fsutil.h" alt="" coords="713,208,814,233"/>
<area shape="rect" href="fsutil_8h.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="726,157,800,183"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="740,304,787,329"/>
<area shape="rect" href="process_8c.html#a2f03f0e1bdd5d41d15c2ea83f0135b7f" title="Loads a segment starting at offset OFS in FILE at address UPAGE." alt="" coords="864,357,969,383"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="564,300,665,325"/>
<area shape="rect" href="process_8h.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="393,276,516,301"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="273,264,345,289"/>
<area shape="rect" href="directory_8h.html#af57fd81b479847465ef2f4848fe0f428" title="Reading and writing." alt="" coords="1022,155,1105,180"/>
<area shape="rect" href="directory_8h.html#a90c0b9ebb330de50b9d9ad5fde4d1676" title="Removes any entry for NAME in DIR." alt="" coords="1020,105,1108,131"/>
<area shape="rect" href="filesys_8h.html#a6dd9e1e66d780ecd7580dabcf72559b4" title="Opens the file with the given NAME." alt="" coords="869,155,964,180"/>
<area shape="rect" href="filesys_8h.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="filesys/filesys.h" alt="" coords="862,105,972,131"/>
<area shape="rect" href="fsutil_8h.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="419,107,490,132"/>
</map>
</div>

</div>
</div>
<a id="af37b7ea512c8cb2a43e593b3b2d32ed9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af37b7ea512c8cb2a43e593b3b2d32ed9">&#9670;&nbsp;</a></span>inode_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inode_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Marks INODE to be deleted when it is closed by the last caller who has it open. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00191">191</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, and <a class="el" href="inode_8c_source.html#l00037">inode::removed</a>.</p>

<p class="reference">Referenced by <a class="el" href="directory_8c_source.html#l00185">dir_remove()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_af37b7ea512c8cb2a43e593b3b2d32ed9_icgraph.png" border="0" usemap="#inode_8c_af37b7ea512c8cb2a43e593b3b2d32ed9_icgraph" alt=""/></div>
<map name="inode_8c_af37b7ea512c8cb2a43e593b3b2d32ed9_icgraph" id="inode_8c_af37b7ea512c8cb2a43e593b3b2d32ed9_icgraph">
<area shape="rect" title="Marks INODE to be deleted when it is closed by the last caller who has it open." alt="" coords="687,5,793,31"/>
<area shape="rect" href="directory_8h.html#a90c0b9ebb330de50b9d9ad5fde4d1676" title="Removes any entry for NAME in DIR." alt="" coords="551,5,639,31"/>
<area shape="rect" href="filesys_8h.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="filesys/filesys.h" alt="" coords="393,5,503,31"/>
<area shape="rect" href="fsutil_8h.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="273,5,345,31"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="135,5,225,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
</map>
</div>

</div>
</div>
<a id="a2314e746f5653780aab519437db1296d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2314e746f5653780aab519437db1296d">&#9670;&nbsp;</a></span>inode_reopen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a>* inode_reopen </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reopens and returns INODE. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00146">146</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, and <a class="el" href="inode_8c_source.html#l00036">inode::open_cnt</a>.</p>

<p class="reference">Referenced by <a class="el" href="directory_8c_source.html#l00063">dir_reopen()</a>, <a class="el" href="file_8c_source.html#l00039">file_reopen()</a>, and <a class="el" href="inode_8c_source.html#l00112">inode_open()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_a2314e746f5653780aab519437db1296d_icgraph.png" border="0" usemap="#inode_8c_a2314e746f5653780aab519437db1296d_icgraph" alt=""/></div>
<map name="inode_8c_a2314e746f5653780aab519437db1296d_icgraph" id="inode_8c_a2314e746f5653780aab519437db1296d_icgraph">
<area shape="rect" title="Reopens and returns INODE." alt="" coords="1325,209,1427,235"/>
<area shape="rect" href="directory_8h.html#a0a9521db17816e1e7b81f30c0e00e980" title="Opens and returns a new directory for the same inode as DIR." alt="" coords="1188,160,1274,185"/>
<area shape="rect" href="file_8h.html#a2f1e61c23b36a5ff6cdb36a674669001" title="Opens and returns a new file for the same inode as FILE." alt="" coords="1187,209,1275,235"/>
<area shape="rect" href="inode_8h.html#ab09e048387b074433767ae90e888d774" title="Reads an inode from SECTOR and returns a ‘struct inode’ that contains it." alt="" coords="1186,259,1277,284"/>
<area shape="rect" href="directory_8h.html#af57fd81b479847465ef2f4848fe0f428" title="Reading and writing." alt="" coords="1035,133,1118,159"/>
<area shape="rect" href="directory_8h.html#a360de0f3a61721d83b1d6f3f435779de" title="Opens the root directory and returns a directory for it." alt="" coords="1025,208,1128,233"/>
<area shape="rect" href="directory_8h.html#a90c0b9ebb330de50b9d9ad5fde4d1676" title="Removes any entry for NAME in DIR." alt="" coords="1032,259,1120,284"/>
<area shape="rect" href="free-map_8h.html#a928c69cba9ea179d6fe581acd970c512" title="Creates a new free map file on disk and writes the free map to it." alt="" coords="1015,308,1138,333"/>
<area shape="rect" href="free-map_8h.html#a82ae69d4b7534829d5c1672231c62370" title="Opens the free map file and reads it from disk." alt="" coords="1019,357,1134,383"/>
<area shape="rect" href="filesys_8h.html#a6dd9e1e66d780ecd7580dabcf72559b4" title="Opens the file with the given NAME." alt="" coords="865,107,960,132"/>
<area shape="rect" href="fsutil_8h.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="filesys/fsutil.h" alt="" coords="564,56,665,81"/>
<area shape="rect" href="fsutil_8h.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="418,107,491,132"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="713,157,809,183"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="738,5,784,31"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="135,157,225,183"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,233,87,259"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="564,5,665,31"/>
<area shape="rect" href="process_8h.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="393,5,516,31"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="273,5,345,31"/>
<area shape="rect" href="filesys_8h.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="861,157,964,183"/>
<area shape="rect" href="filesys_8h.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="filesys/filesys.h" alt="" coords="857,259,967,284"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="581,208,647,233"/>
<area shape="rect" href="fsutil_8h.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="273,259,345,284"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="872,308,953,333"/>
<area shape="rect" href="filesys_8h.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="720,309,802,335"/>
</map>
</div>

</div>
</div>
<a id="a09402d2c8d33dc00b2557daa27d944ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09402d2c8d33dc00b2557daa27d944ee">&#9670;&nbsp;</a></span>inode_write_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> inode_write_at </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buffer_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes SIZE bytes from BUFFER into INODE, starting at OFFSET. </p>
<p>Returns the number of bytes actually written, which may be less than SIZE if end of file is reached or an error occurs. (Normally a write at end of file would extend the inode, but growth is not yet implemented.) </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00258">258</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="block_8c_source.html#l00121">block_read()</a>, <a class="el" href="block_8h_source.html#l00011">BLOCK_SECTOR_SIZE</a>, <a class="el" href="block_8c_source.html#l00134">block_write()</a>, <a class="el" href="input_8c_source.html#l00007">buffer</a>, <a class="el" href="inode_8c_source.html#l00047">byte_to_sector()</a>, <a class="el" href="inode_8c_source.html#l00038">inode::deny_write_cnt</a>, <a class="el" href="malloc_8c_source.html#l00219">free()</a>, <a class="el" href="filesys_8c_source.html#l00011">fs_device</a>, <a class="el" href="inode_8c_source.html#l00342">inode_length()</a>, <a class="el" href="malloc_8c_source.html#l00090">malloc()</a>, <a class="el" href="string_8c_source.html#l00007">memcpy()</a>, <a class="el" href="string_8c_source.html#l00279">memset()</a>, and <a class="el" href="stddef_8h_source.html#l00004">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="directory_8c_source.html#l00142">dir_add()</a>, <a class="el" href="directory_8c_source.html#l00185">dir_remove()</a>, <a class="el" href="file_8c_source.html#l00095">file_write()</a>, and <a class="el" href="file_8c_source.html#l00110">file_write_at()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_a09402d2c8d33dc00b2557daa27d944ee_cgraph.png" border="0" usemap="#inode_8c_a09402d2c8d33dc00b2557daa27d944ee_cgraph" alt=""/></div>
<map name="inode_8c_a09402d2c8d33dc00b2557daa27d944ee_cgraph" id="inode_8c_a09402d2c8d33dc00b2557daa27d944ee_cgraph">
<area shape="rect" title="Writes SIZE bytes from BUFFER into INODE, starting at OFFSET." alt="" coords="5,180,113,205"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="173,5,259,31"/>
<area shape="rect" href="block_8c.html#ab7e44f7861385a5c4630d899a469f9d4" title="Write sector SECTOR to BLOCK from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="172,55,260,80"/>
<area shape="rect" href="inode_8c.html#a9b48abdaf996c82819f49d6d8fc4c224" title="Returns the block device sector that contains byte offset POS within INODE." alt="" coords="161,104,270,129"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="356,383,400,408"/>
<area shape="rect" href="string_8c.html#ab1e7a2e7d71d61a771b43da7c18fdba6" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="908,357,976,383"/>
<area shape="rect" href="inode_8c.html#a67214eb44fb24ef254fca76f9a63fd6d" title="Returns the length, in bytes, of INODE&#39;s data." alt="" coords="167,256,265,281"/>
<area shape="rect" href="malloc_8c.html#a7ac38fce3243a7dcf448301ee9ffd392" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="186,712,246,737"/>
<area shape="rect" href="string_8c.html#ac81277697db3331c21cac338b661817a" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="180,761,252,787"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="328,29,428,55"/>
<area shape="rect" href="block_8c.html#a805c68661c9837f08b82b27fb82b9f94" title="Returns BLOCK&#39;s name (e.g." alt="" coords="507,29,600,55"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="497,560,609,585"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="688,483,801,508"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1231,457,1339,483"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1240,407,1330,432"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="696,1091,792,1116"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="696,812,792,837"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="674,307,814,332"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="491,256,615,281"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="911,407,973,432"/>
<area shape="rect" href="vaddr_8h.html#a5a07aa5a4d70694db19884626f4b0fa3" title="Round down to nearest page boundary." alt="" coords="1547,660,1664,685"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="1567,611,1644,636"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1405,457,1482,483"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1566,408,1645,433"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1578,457,1633,483"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1240,1167,1330,1192"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="868,1217,1016,1256"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1231,1243,1339,1268"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="895,1091,989,1116"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1405,1003,1482,1028"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1388,1179,1499,1204"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1399,888,1488,913"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1235,989,1335,1015"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1230,761,1340,787"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1074,1217,1172,1243"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1572,711,1639,736"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="904,812,980,837"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1403,660,1484,685"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1073,609,1174,635"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1067,913,1179,939"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="1249,609,1321,635"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="901,308,983,333"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="872,508,1012,533"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="883,207,1001,232"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1094,232,1152,257"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1064,308,1182,333"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1080,508,1166,533"/>
<area shape="rect" href="palloc_8c.html#a135bc426d035b41313b4542adfd2c05f" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="485,763,621,788"/>
<area shape="rect" href="palloc_8c.html#aa8cccdccaa05d4023e3e65c15ed486af" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="318,813,437,839"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="669,660,820,685"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8c_a09402d2c8d33dc00b2557daa27d944ee_icgraph.png" border="0" usemap="#inode_8c_a09402d2c8d33dc00b2557daa27d944ee_icgraph" alt=""/></div>
<map name="inode_8c_a09402d2c8d33dc00b2557daa27d944ee_icgraph" id="inode_8c_a09402d2c8d33dc00b2557daa27d944ee_icgraph">
<area shape="rect" title="Writes SIZE bytes from BUFFER into INODE, starting at OFFSET." alt="" coords="716,80,824,105"/>
<area shape="rect" href="directory_8h.html#ab1d7741cb8f50c04ee906af9edadba10" title="Adds a file named NAME to DIR, which must not already contain a file by that name." alt="" coords="589,55,655,80"/>
<area shape="rect" href="directory_8h.html#a90c0b9ebb330de50b9d9ad5fde4d1676" title="Removes any entry for NAME in DIR." alt="" coords="578,104,666,129"/>
<area shape="rect" href="file_8h.html#aa6b55a3ae90c9bc9718b3a2345d7666d" title="Writes SIZE bytes from BUFFER into FILE, starting at the file&#39;s current position." alt="" coords="435,5,509,31"/>
<area shape="rect" href="file_8h.html#a706816874cad7e4ba737057c35fe253b" title="Writes SIZE bytes from BUFFER into FILE, starting at offset FILE_OFS in the file." alt="" coords="575,153,668,179"/>
<area shape="rect" href="filesys_8h.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="421,55,524,80"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="273,55,369,80"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="135,80,225,105"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,80,87,105"/>
<area shape="rect" href="filesys_8h.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="filesys/filesys.h" alt="" coords="417,104,527,129"/>
<area shape="rect" href="fsutil_8h.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="285,104,357,129"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="af6ed16374bb5b8ec52d2cac452ac21c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6ed16374bb5b8ec52d2cac452ac21c0">&#9670;&nbsp;</a></span>open_inodes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist.html">list</a> open_inodes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>List of open inodes, so that opening a single inode twice returns the same &lsquo;struct inode&rsquo;. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00058">58</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="inode_8c_source.html#l00062">inode_init()</a>, and <a class="el" href="inode_8c_source.html#l00112">inode_open()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 22 2019 10:19:16 for CS318 - Pintos by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
