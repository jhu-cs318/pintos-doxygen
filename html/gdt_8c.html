<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CS318 - Pintos: src/userprog/gdt.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CS318 - Pintos
   </div>
   <div id="projectbrief">Pintos source browser for JHU CS318 course</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_4cfb6a44fef09f5d9415a441552a27aa.html">userprog</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">gdt.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="gdt_8h_source.html">userprog/gdt.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="debug_8h_source.html">debug.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="tss_8h_source.html">userprog/tss.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="palloc_8h_source.html">threads/palloc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="vaddr_8h_source.html">threads/vaddr.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for gdt.c:</div>
<div class="dyncontent">
<div class="center"><img src="gdt_8c__incl.png" border="0" usemap="#src_2userprog_2gdt_8c" alt=""/></div>
<map name="src_2userprog_2gdt_8c" id="src_2userprog_2gdt_8c">
<area shape="rect" title=" " alt="" coords="260,5,388,31"/>
<area shape="rect" href="gdt_8h.html" title=" " alt="" coords="135,79,243,104"/>
<area shape="rect" href="debug_8h.html" title=" " alt="" coords="386,152,456,177"/>
<area shape="rect" href="tss_8h.html" title=" " alt="" coords="5,79,111,104"/>
<area shape="rect" href="palloc_8h.html" title=" " alt="" coords="455,79,571,104"/>
<area shape="rect" href="vaddr_8h.html" title=" " alt="" coords="267,79,380,104"/>
<area shape="rect" href="loader_8h.html" title=" " alt="" coords="96,152,213,177"/>
<area shape="rect" href="stdint_8h.html" title=" " alt="" coords="122,225,186,251"/>
<area shape="rect" href="stddef_8h.html" title=" " alt="" coords="480,152,549,177"/>
<area shape="rect" href="stdbool_8h.html" title=" " alt="" coords="287,152,363,177"/>
</map>
</div>
</div>
<p><a href="gdt_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ab46ff3b16d4a01c82be65848e1632b70"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gdt_8c.html#ab46ff3b16d4a01c82be65848e1632b70">seg_class</a> { <a class="el" href="gdt_8c.html#ab46ff3b16d4a01c82be65848e1632b70ad51fd31beddee615dd210cd98b4f72a1">CLS_SYSTEM</a> = 0, 
<a class="el" href="gdt_8c.html#ab46ff3b16d4a01c82be65848e1632b70a2c31250b1323f4241978fea78670f576">CLS_CODE_DATA</a> = 1
 }</td></tr>
<tr class="memdesc:ab46ff3b16d4a01c82be65848e1632b70"><td class="mdescLeft">&#160;</td><td class="mdescRight">System segment or code/data segment?  <a href="gdt_8c.html#ab46ff3b16d4a01c82be65848e1632b70">More...</a><br /></td></tr>
<tr class="separator:ab46ff3b16d4a01c82be65848e1632b70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a385041f5d3fde4b7a4c1a0575a4a30fb"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gdt_8c.html#a385041f5d3fde4b7a4c1a0575a4a30fb">seg_granularity</a> { <a class="el" href="gdt_8c.html#a385041f5d3fde4b7a4c1a0575a4a30fbafe541a561191c08df2e88a8560f63c54">GRAN_BYTE</a> = 0, 
<a class="el" href="gdt_8c.html#a385041f5d3fde4b7a4c1a0575a4a30fba7271519a42a12bb74ef07ea0c97dc1ab">GRAN_PAGE</a> = 1
 }</td></tr>
<tr class="memdesc:a385041f5d3fde4b7a4c1a0575a4a30fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Limit has byte or 4 kB page granularity?  <a href="gdt_8c.html#a385041f5d3fde4b7a4c1a0575a4a30fb">More...</a><br /></td></tr>
<tr class="separator:a385041f5d3fde4b7a4c1a0575a4a30fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae9a9122dd568c14bd49d9a8a91cafeac"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gdt_8c.html#ae9a9122dd568c14bd49d9a8a91cafeac">make_code_desc</a> (int dpl)</td></tr>
<tr class="memdesc:ae9a9122dd568c14bd49d9a8a91cafeac"><td class="mdescLeft">&#160;</td><td class="mdescRight">GDT helpers.  <a href="gdt_8c.html#ae9a9122dd568c14bd49d9a8a91cafeac">More...</a><br /></td></tr>
<tr class="separator:ae9a9122dd568c14bd49d9a8a91cafeac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14b9cb9d5d2ccfb0bae59d6935cca494"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gdt_8c.html#a14b9cb9d5d2ccfb0bae59d6935cca494">make_data_desc</a> (int dpl)</td></tr>
<tr class="memdesc:a14b9cb9d5d2ccfb0bae59d6935cca494"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a descriptor for a writable data segment with base at 0, a limit of 4 GB, and the given DPL.  <a href="gdt_8c.html#a14b9cb9d5d2ccfb0bae59d6935cca494">More...</a><br /></td></tr>
<tr class="separator:a14b9cb9d5d2ccfb0bae59d6935cca494"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afef5fe81aa82bdb17f6ef1e20a041bbe"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gdt_8c.html#afef5fe81aa82bdb17f6ef1e20a041bbe">make_tss_desc</a> (void *laddr)</td></tr>
<tr class="memdesc:afef5fe81aa82bdb17f6ef1e20a041bbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a descriptor for an "available" 32-bit Task-State Segment with its base at the given linear address, a limit of 0x67 bytes (the size of a 32-bit TSS), and a DPL of 0.  <a href="gdt_8c.html#afef5fe81aa82bdb17f6ef1e20a041bbe">More...</a><br /></td></tr>
<tr class="separator:afef5fe81aa82bdb17f6ef1e20a041bbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a110e80c32c1b2c808d2bf93350b11bcb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gdt_8c.html#a110e80c32c1b2c808d2bf93350b11bcb">make_gdtr_operand</a> (<a class="el" href="stdint_8h.html#adf4d876453337156dde61095e1f20223">uint16_t</a> limit, void *base)</td></tr>
<tr class="memdesc:a110e80c32c1b2c808d2bf93350b11bcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a descriptor that yields the given LIMIT and BASE when used as an operand for the LGDT instruction.  <a href="gdt_8c.html#a110e80c32c1b2c808d2bf93350b11bcb">More...</a><br /></td></tr>
<tr class="separator:a110e80c32c1b2c808d2bf93350b11bcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2acd7bce259a1a32213503c6fa18f14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gdt_8c.html#ad2acd7bce259a1a32213503c6fa18f14">gdt_init</a> (void)</td></tr>
<tr class="memdesc:ad2acd7bce259a1a32213503c6fa18f14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up a proper GDT.  <a href="gdt_8c.html#ad2acd7bce259a1a32213503c6fa18f14">More...</a><br /></td></tr>
<tr class="separator:ad2acd7bce259a1a32213503c6fa18f14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c91913924f5aebd18e709f6120c071f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gdt_8c.html#a3c91913924f5aebd18e709f6120c071f">make_seg_desc</a> (<a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> base, <a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> limit, enum <a class="el" href="gdt_8c.html#ab46ff3b16d4a01c82be65848e1632b70">seg_class</a> class, int type, int dpl, enum <a class="el" href="gdt_8c.html#a385041f5d3fde4b7a4c1a0575a4a30fb">seg_granularity</a> granularity)</td></tr>
<tr class="memdesc:a3c91913924f5aebd18e709f6120c071f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a segment descriptor with the given 32-bit BASE and 20-bit LIMIT (whose interpretation depends on GRANULARITY).  <a href="gdt_8c.html#a3c91913924f5aebd18e709f6120c071f">More...</a><br /></td></tr>
<tr class="separator:a3c91913924f5aebd18e709f6120c071f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8a4b38a275501794d9f8cf94eca5ffa3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gdt_8c.html#a8a4b38a275501794d9f8cf94eca5ffa3">gdt</a> [<a class="el" href="gdt_8h.html#a9e8b01783bdb20fa44b31f0b76efa05a">SEL_CNT</a>]</td></tr>
<tr class="memdesc:a8a4b38a275501794d9f8cf94eca5ffa3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Global Descriptor Table (GDT).  <a href="gdt_8c.html#a8a4b38a275501794d9f8cf94eca5ffa3">More...</a><br /></td></tr>
<tr class="separator:a8a4b38a275501794d9f8cf94eca5ffa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ab46ff3b16d4a01c82be65848e1632b70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab46ff3b16d4a01c82be65848e1632b70">&#9670;&nbsp;</a></span>seg_class</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="gdt_8c.html#ab46ff3b16d4a01c82be65848e1632b70">seg_class</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>System segment or code/data segment? </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ab46ff3b16d4a01c82be65848e1632b70ad51fd31beddee615dd210cd98b4f72a1"></a>CLS_SYSTEM&#160;</td><td class="fielddoc"><p>System segment. </p>
</td></tr>
<tr><td class="fieldname"><a id="ab46ff3b16d4a01c82be65848e1632b70a2c31250b1323f4241978fea78670f576"></a>CLS_CODE_DATA&#160;</td><td class="fielddoc"><p>Code or data segment. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="gdt_8c_source.html#l00057">57</a> of file <a class="el" href="gdt_8c_source.html">gdt.c</a>.</p>

</div>
</div>
<a id="a385041f5d3fde4b7a4c1a0575a4a30fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a385041f5d3fde4b7a4c1a0575a4a30fb">&#9670;&nbsp;</a></span>seg_granularity</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="gdt_8c.html#a385041f5d3fde4b7a4c1a0575a4a30fb">seg_granularity</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Limit has byte or 4 kB page granularity? </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a385041f5d3fde4b7a4c1a0575a4a30fbafe541a561191c08df2e88a8560f63c54"></a>GRAN_BYTE&#160;</td><td class="fielddoc"><p>Limit has 1-byte granularity. </p>
</td></tr>
<tr><td class="fieldname"><a id="a385041f5d3fde4b7a4c1a0575a4a30fba7271519a42a12bb74ef07ea0c97dc1ab"></a>GRAN_PAGE&#160;</td><td class="fielddoc"><p>Limit has 4 kB granularity. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="gdt_8c_source.html#l00064">64</a> of file <a class="el" href="gdt_8c_source.html">gdt.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad2acd7bce259a1a32213503c6fa18f14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2acd7bce259a1a32213503c6fa18f14">&#9670;&nbsp;</a></span>gdt_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gdt_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up a proper GDT. </p>
<p><a class="el" href="gdt_8h.html">userprog/gdt.h</a></p>
<p>The bootstrap loader's GDT didn't include user-mode selectors or a TSS, but we need both now. </p>

<p class="definition">Definition at line <a class="el" href="gdt_8c_source.html#l00036">36</a> of file <a class="el" href="gdt_8c_source.html">gdt.c</a>.</p>

<p class="reference">References <a class="el" href="gdt_8c_source.html#l00025">gdt</a>, <a class="el" href="gdt_8c_source.html#l00116">make_code_desc()</a>, <a class="el" href="gdt_8c_source.html#l00124">make_data_desc()</a>, <a class="el" href="gdt_8c_source.html#l00143">make_gdtr_operand()</a>, <a class="el" href="gdt_8c_source.html#l00134">make_tss_desc()</a>, <a class="el" href="loader_8h_source.html#l00030">SEL_KCSEG</a>, <a class="el" href="loader_8h_source.html#l00031">SEL_KDSEG</a>, <a class="el" href="loader_8h_source.html#l00029">SEL_NULL</a>, <a class="el" href="gdt_8h_source.html#l00010">SEL_TSS</a>, <a class="el" href="gdt_8h_source.html#l00008">SEL_UCSEG</a>, <a class="el" href="gdt_8h_source.html#l00009">SEL_UDSEG</a>, and <a class="el" href="tss_8c_source.html#l00093">tss_get()</a>.</p>

<p class="reference">Referenced by <a class="el" href="init_8c_source.html#l00073">pintos_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="gdt_8c_ad2acd7bce259a1a32213503c6fa18f14_cgraph.png" border="0" usemap="#gdt_8c_ad2acd7bce259a1a32213503c6fa18f14_cgraph" alt=""/></div>
<map name="gdt_8c_ad2acd7bce259a1a32213503c6fa18f14_cgraph" id="gdt_8c_ad2acd7bce259a1a32213503c6fa18f14_cgraph">
<area shape="rect" title="Sets up a proper GDT." alt="" coords="5,104,70,129"/>
<area shape="rect" href="gdt_8c.html#ae9a9122dd568c14bd49d9a8a91cafeac" title="GDT helpers." alt="" coords="125,5,251,31"/>
<area shape="rect" href="gdt_8c.html#a14b9cb9d5d2ccfb0bae59d6935cca494" title="Returns a descriptor for a writable data segment with base at 0, a limit of 4 GB, and the given DPL." alt="" coords="127,55,249,80"/>
<area shape="rect" href="gdt_8c.html#a110e80c32c1b2c808d2bf93350b11bcb" title="Returns a descriptor that yields the given LIMIT and BASE when used as an operand for the LGDT instru..." alt="" coords="118,104,258,129"/>
<area shape="rect" href="gdt_8c.html#afef5fe81aa82bdb17f6ef1e20a041bbe" title="Returns a descriptor for an &quot;available&quot; 32&#45;bit Task&#45;State Segment with its base at the given linear a..." alt="" coords="131,153,245,179"/>
<area shape="rect" href="tss_8c.html#a71eea700b08412dc2f1b4d5fe965069c" title="Returns the kernel TSS." alt="" coords="156,203,220,228"/>
<area shape="rect" href="gdt_8c.html#a3c91913924f5aebd18e709f6120c071f" title="Returns a segment descriptor with the given 32&#45;bit BASE and 20&#45;bit LIMIT (whose interpretation depend..." alt="" coords="306,55,425,80"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="gdt_8c_ad2acd7bce259a1a32213503c6fa18f14_icgraph.png" border="0" usemap="#gdt_8c_ad2acd7bce259a1a32213503c6fa18f14_icgraph" alt=""/></div>
<map name="gdt_8c_ad2acd7bce259a1a32213503c6fa18f14_icgraph" id="gdt_8c_ad2acd7bce259a1a32213503c6fa18f14_icgraph">
<area shape="rect" title="Sets up a proper GDT." alt="" coords="135,5,199,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
</map>
</div>

</div>
</div>
<a id="ae9a9122dd568c14bd49d9a8a91cafeac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9a9122dd568c14bd49d9a8a91cafeac">&#9670;&nbsp;</a></span>make_code_desc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a> make_code_desc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dpl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>GDT helpers. </p>
<p>Returns a descriptor for a readable code segment with base at 0, a limit of 4 GB, and the given DPL. </p>

<p class="definition">Definition at line <a class="el" href="gdt_8c_source.html#l00116">116</a> of file <a class="el" href="gdt_8c_source.html">gdt.c</a>.</p>

<p class="reference">References <a class="el" href="gdt_8c_source.html#l00060">CLS_CODE_DATA</a>, <a class="el" href="gdt_8c_source.html#l00067">GRAN_PAGE</a>, and <a class="el" href="gdt_8c_source.html#l00082">make_seg_desc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="gdt_8c_source.html#l00036">gdt_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="gdt_8c_ae9a9122dd568c14bd49d9a8a91cafeac_cgraph.png" border="0" usemap="#gdt_8c_ae9a9122dd568c14bd49d9a8a91cafeac_cgraph" alt=""/></div>
<map name="gdt_8c_ae9a9122dd568c14bd49d9a8a91cafeac_cgraph" id="gdt_8c_ae9a9122dd568c14bd49d9a8a91cafeac_cgraph">
<area shape="rect" title="GDT helpers." alt="" coords="5,5,131,31"/>
<area shape="rect" href="gdt_8c.html#a3c91913924f5aebd18e709f6120c071f" title="Returns a segment descriptor with the given 32&#45;bit BASE and 20&#45;bit LIMIT (whose interpretation depend..." alt="" coords="179,5,298,31"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="gdt_8c_ae9a9122dd568c14bd49d9a8a91cafeac_icgraph.png" border="0" usemap="#gdt_8c_ae9a9122dd568c14bd49d9a8a91cafeac_icgraph" alt=""/></div>
<map name="gdt_8c_ae9a9122dd568c14bd49d9a8a91cafeac_icgraph" id="gdt_8c_ae9a9122dd568c14bd49d9a8a91cafeac_icgraph">
<area shape="rect" title="GDT helpers." alt="" coords="247,5,373,31"/>
<area shape="rect" href="gdt_8h.html#ad2acd7bce259a1a32213503c6fa18f14" title="userprog/gdt.h" alt="" coords="135,5,199,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
</map>
</div>

</div>
</div>
<a id="a14b9cb9d5d2ccfb0bae59d6935cca494"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14b9cb9d5d2ccfb0bae59d6935cca494">&#9670;&nbsp;</a></span>make_data_desc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a> make_data_desc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dpl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a descriptor for a writable data segment with base at 0, a limit of 4 GB, and the given DPL. </p>

<p class="definition">Definition at line <a class="el" href="gdt_8c_source.html#l00124">124</a> of file <a class="el" href="gdt_8c_source.html">gdt.c</a>.</p>

<p class="reference">References <a class="el" href="gdt_8c_source.html#l00060">CLS_CODE_DATA</a>, <a class="el" href="gdt_8c_source.html#l00067">GRAN_PAGE</a>, and <a class="el" href="gdt_8c_source.html#l00082">make_seg_desc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="gdt_8c_source.html#l00036">gdt_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="gdt_8c_a14b9cb9d5d2ccfb0bae59d6935cca494_cgraph.png" border="0" usemap="#gdt_8c_a14b9cb9d5d2ccfb0bae59d6935cca494_cgraph" alt=""/></div>
<map name="gdt_8c_a14b9cb9d5d2ccfb0bae59d6935cca494_cgraph" id="gdt_8c_a14b9cb9d5d2ccfb0bae59d6935cca494_cgraph">
<area shape="rect" title="Returns a descriptor for a writable data segment with base at 0, a limit of 4 GB, and the given DPL." alt="" coords="5,5,128,31"/>
<area shape="rect" href="gdt_8c.html#a3c91913924f5aebd18e709f6120c071f" title="Returns a segment descriptor with the given 32&#45;bit BASE and 20&#45;bit LIMIT (whose interpretation depend..." alt="" coords="176,5,295,31"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="gdt_8c_a14b9cb9d5d2ccfb0bae59d6935cca494_icgraph.png" border="0" usemap="#gdt_8c_a14b9cb9d5d2ccfb0bae59d6935cca494_icgraph" alt=""/></div>
<map name="gdt_8c_a14b9cb9d5d2ccfb0bae59d6935cca494_icgraph" id="gdt_8c_a14b9cb9d5d2ccfb0bae59d6935cca494_icgraph">
<area shape="rect" title="Returns a descriptor for a writable data segment with base at 0, a limit of 4 GB, and the given DPL." alt="" coords="247,5,370,31"/>
<area shape="rect" href="gdt_8h.html#ad2acd7bce259a1a32213503c6fa18f14" title="userprog/gdt.h" alt="" coords="135,5,199,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
</map>
</div>

</div>
</div>
<a id="a110e80c32c1b2c808d2bf93350b11bcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a110e80c32c1b2c808d2bf93350b11bcb">&#9670;&nbsp;</a></span>make_gdtr_operand()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a> make_gdtr_operand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#adf4d876453337156dde61095e1f20223">uint16_t</a>&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>base</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a descriptor that yields the given LIMIT and BASE when used as an operand for the LGDT instruction. </p>

<p class="definition">Definition at line <a class="el" href="gdt_8c_source.html#l00143">143</a> of file <a class="el" href="gdt_8c_source.html">gdt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gdt_8c_source.html#l00036">gdt_init()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="gdt_8c_a110e80c32c1b2c808d2bf93350b11bcb_icgraph.png" border="0" usemap="#gdt_8c_a110e80c32c1b2c808d2bf93350b11bcb_icgraph" alt=""/></div>
<map name="gdt_8c_a110e80c32c1b2c808d2bf93350b11bcb_icgraph" id="gdt_8c_a110e80c32c1b2c808d2bf93350b11bcb_icgraph">
<area shape="rect" title="Returns a descriptor that yields the given LIMIT and BASE when used as an operand for the LGDT instru..." alt="" coords="247,5,388,31"/>
<area shape="rect" href="gdt_8h.html#ad2acd7bce259a1a32213503c6fa18f14" title="userprog/gdt.h" alt="" coords="135,5,199,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
</map>
</div>

</div>
</div>
<a id="a3c91913924f5aebd18e709f6120c071f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c91913924f5aebd18e709f6120c071f">&#9670;&nbsp;</a></span>make_seg_desc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a> make_seg_desc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="gdt_8c.html#ab46ff3b16d4a01c82be65848e1632b70">seg_class</a>&#160;</td>
          <td class="paramname"><em>class</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dpl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="gdt_8c.html#a385041f5d3fde4b7a4c1a0575a4a30fb">seg_granularity</a>&#160;</td>
          <td class="paramname"><em>granularity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a segment descriptor with the given 32-bit BASE and 20-bit LIMIT (whose interpretation depends on GRANULARITY). </p>
<p>The descriptor represents a system or code/data segment according to CLASS, and TYPE is its type (whose interpretation depends on the class).</p>
<p>The segment has descriptor privilege level DPL, meaning that it can be used in rings numbered DPL or lower. In practice, DPL==3 means that user processes can use the segment and DPL==0 means that only the kernel can use the segment. See [IA32-v3a] 4.5 "Privilege Levels" for further discussion. </p>
<p>&lt; Limit 15:0.</p>
<p>&lt; Base 15:0.</p>
<p>&lt; Base 23:16.</p>
<p>&lt; Segment type.</p>
<p>&lt; 0=system, 1=code/data.</p>
<p>&lt; Descriptor privilege.</p>
<p>&lt; Present.</p>
<p>&lt; Limit 16:19.</p>
<p>&lt; 32-bit segment.</p>
<p>&lt; Byte/page granularity.</p>
<p>&lt; Base 31:24.</p>

<p class="definition">Definition at line <a class="el" href="gdt_8c_source.html#l00082">82</a> of file <a class="el" href="gdt_8c_source.html">gdt.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="gdt_8c_source.html#l00060">CLS_CODE_DATA</a>, <a class="el" href="gdt_8c_source.html#l00059">CLS_SYSTEM</a>, <a class="el" href="gdt_8c_source.html#l00066">GRAN_BYTE</a>, and <a class="el" href="gdt_8c_source.html#l00067">GRAN_PAGE</a>.</p>

<p class="reference">Referenced by <a class="el" href="gdt_8c_source.html#l00116">make_code_desc()</a>, <a class="el" href="gdt_8c_source.html#l00124">make_data_desc()</a>, and <a class="el" href="gdt_8c_source.html#l00134">make_tss_desc()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="gdt_8c_a3c91913924f5aebd18e709f6120c071f_icgraph.png" border="0" usemap="#gdt_8c_a3c91913924f5aebd18e709f6120c071f_icgraph" alt=""/></div>
<map name="gdt_8c_a3c91913924f5aebd18e709f6120c071f_icgraph" id="gdt_8c_a3c91913924f5aebd18e709f6120c071f_icgraph">
<area shape="rect" title="Returns a segment descriptor with the given 32&#45;bit BASE and 20&#45;bit LIMIT (whose interpretation depend..." alt="" coords="421,55,539,80"/>
<area shape="rect" href="gdt_8c.html#ae9a9122dd568c14bd49d9a8a91cafeac" title="GDT helpers." alt="" coords="247,5,373,31"/>
<area shape="rect" href="gdt_8c.html#a14b9cb9d5d2ccfb0bae59d6935cca494" title="Returns a descriptor for a writable data segment with base at 0, a limit of 4 GB, and the given DPL." alt="" coords="249,55,371,80"/>
<area shape="rect" href="gdt_8c.html#afef5fe81aa82bdb17f6ef1e20a041bbe" title="Returns a descriptor for an &quot;available&quot; 32&#45;bit Task&#45;State Segment with its base at the given linear a..." alt="" coords="253,104,367,129"/>
<area shape="rect" href="gdt_8h.html#ad2acd7bce259a1a32213503c6fa18f14" title="userprog/gdt.h" alt="" coords="135,55,199,80"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,55,87,80"/>
</map>
</div>

</div>
</div>
<a id="afef5fe81aa82bdb17f6ef1e20a041bbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afef5fe81aa82bdb17f6ef1e20a041bbe">&#9670;&nbsp;</a></span>make_tss_desc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a> make_tss_desc </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>laddr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a descriptor for an "available" 32-bit Task-State Segment with its base at the given linear address, a limit of 0x67 bytes (the size of a 32-bit TSS), and a DPL of 0. </p>
<p>See [IA32-v3a] 6.2.2 "TSS Descriptor". </p>

<p class="definition">Definition at line <a class="el" href="gdt_8c_source.html#l00134">134</a> of file <a class="el" href="gdt_8c_source.html">gdt.c</a>.</p>

<p class="reference">References <a class="el" href="gdt_8c_source.html#l00059">CLS_SYSTEM</a>, <a class="el" href="gdt_8c_source.html#l00066">GRAN_BYTE</a>, and <a class="el" href="gdt_8c_source.html#l00082">make_seg_desc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="gdt_8c_source.html#l00036">gdt_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="gdt_8c_afef5fe81aa82bdb17f6ef1e20a041bbe_cgraph.png" border="0" usemap="#gdt_8c_afef5fe81aa82bdb17f6ef1e20a041bbe_cgraph" alt=""/></div>
<map name="gdt_8c_afef5fe81aa82bdb17f6ef1e20a041bbe_cgraph" id="gdt_8c_afef5fe81aa82bdb17f6ef1e20a041bbe_cgraph">
<area shape="rect" title="Returns a descriptor for an &quot;available&quot; 32&#45;bit Task&#45;State Segment with its base at the given linear a..." alt="" coords="5,5,119,31"/>
<area shape="rect" href="gdt_8c.html#a3c91913924f5aebd18e709f6120c071f" title="Returns a segment descriptor with the given 32&#45;bit BASE and 20&#45;bit LIMIT (whose interpretation depend..." alt="" coords="167,5,286,31"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="gdt_8c_afef5fe81aa82bdb17f6ef1e20a041bbe_icgraph.png" border="0" usemap="#gdt_8c_afef5fe81aa82bdb17f6ef1e20a041bbe_icgraph" alt=""/></div>
<map name="gdt_8c_afef5fe81aa82bdb17f6ef1e20a041bbe_icgraph" id="gdt_8c_afef5fe81aa82bdb17f6ef1e20a041bbe_icgraph">
<area shape="rect" title="Returns a descriptor for an &quot;available&quot; 32&#45;bit Task&#45;State Segment with its base at the given linear a..." alt="" coords="247,5,361,31"/>
<area shape="rect" href="gdt_8h.html#ad2acd7bce259a1a32213503c6fa18f14" title="userprog/gdt.h" alt="" coords="135,5,199,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a8a4b38a275501794d9f8cf94eca5ffa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a4b38a275501794d9f8cf94eca5ffa3">&#9670;&nbsp;</a></span>gdt</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a> gdt[<a class="el" href="gdt_8h.html#a9e8b01783bdb20fa44b31f0b76efa05a">SEL_CNT</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The Global Descriptor Table (GDT). </p>
<p>The GDT, an x86-specific structure, defines segments that can potentially be used by all processes in a system, subject to their permissions. There is also a per-process Local Descriptor Table (LDT) but that is not used by modern operating systems.</p>
<p>Each entry in the GDT, which is known by its byte offset in the table, identifies a segment. For our purposes only three types of segments are of interest: code, data, and TSS or Task-State Segment descriptors. The former two types are exactly what they sound like. The TSS is used primarily for stack switching on interrupts.</p>
<p>For more information on the GDT as used here, refer to [IA32-v3a] 3.2 "Using Segments" through 3.5 "System Descriptor
Types". </p>

<p class="definition">Definition at line <a class="el" href="gdt_8c_source.html#l00025">25</a> of file <a class="el" href="gdt_8c_source.html">gdt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="gdt_8c_source.html#l00036">gdt_init()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 22 2019 10:19:18 for CS318 - Pintos by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
