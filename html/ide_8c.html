<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CS318 - Pintos: src/devices/ide.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CS318 - Pintos
   </div>
   <div id="projectbrief">Pintos source browser for JHU CS318 course</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_6fac9273c1f4413d2ee63ba6cd0b0eb2.html">devices</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ide.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="ide_8h_source.html">devices/ide.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="ctype_8h_source.html">ctype.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="debug_8h_source.html">debug.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="stdbool_8h_source.html">stdbool.h</a>&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;<a class="el" href="block_8h_source.html">devices/block.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="partition_8h_source.html">devices/partition.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="timer_8h_source.html">devices/timer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="io_8h_source.html">threads/io.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="interrupt_8h_source.html">threads/interrupt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="synch_8h_source.html">threads/synch.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ide.c:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c__incl.png" border="0" usemap="#src_2devices_2ide_8c" alt=""/></div>
<map name="src_2devices_2ide_8c" id="src_2devices_2ide_8c">
<area shape="rect" title=" " alt="" coords="475,5,595,31"/>
<area shape="rect" href="ide_8h.html" title=" " alt="" coords="5,79,104,104"/>
<area shape="rect" href="ctype_8h.html" title=" " alt="" coords="128,79,192,104"/>
<area shape="rect" href="debug_8h.html" title=" " alt="" coords="216,79,286,104"/>
<area shape="rect" href="stdbool_8h.html" title=" " alt="" coords="383,225,458,251"/>
<area shape="rect" title=" " alt="" coords="905,79,965,104"/>
<area shape="rect" href="block_8h.html" title=" " alt="" coords="768,79,880,104"/>
<area shape="rect" href="partition_8h.html" title=" " alt="" coords="989,79,1118,104"/>
<area shape="rect" href="timer_8h.html" title=" " alt="" coords="584,79,694,104"/>
<area shape="rect" href="io_8h.html" title=" " alt="" coords="773,152,864,177"/>
<area shape="rect" href="interrupt_8h.html" title=" " alt="" coords="406,152,536,177"/>
<area shape="rect" href="synch_8h.html" title=" " alt="" coords="383,79,498,104"/>
<area shape="rect" href="stddef_8h.html" title=" " alt="" coords="785,225,853,251"/>
<area shape="rect" href="inttypes_8h.html" title=" " alt="" coords="889,152,967,177"/>
<area shape="rect" href="stdint_8h.html" title=" " alt="" coords="613,225,678,251"/>
<area shape="rect" href="round_8h.html" title=" " alt="" coords="683,152,750,177"/>
<area shape="rect" href="list_8h.html" title=" " alt="" coords="560,152,609,177"/>
</map>
</div>
</div>
<p><a href="ide_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structata__disk.html">ata_disk</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An ATA device.  <a href="structata__disk.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structchannel.html">channel</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An ATA channel (aka controller).  <a href="structchannel.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4063badbb8a8ae2e44ae6d2099b5f0d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a4063badbb8a8ae2e44ae6d2099b5f0d3">reg_data</a>(CHANNEL)&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 0)</td></tr>
<tr class="memdesc:a4063badbb8a8ae2e44ae6d2099b5f0d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The code in this file is an interface to an ATA (IDE) controller.  <a href="ide_8c.html#a4063badbb8a8ae2e44ae6d2099b5f0d3">More...</a><br /></td></tr>
<tr class="separator:a4063badbb8a8ae2e44ae6d2099b5f0d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4452e5ae677c19dae7868616be5b25a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#ab4452e5ae677c19dae7868616be5b25a">reg_error</a>(CHANNEL)&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 1)</td></tr>
<tr class="memdesc:ab4452e5ae677c19dae7868616be5b25a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error.  <a href="ide_8c.html#ab4452e5ae677c19dae7868616be5b25a">More...</a><br /></td></tr>
<tr class="separator:ab4452e5ae677c19dae7868616be5b25a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5552d25f2cceca35f1390ec81072263c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a5552d25f2cceca35f1390ec81072263c">reg_nsect</a>(CHANNEL)&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 2)</td></tr>
<tr class="memdesc:a5552d25f2cceca35f1390ec81072263c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sector Count.  <a href="ide_8c.html#a5552d25f2cceca35f1390ec81072263c">More...</a><br /></td></tr>
<tr class="separator:a5552d25f2cceca35f1390ec81072263c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4779eaf99f72f15a3de118f1b32ffd2d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a4779eaf99f72f15a3de118f1b32ffd2d">reg_lbal</a>(CHANNEL)&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 3)</td></tr>
<tr class="memdesc:a4779eaf99f72f15a3de118f1b32ffd2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">LBA 0:7.  <a href="ide_8c.html#a4779eaf99f72f15a3de118f1b32ffd2d">More...</a><br /></td></tr>
<tr class="separator:a4779eaf99f72f15a3de118f1b32ffd2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af48b9ab28b218aaf86755ced4db35aa1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#af48b9ab28b218aaf86755ced4db35aa1">reg_lbam</a>(CHANNEL)&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 4)</td></tr>
<tr class="memdesc:af48b9ab28b218aaf86755ced4db35aa1"><td class="mdescLeft">&#160;</td><td class="mdescRight">LBA 15:8.  <a href="ide_8c.html#af48b9ab28b218aaf86755ced4db35aa1">More...</a><br /></td></tr>
<tr class="separator:af48b9ab28b218aaf86755ced4db35aa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bb66f5a8375377794d9895bf5f54b8f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a5bb66f5a8375377794d9895bf5f54b8f">reg_lbah</a>(CHANNEL)&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 5)</td></tr>
<tr class="memdesc:a5bb66f5a8375377794d9895bf5f54b8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">LBA 23:16.  <a href="ide_8c.html#a5bb66f5a8375377794d9895bf5f54b8f">More...</a><br /></td></tr>
<tr class="separator:a5bb66f5a8375377794d9895bf5f54b8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bd78e11470d9a7ffb6d720c9c3801b6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a1bd78e11470d9a7ffb6d720c9c3801b6">reg_device</a>(CHANNEL)&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 6)</td></tr>
<tr class="memdesc:a1bd78e11470d9a7ffb6d720c9c3801b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Device/LBA 27:24.  <a href="ide_8c.html#a1bd78e11470d9a7ffb6d720c9c3801b6">More...</a><br /></td></tr>
<tr class="separator:a1bd78e11470d9a7ffb6d720c9c3801b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77237dcfa9c18241804aeb5f1a75d030"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a77237dcfa9c18241804aeb5f1a75d030">reg_status</a>(CHANNEL)&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 7)</td></tr>
<tr class="memdesc:a77237dcfa9c18241804aeb5f1a75d030"><td class="mdescLeft">&#160;</td><td class="mdescRight">Status (r/o).  <a href="ide_8c.html#a77237dcfa9c18241804aeb5f1a75d030">More...</a><br /></td></tr>
<tr class="separator:a77237dcfa9c18241804aeb5f1a75d030"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab99d71cce46b6e27fe03ca023d48056c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#ab99d71cce46b6e27fe03ca023d48056c">reg_command</a>(CHANNEL)&#160;&#160;&#160;<a class="el" href="ide_8c.html#a77237dcfa9c18241804aeb5f1a75d030">reg_status</a> (CHANNEL)</td></tr>
<tr class="memdesc:ab99d71cce46b6e27fe03ca023d48056c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command (w/o).  <a href="ide_8c.html#ab99d71cce46b6e27fe03ca023d48056c">More...</a><br /></td></tr>
<tr class="separator:ab99d71cce46b6e27fe03ca023d48056c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a34473ff78753fa67a09fc8f34f3b81"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a0a34473ff78753fa67a09fc8f34f3b81">reg_ctl</a>(CHANNEL)&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 0x206)</td></tr>
<tr class="memdesc:a0a34473ff78753fa67a09fc8f34f3b81"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA control block port addresses.  <a href="ide_8c.html#a0a34473ff78753fa67a09fc8f34f3b81">More...</a><br /></td></tr>
<tr class="separator:a0a34473ff78753fa67a09fc8f34f3b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87589b087951334b384d285e1bf486c9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a87589b087951334b384d285e1bf486c9">reg_alt_status</a>(CHANNEL)&#160;&#160;&#160;<a class="el" href="ide_8c.html#a0a34473ff78753fa67a09fc8f34f3b81">reg_ctl</a> (CHANNEL)</td></tr>
<tr class="memdesc:a87589b087951334b384d285e1bf486c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alt Status (r/o).  <a href="ide_8c.html#a87589b087951334b384d285e1bf486c9">More...</a><br /></td></tr>
<tr class="separator:a87589b087951334b384d285e1bf486c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d568d02d45d914c5839758673f0ece0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a9d568d02d45d914c5839758673f0ece0">STA_BSY</a>&#160;&#160;&#160;0x80</td></tr>
<tr class="memdesc:a9d568d02d45d914c5839758673f0ece0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alternate Status Register bits.  <a href="ide_8c.html#a9d568d02d45d914c5839758673f0ece0">More...</a><br /></td></tr>
<tr class="separator:a9d568d02d45d914c5839758673f0ece0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b14630ab1ade3cf9a53d8876f7288db"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a8b14630ab1ade3cf9a53d8876f7288db">STA_DRDY</a>&#160;&#160;&#160;0x40</td></tr>
<tr class="memdesc:a8b14630ab1ade3cf9a53d8876f7288db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Device Ready.  <a href="ide_8c.html#a8b14630ab1ade3cf9a53d8876f7288db">More...</a><br /></td></tr>
<tr class="separator:a8b14630ab1ade3cf9a53d8876f7288db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92e968805f523a6eecdec3b1fe6ccbab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a92e968805f523a6eecdec3b1fe6ccbab">STA_DRQ</a>&#160;&#160;&#160;0x08</td></tr>
<tr class="memdesc:a92e968805f523a6eecdec3b1fe6ccbab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data Request.  <a href="ide_8c.html#a92e968805f523a6eecdec3b1fe6ccbab">More...</a><br /></td></tr>
<tr class="separator:a92e968805f523a6eecdec3b1fe6ccbab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20d55587e2b43fed1168972dcc963728"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a20d55587e2b43fed1168972dcc963728">CTL_SRST</a>&#160;&#160;&#160;0x04</td></tr>
<tr class="memdesc:a20d55587e2b43fed1168972dcc963728"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control Register bits.  <a href="ide_8c.html#a20d55587e2b43fed1168972dcc963728">More...</a><br /></td></tr>
<tr class="separator:a20d55587e2b43fed1168972dcc963728"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a980214a3ca249c5c0956b189e47a56f2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a980214a3ca249c5c0956b189e47a56f2">DEV_MBS</a>&#160;&#160;&#160;0xa0</td></tr>
<tr class="memdesc:a980214a3ca249c5c0956b189e47a56f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Device Register bits.  <a href="ide_8c.html#a980214a3ca249c5c0956b189e47a56f2">More...</a><br /></td></tr>
<tr class="separator:a980214a3ca249c5c0956b189e47a56f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a8db654ddff6915da10cc09d0e14771"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a3a8db654ddff6915da10cc09d0e14771">DEV_LBA</a>&#160;&#160;&#160;0x40</td></tr>
<tr class="memdesc:a3a8db654ddff6915da10cc09d0e14771"><td class="mdescLeft">&#160;</td><td class="mdescRight">Linear based addressing.  <a href="ide_8c.html#a3a8db654ddff6915da10cc09d0e14771">More...</a><br /></td></tr>
<tr class="separator:a3a8db654ddff6915da10cc09d0e14771"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a229d9c672119c31246cb5a46955252d0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a229d9c672119c31246cb5a46955252d0">DEV_DEV</a>&#160;&#160;&#160;0x10</td></tr>
<tr class="memdesc:a229d9c672119c31246cb5a46955252d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select device: 0=master, 1=slave.  <a href="ide_8c.html#a229d9c672119c31246cb5a46955252d0">More...</a><br /></td></tr>
<tr class="separator:a229d9c672119c31246cb5a46955252d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34785bd459d404747354fc4c5da3eeb2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a34785bd459d404747354fc4c5da3eeb2">CMD_IDENTIFY_DEVICE</a>&#160;&#160;&#160;0xec</td></tr>
<tr class="memdesc:a34785bd459d404747354fc4c5da3eeb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Commands.  <a href="ide_8c.html#a34785bd459d404747354fc4c5da3eeb2">More...</a><br /></td></tr>
<tr class="separator:a34785bd459d404747354fc4c5da3eeb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3249b993cd9bee1a522ab7fe4fa2875"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#ac3249b993cd9bee1a522ab7fe4fa2875">CMD_READ_SECTOR_RETRY</a>&#160;&#160;&#160;0x20</td></tr>
<tr class="memdesc:ac3249b993cd9bee1a522ab7fe4fa2875"><td class="mdescLeft">&#160;</td><td class="mdescRight">READ SECTOR with retries.  <a href="ide_8c.html#ac3249b993cd9bee1a522ab7fe4fa2875">More...</a><br /></td></tr>
<tr class="separator:ac3249b993cd9bee1a522ab7fe4fa2875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab693c8ade8ea06207282a120c6a95b49"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#ab693c8ade8ea06207282a120c6a95b49">CMD_WRITE_SECTOR_RETRY</a>&#160;&#160;&#160;0x30</td></tr>
<tr class="memdesc:ab693c8ade8ea06207282a120c6a95b49"><td class="mdescLeft">&#160;</td><td class="mdescRight">WRITE SECTOR with retries.  <a href="ide_8c.html#ab693c8ade8ea06207282a120c6a95b49">More...</a><br /></td></tr>
<tr class="separator:ab693c8ade8ea06207282a120c6a95b49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed31f8d4617249f3a96e6038e652194e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#aed31f8d4617249f3a96e6038e652194e">CHANNEL_CNT</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:aed31f8d4617249f3a96e6038e652194e"><td class="mdescLeft">&#160;</td><td class="mdescRight">We support the two "legacy" ATA channels found in a standard PC.  <a href="ide_8c.html#aed31f8d4617249f3a96e6038e652194e">More...</a><br /></td></tr>
<tr class="separator:aed31f8d4617249f3a96e6038e652194e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a03eb0d9954faefcc1634f76a286f78f5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a03eb0d9954faefcc1634f76a286f78f5">reset_channel</a> (struct <a class="el" href="structchannel.html">channel</a> *c)</td></tr>
<tr class="memdesc:a03eb0d9954faefcc1634f76a286f78f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets an ATA channel and waits for any devices present on it to finish the reset.  <a href="ide_8c.html#a03eb0d9954faefcc1634f76a286f78f5">More...</a><br /></td></tr>
<tr class="separator:a03eb0d9954faefcc1634f76a286f78f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb1b543e585d7b5757bf9406b8705349"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#afb1b543e585d7b5757bf9406b8705349">check_device_type</a> (struct <a class="el" href="structata__disk.html">ata_disk</a> *d)</td></tr>
<tr class="memdesc:afb1b543e585d7b5757bf9406b8705349"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether device D is an ATA disk and sets D's is_ata member appropriately.  <a href="ide_8c.html#afb1b543e585d7b5757bf9406b8705349">More...</a><br /></td></tr>
<tr class="separator:afb1b543e585d7b5757bf9406b8705349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcd1cfa04037980c000c94c826517759"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#afcd1cfa04037980c000c94c826517759">identify_ata_device</a> (struct <a class="el" href="structata__disk.html">ata_disk</a> *d)</td></tr>
<tr class="memdesc:afcd1cfa04037980c000c94c826517759"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an IDENTIFY DEVICE command to disk D and reads the response.  <a href="ide_8c.html#afcd1cfa04037980c000c94c826517759">More...</a><br /></td></tr>
<tr class="separator:afcd1cfa04037980c000c94c826517759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7c31783f9f455b20c35d43f46ee03d8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#ad7c31783f9f455b20c35d43f46ee03d8">select_sector</a> (struct <a class="el" href="structata__disk.html">ata_disk</a> *d, <a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a> sec_no)</td></tr>
<tr class="memdesc:ad7c31783f9f455b20c35d43f46ee03d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects device D, waiting for it to become ready, and then writes SEC_NO to the disk's sector selection registers.  <a href="ide_8c.html#ad7c31783f9f455b20c35d43f46ee03d8">More...</a><br /></td></tr>
<tr class="separator:ad7c31783f9f455b20c35d43f46ee03d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdfc60cf49c8edf42ed8d25b0d2b6314"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#acdfc60cf49c8edf42ed8d25b0d2b6314">issue_pio_command</a> (struct <a class="el" href="structchannel.html">channel</a> *c, <a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> command)</td></tr>
<tr class="memdesc:acdfc60cf49c8edf42ed8d25b0d2b6314"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes COMMAND to channel C and prepares for receiving a completion interrupt.  <a href="ide_8c.html#acdfc60cf49c8edf42ed8d25b0d2b6314">More...</a><br /></td></tr>
<tr class="separator:acdfc60cf49c8edf42ed8d25b0d2b6314"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6e24dabc72eca487989a0d9b6fe1347"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#ad6e24dabc72eca487989a0d9b6fe1347">input_sector</a> (struct <a class="el" href="structchannel.html">channel</a> *c, void *sector)</td></tr>
<tr class="memdesc:ad6e24dabc72eca487989a0d9b6fe1347"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a sector from channel C's data register in PIO mode into SECTOR, which must have room for BLOCK_SECTOR_SIZE bytes.  <a href="ide_8c.html#ad6e24dabc72eca487989a0d9b6fe1347">More...</a><br /></td></tr>
<tr class="separator:ad6e24dabc72eca487989a0d9b6fe1347"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a825fd294c52f5c4983939b1d84607a61"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a825fd294c52f5c4983939b1d84607a61">output_sector</a> (struct <a class="el" href="structchannel.html">channel</a> *c, const void *sector)</td></tr>
<tr class="memdesc:a825fd294c52f5c4983939b1d84607a61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes SECTOR to channel C's data register in PIO mode.  <a href="ide_8c.html#a825fd294c52f5c4983939b1d84607a61">More...</a><br /></td></tr>
<tr class="separator:a825fd294c52f5c4983939b1d84607a61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac51161a8c0b58de728cb08a3ff722b0f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#ac51161a8c0b58de728cb08a3ff722b0f">wait_until_idle</a> (const struct <a class="el" href="structata__disk.html">ata_disk</a> *d)</td></tr>
<tr class="memdesc:ac51161a8c0b58de728cb08a3ff722b0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low-level ATA primitives.  <a href="ide_8c.html#ac51161a8c0b58de728cb08a3ff722b0f">More...</a><br /></td></tr>
<tr class="separator:ac51161a8c0b58de728cb08a3ff722b0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32d318073c2235e9b03bd77ed17ae580"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a32d318073c2235e9b03bd77ed17ae580">wait_while_busy</a> (const struct <a class="el" href="structata__disk.html">ata_disk</a> *d)</td></tr>
<tr class="memdesc:a32d318073c2235e9b03bd77ed17ae580"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait up to 30 seconds for disk D to clear BSY, and then return the status of the DRQ bit.  <a href="ide_8c.html#a32d318073c2235e9b03bd77ed17ae580">More...</a><br /></td></tr>
<tr class="separator:a32d318073c2235e9b03bd77ed17ae580"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7252ab4c28b6aed431703ba2b124e05e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a7252ab4c28b6aed431703ba2b124e05e">select_device</a> (const struct <a class="el" href="structata__disk.html">ata_disk</a> *d)</td></tr>
<tr class="memdesc:a7252ab4c28b6aed431703ba2b124e05e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Program D's channel so that D is now the selected disk.  <a href="ide_8c.html#a7252ab4c28b6aed431703ba2b124e05e">More...</a><br /></td></tr>
<tr class="separator:a7252ab4c28b6aed431703ba2b124e05e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d8393ec752f120abb30d97b14a69600"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a5d8393ec752f120abb30d97b14a69600">select_device_wait</a> (const struct <a class="el" href="structata__disk.html">ata_disk</a> *d)</td></tr>
<tr class="memdesc:a5d8393ec752f120abb30d97b14a69600"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select disk D in its channel, as <a class="el" href="ide_8c.html#a7252ab4c28b6aed431703ba2b124e05e" title="Program D&#39;s channel so that D is now the selected disk.">select_device()</a>, but wait for the channel to become idle before and after.  <a href="ide_8c.html#a5d8393ec752f120abb30d97b14a69600">More...</a><br /></td></tr>
<tr class="separator:a5d8393ec752f120abb30d97b14a69600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a968e89e258918c93a81618744b6c0e35"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a968e89e258918c93a81618744b6c0e35">interrupt_handler</a> (struct <a class="el" href="structintr__frame.html">intr_frame</a> *f)</td></tr>
<tr class="memdesc:a968e89e258918c93a81618744b6c0e35"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATA interrupt handler.  <a href="ide_8c.html#a968e89e258918c93a81618744b6c0e35">More...</a><br /></td></tr>
<tr class="separator:a968e89e258918c93a81618744b6c0e35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e8e1409e0675bdd93040403c52dd660"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a5e8e1409e0675bdd93040403c52dd660">ide_init</a> (void)</td></tr>
<tr class="memdesc:a5e8e1409e0675bdd93040403c52dd660"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the disk subsystem and detect disks.  <a href="ide_8c.html#a5e8e1409e0675bdd93040403c52dd660">More...</a><br /></td></tr>
<tr class="separator:a5e8e1409e0675bdd93040403c52dd660"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a992ae2a2f8f5e9dbaa54b2200a5e44"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a6a992ae2a2f8f5e9dbaa54b2200a5e44">descramble_ata_string</a> (char *, int size)</td></tr>
<tr class="memdesc:a6a992ae2a2f8f5e9dbaa54b2200a5e44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disk detection and identification.  <a href="ide_8c.html#a6a992ae2a2f8f5e9dbaa54b2200a5e44">More...</a><br /></td></tr>
<tr class="separator:a6a992ae2a2f8f5e9dbaa54b2200a5e44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc9cbaf0892e023867624dca21f5bfa2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2">ide_read</a> (void *d_, <a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a> sec_no, void *<a class="el" href="input_8c.html#a02352b0fa3692f7c9029b2e12edcdbb6">buffer</a>)</td></tr>
<tr class="memdesc:afc9cbaf0892e023867624dca21f5bfa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes.  <a href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2">More...</a><br /></td></tr>
<tr class="separator:afc9cbaf0892e023867624dca21f5bfa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a968318bffbdf3ecb701360fc0ed9cf49"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49">ide_write</a> (void *d_, <a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a> sec_no, const void *<a class="el" href="input_8c.html#a02352b0fa3692f7c9029b2e12edcdbb6">buffer</a>)</td></tr>
<tr class="memdesc:a968318bffbdf3ecb701360fc0ed9cf49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes.  <a href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49">More...</a><br /></td></tr>
<tr class="separator:a968318bffbdf3ecb701360fc0ed9cf49"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae81c6d1c941d4f5fac5cfd5c2a26283c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structchannel.html">channel</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#ae81c6d1c941d4f5fac5cfd5c2a26283c">channels</a> [<a class="el" href="ide_8c.html#aed31f8d4617249f3a96e6038e652194e">CHANNEL_CNT</a>]</td></tr>
<tr class="separator:ae81c6d1c941d4f5fac5cfd5c2a26283c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a023601e9a8f1fc769aa9d2243f10ed95"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structblock__operations.html">block_operations</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ide_8c.html#a023601e9a8f1fc769aa9d2243f10ed95">ide_operations</a></td></tr>
<tr class="separator:a023601e9a8f1fc769aa9d2243f10ed95"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aed31f8d4617249f3a96e6038e652194e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed31f8d4617249f3a96e6038e652194e">&#9670;&nbsp;</a></span>CHANNEL_CNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHANNEL_CNT&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>We support the two "legacy" ATA channels found in a standard PC. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00079">79</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="a34785bd459d404747354fc4c5da3eeb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34785bd459d404747354fc4c5da3eeb2">&#9670;&nbsp;</a></span>CMD_IDENTIFY_DEVICE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CMD_IDENTIFY_DEVICE&#160;&#160;&#160;0xec</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Commands. </p>
<p>Many more are defined but this is the small subset that we use. IDENTIFY DEVICE. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00049">49</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="ac3249b993cd9bee1a522ab7fe4fa2875"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3249b993cd9bee1a522ab7fe4fa2875">&#9670;&nbsp;</a></span>CMD_READ_SECTOR_RETRY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CMD_READ_SECTOR_RETRY&#160;&#160;&#160;0x20</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>READ SECTOR with retries. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00050">50</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="ab693c8ade8ea06207282a120c6a95b49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab693c8ade8ea06207282a120c6a95b49">&#9670;&nbsp;</a></span>CMD_WRITE_SECTOR_RETRY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CMD_WRITE_SECTOR_RETRY&#160;&#160;&#160;0x30</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>WRITE SECTOR with retries. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00051">51</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="a20d55587e2b43fed1168972dcc963728"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20d55587e2b43fed1168972dcc963728">&#9670;&nbsp;</a></span>CTL_SRST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CTL_SRST&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Control Register bits. </p>
<p>Software Reset. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00039">39</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="a229d9c672119c31246cb5a46955252d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a229d9c672119c31246cb5a46955252d0">&#9670;&nbsp;</a></span>DEV_DEV</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEV_DEV&#160;&#160;&#160;0x10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Select device: 0=master, 1=slave. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00044">44</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="a3a8db654ddff6915da10cc09d0e14771"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a8db654ddff6915da10cc09d0e14771">&#9670;&nbsp;</a></span>DEV_LBA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEV_LBA&#160;&#160;&#160;0x40</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Linear based addressing. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00043">43</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="a980214a3ca249c5c0956b189e47a56f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a980214a3ca249c5c0956b189e47a56f2">&#9670;&nbsp;</a></span>DEV_MBS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEV_MBS&#160;&#160;&#160;0xa0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Device Register bits. </p>
<p>Must be set. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00042">42</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="a87589b087951334b384d285e1bf486c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87589b087951334b384d285e1bf486c9">&#9670;&nbsp;</a></span>reg_alt_status</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define reg_alt_status</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">CHANNEL</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="ide_8c.html#a0a34473ff78753fa67a09fc8f34f3b81">reg_ctl</a> (CHANNEL)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alt Status (r/o). </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00031">31</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="ab99d71cce46b6e27fe03ca023d48056c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab99d71cce46b6e27fe03ca023d48056c">&#9670;&nbsp;</a></span>reg_command</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define reg_command</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">CHANNEL</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="ide_8c.html#a77237dcfa9c18241804aeb5f1a75d030">reg_status</a> (CHANNEL)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Command (w/o). </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00025">25</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="a0a34473ff78753fa67a09fc8f34f3b81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a34473ff78753fa67a09fc8f34f3b81">&#9670;&nbsp;</a></span>reg_ctl</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define reg_ctl</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">CHANNEL</td><td>)</td>
          <td>&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 0x206)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ATA control block port addresses. </p>
<p>(If we supported non-legacy ATA controllers this would not be flexible enough, but it's fine for what we do.) Control (w/o). </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00030">30</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="a4063badbb8a8ae2e44ae6d2099b5f0d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4063badbb8a8ae2e44ae6d2099b5f0d3">&#9670;&nbsp;</a></span>reg_data</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define reg_data</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">CHANNEL</td><td>)</td>
          <td>&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The code in this file is an interface to an ATA (IDE) controller. </p>
<p>It attempts to comply to [ATA-3]. ATA command block port addresses. Data. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00017">17</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="a1bd78e11470d9a7ffb6d720c9c3801b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bd78e11470d9a7ffb6d720c9c3801b6">&#9670;&nbsp;</a></span>reg_device</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define reg_device</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">CHANNEL</td><td>)</td>
          <td>&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 6)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Device/LBA 27:24. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00023">23</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="ab4452e5ae677c19dae7868616be5b25a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4452e5ae677c19dae7868616be5b25a">&#9670;&nbsp;</a></span>reg_error</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define reg_error</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">CHANNEL</td><td>)</td>
          <td>&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Error. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00018">18</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="a5bb66f5a8375377794d9895bf5f54b8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bb66f5a8375377794d9895bf5f54b8f">&#9670;&nbsp;</a></span>reg_lbah</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define reg_lbah</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">CHANNEL</td><td>)</td>
          <td>&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 5)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>LBA 23:16. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00022">22</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="a4779eaf99f72f15a3de118f1b32ffd2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4779eaf99f72f15a3de118f1b32ffd2d">&#9670;&nbsp;</a></span>reg_lbal</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define reg_lbal</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">CHANNEL</td><td>)</td>
          <td>&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 3)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>LBA 0:7. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00020">20</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="af48b9ab28b218aaf86755ced4db35aa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af48b9ab28b218aaf86755ced4db35aa1">&#9670;&nbsp;</a></span>reg_lbam</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define reg_lbam</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">CHANNEL</td><td>)</td>
          <td>&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 4)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>LBA 15:8. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00021">21</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="a5552d25f2cceca35f1390ec81072263c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5552d25f2cceca35f1390ec81072263c">&#9670;&nbsp;</a></span>reg_nsect</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define reg_nsect</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">CHANNEL</td><td>)</td>
          <td>&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sector Count. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00019">19</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="a77237dcfa9c18241804aeb5f1a75d030"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77237dcfa9c18241804aeb5f1a75d030">&#9670;&nbsp;</a></span>reg_status</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define reg_status</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">CHANNEL</td><td>)</td>
          <td>&#160;&#160;&#160;((CHANNEL)-&gt;reg_base + 7)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Status (r/o). </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00024">24</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="a9d568d02d45d914c5839758673f0ece0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d568d02d45d914c5839758673f0ece0">&#9670;&nbsp;</a></span>STA_BSY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STA_BSY&#160;&#160;&#160;0x80</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alternate Status Register bits. </p>
<p>Busy. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00034">34</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="a8b14630ab1ade3cf9a53d8876f7288db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b14630ab1ade3cf9a53d8876f7288db">&#9670;&nbsp;</a></span>STA_DRDY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STA_DRDY&#160;&#160;&#160;0x40</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Device Ready. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00035">35</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<a id="a92e968805f523a6eecdec3b1fe6ccbab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92e968805f523a6eecdec3b1fe6ccbab">&#9670;&nbsp;</a></span>STA_DRQ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STA_DRQ&#160;&#160;&#160;0x08</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Data Request. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00036">36</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="afb1b543e585d7b5757bf9406b8705349"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb1b543e585d7b5757bf9406b8705349">&#9670;&nbsp;</a></span>check_device_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> check_device_type </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structata__disk.html">ata_disk</a> *&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks whether device D is an ATA disk and sets D's is_ata member appropriately. </p>
<p>If D is device 0 (master), returns true if it's possible that a slave (device 1) exists on this channel. If D is device 1 (slave), the return value is not meaningful. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00230">230</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">References <a class="el" href="ide_8c_source.html#l00057">ata_disk::channel</a>, <a class="el" href="ide_8c_source.html#l00058">ata_disk::dev_no</a>, <a class="el" href="io_8h_source.html#l00009">inb()</a>, <a class="el" href="ide_8c_source.html#l00059">ata_disk::is_ata</a>, <a class="el" href="ide_8c_source.html#l00018">reg_error</a>, <a class="el" href="ide_8c_source.html#l00022">reg_lbah</a>, <a class="el" href="ide_8c_source.html#l00021">reg_lbam</a>, <a class="el" href="ide_8c_source.html#l00024">reg_status</a>, <a class="el" href="ide_8c_source.html#l00484">select_device()</a>, <a class="el" href="ide_8c_source.html#l00034">STA_BSY</a>, and <a class="el" href="ide_8c_source.html#l00035">STA_DRDY</a>.</p>

<p class="reference">Referenced by <a class="el" href="ide_8c_source.html#l00102">ide_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_afb1b543e585d7b5757bf9406b8705349_cgraph.png" border="0" usemap="#ide_8c_afb1b543e585d7b5757bf9406b8705349_cgraph" alt=""/></div>
<map name="ide_8c_afb1b543e585d7b5757bf9406b8705349_cgraph" id="ide_8c_afb1b543e585d7b5757bf9406b8705349_cgraph">
<area shape="rect" title="Checks whether device D is an ATA disk and sets D&#39;s is_ata member appropriately." alt="" coords="5,1135,140,1160"/>
<area shape="rect" href="io_8h.html#a0223c8898dfec29069879dc51076e28a" title="Reads and returns a byte from PORT." alt="" coords="367,1109,407,1135"/>
<area shape="rect" href="ide_8c.html#a7252ab4c28b6aed431703ba2b124e05e" title="Program D&#39;s channel so that D is now the selected disk." alt="" coords="188,1160,290,1185"/>
<area shape="rect" href="io_8h.html#a903c588b94e0e8386c8a6f8caa4a5a72" title="Writes byte DATA to PORT." alt="" coords="363,1208,411,1233"/>
<area shape="rect" href="timer_8c.html#a5d4df9c9580a97f5eee2e70ae8ad43a0" title="Sleeps for approximately NS nanoseconds." alt="" coords="338,1159,436,1184"/>
<area shape="rect" href="timer_8c.html#a9bd10eb80561359273e022f4c80b483f" title="Sleep for approximately NUM/DENOM seconds." alt="" coords="484,1159,599,1184"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1458,981,1558,1007"/>
<area shape="rect" href="timer_8c.html#a28553fa387ff127de26e330dfcfe9fa1" title="Busy&#45;wait for approximately NUM/DENOM seconds." alt="" coords="647,1209,763,1235"/>
<area shape="rect" href="timer_8c.html#aa24fbc19fb550d9efd5cabd97489a399" title="Sleeps for approximately TICKS timer ticks." alt="" coords="660,1057,750,1083"/>
<area shape="rect" href="timer_8c.html#a804190f8e66f39ac2ddb5891de3eec73" title="Iterates through a simple loop LOOPS times, for implementing brief delays." alt="" coords="823,1209,904,1235"/>
<area shape="rect" href="thread_8c.html#aaa9229e0f462f60bb9550919fa3d7699" title="Yields the CPU." alt="" coords="964,905,1058,931"/>
<area shape="rect" href="timer_8c.html#a58f1f79abf9bc0515a305ba89c58b9fa" title="Returns the number of timer ticks elapsed since THEN, which should be a value once returned by timer_..." alt="" coords="811,1057,916,1083"/>
<area shape="rect" href="timer_8c.html#a2b50be77101b38176d21b52cc425cf3e" title="Returns the number of timer ticks since the OS booted." alt="" coords="968,1032,1053,1057"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1463,919,1553,944"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1281,1007,1371,1032"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1106,956,1206,981"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1453,31,1563,56"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1118,731,1193,756"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1822,555,1930,580"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1282,957,1370,983"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="2019,31,2086,56"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1649,31,1727,56"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1836,80,1915,105"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1848,31,1903,56"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="2015,516,2091,541"/>
<area shape="rect" href="intq_8c.html#ac473f50d2829cba1321d34a57c425042" title="Returns the position after POS within an intq." alt="" coords="1303,805,1349,831"/>
<area shape="rect" href="thread_8c.html#ace7a46dcf0f5c9c4cbb8f47a5b3c76f5" title="Chooses and returns the next thread to be scheduled." alt="" coords="1257,180,1394,205"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1997,705,2108,731"/>
<area shape="rect" href="switch_8h.html#aa804e4fa090f4acb6a73b98f64b81cff" title="Switches from CUR, which must be the running thread, to NEXT, which must also be running switch_threa..." alt="" coords="1271,756,1381,781"/>
<area shape="rect" href="thread_8c.html#acbbd25908c41e62d44a179cfbc3962e2" title="Completes a thread switch by activating the new thread&#39;s page tables, and, if the previous thread is ..." alt="" coords="1254,655,1398,680"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1835,129,1916,155"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1457,129,1559,155"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="2014,129,2092,155"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="1652,129,1724,155"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1643,80,1732,105"/>
<area shape="rect" href="vaddr_8h.html#a5a07aa5a4d70694db19884626f4b0fa3" title="Round down to nearest page boundary." alt="" coords="2160,705,2277,731"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="1446,605,1570,631"/>
<area shape="rect" href="process_8c.html#a23823b283ef2815ecc5ae19e772dac24" title="Sets up the CPU for running user code in the current thread." alt="" coords="1447,655,1569,680"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="1618,329,1758,355"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1835,280,1917,305"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1806,329,1946,355"/>
<area shape="rect" href="string_8c.html#ab1e7a2e7d71d61a771b43da7c18fdba6" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1841,428,1910,453"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1817,179,1934,204"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="2024,204,2082,229"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1845,379,1906,404"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1994,280,2112,305"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="2010,329,2096,355"/>
<area shape="rect" href="pagedir_8c.html#ac0a75950cc56724fef94d224df4b0cd0" title="Loads page directory PD into the CPU&#39;s page directory base register." alt="" coords="1628,655,1747,680"/>
<area shape="rect" href="tss_8c.html#a089f0d1278964a0cc36f92d47febd2d4" title="Sets the ring 0 stack pointer in the TSS to point to the end of the thread stack." alt="" coords="1644,605,1731,631"/>
<area shape="rect" href="vaddr_8h.html#a0f6ff2f4a18892d83d6e1c1a3c2d9f9b" title="Returns physical address at which kernel virtual address VADDR is mapped." alt="" coords="1852,655,1899,680"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_afb1b543e585d7b5757bf9406b8705349_icgraph.png" border="0" usemap="#ide_8c_afb1b543e585d7b5757bf9406b8705349_icgraph" alt=""/></div>
<map name="ide_8c_afb1b543e585d7b5757bf9406b8705349_icgraph" id="ide_8c_afb1b543e585d7b5757bf9406b8705349_icgraph">
<area shape="rect" title="Checks whether device D is an ATA disk and sets D&#39;s is_ata member appropriately." alt="" coords="246,5,381,31"/>
<area shape="rect" href="ide_8h.html#a5e8e1409e0675bdd93040403c52dd660" title="devices/ide.h" alt="" coords="135,5,198,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
</map>
</div>

</div>
</div>
<a id="a6a992ae2a2f8f5e9dbaa54b2200a5e44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a992ae2a2f8f5e9dbaa54b2200a5e44">&#9670;&nbsp;</a></span>descramble_ata_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * descramble_ata_string </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Disk detection and identification. </p>
<p>Translates STRING, which consists of SIZE bytes in a funky format, into a null-terminated string in-place.</p>
<p>Drops trailing whitespace and null bytes. Returns STRING. <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00316">316</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">References <a class="el" href="ctype_8h_source.html#l00012">isspace()</a>, and <a class="el" href="block_8c_source.html#l00015">block::size</a>.</p>

<p class="reference">Referenced by <a class="el" href="ide_8c_source.html#l00260">identify_ata_device()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a6a992ae2a2f8f5e9dbaa54b2200a5e44_cgraph.png" border="0" usemap="#ide_8c_a6a992ae2a2f8f5e9dbaa54b2200a5e44_cgraph" alt=""/></div>
<map name="ide_8c_a6a992ae2a2f8f5e9dbaa54b2200a5e44_cgraph" id="ide_8c_a6a992ae2a2f8f5e9dbaa54b2200a5e44_cgraph">
<area shape="rect" title="Disk detection and identification." alt="" coords="5,5,162,31"/>
<area shape="rect" href="ctype_8h.html#a9318513eb3136e55002d65bf602f74a7" title=" " alt="" coords="210,5,276,31"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a6a992ae2a2f8f5e9dbaa54b2200a5e44_icgraph.png" border="0" usemap="#ide_8c_a6a992ae2a2f8f5e9dbaa54b2200a5e44_icgraph" alt=""/></div>
<map name="ide_8c_a6a992ae2a2f8f5e9dbaa54b2200a5e44_icgraph" id="ide_8c_a6a992ae2a2f8f5e9dbaa54b2200a5e44_icgraph">
<area shape="rect" title="Disk detection and identification." alt="" coords="430,5,586,31"/>
<area shape="rect" href="ide_8c.html#afcd1cfa04037980c000c94c826517759" title="Sends an IDENTIFY DEVICE command to disk D and reads the response." alt="" coords="246,5,382,31"/>
<area shape="rect" href="ide_8h.html#a5e8e1409e0675bdd93040403c52dd660" title="devices/ide.h" alt="" coords="135,5,198,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
</map>
</div>

</div>
</div>
<a id="a5e8e1409e0675bdd93040403c52dd660"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e8e1409e0675bdd93040403c52dd660">&#9670;&nbsp;</a></span>ide_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ide_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the disk subsystem and detect disks. </p>
<p><a class="el" href="ide_8h.html">devices/ide.h</a> </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00102">102</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">References <a class="el" href="ide_8c_source.html#l00057">ata_disk::channel</a>, <a class="el" href="ide_8c_source.html#l00079">CHANNEL_CNT</a>, <a class="el" href="ide_8c_source.html#l00080">channels</a>, <a class="el" href="ide_8c_source.html#l00230">check_device_type()</a>, <a class="el" href="ide_8c_source.html#l00073">channel::completion_wait</a>, <a class="el" href="ide_8c_source.html#l00058">ata_disk::dev_no</a>, <a class="el" href="ide_8c_source.html#l00075">channel::devices</a>, <a class="el" href="ide_8c_source.html#l00071">channel::expecting_interrupt</a>, <a class="el" href="ide_8c_source.html#l00260">identify_ata_device()</a>, <a class="el" href="ide_8c_source.html#l00507">interrupt_handler()</a>, <a class="el" href="interrupt_8c_source.html#l00181">intr_register_ext()</a>, <a class="el" href="ide_8c_source.html#l00068">channel::irq</a>, <a class="el" href="ide_8c_source.html#l00059">ata_disk::is_ata</a>, <a class="el" href="ide_8c_source.html#l00070">channel::lock</a>, <a class="el" href="synch_8c_source.html#l00176">lock_init()</a>, <a class="el" href="ide_8c_source.html#l00056">ata_disk::name</a>, <a class="el" href="ide_8c_source.html#l00066">channel::name</a>, <a class="el" href="debug_8h_source.html#l00035">NOT_REACHED</a>, <a class="el" href="ide_8c_source.html#l00067">channel::reg_base</a>, <a class="el" href="ide_8c_source.html#l00165">reset_channel()</a>, <a class="el" href="synch_8c_source.html#l00045">sema_init()</a>, and <a class="el" href="lib_2stdio_8c_source.html#l00062">snprintf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="init_8c_source.html#l00073">pintos_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a5e8e1409e0675bdd93040403c52dd660_cgraph.png" border="0" usemap="#ide_8c_a5e8e1409e0675bdd93040403c52dd660_cgraph" alt=""/></div>
<map name="ide_8c_a5e8e1409e0675bdd93040403c52dd660_cgraph" id="ide_8c_a5e8e1409e0675bdd93040403c52dd660_cgraph">
<area shape="rect" title="Initialize the disk subsystem and detect disks." alt="" coords="5,876,69,901"/>
<area shape="rect" href="ide_8c.html#afb1b543e585d7b5757bf9406b8705349" title="Checks whether device D is an ATA disk and sets D&#39;s is_ata member appropriately." alt="" coords="311,107,446,132"/>
<area shape="rect" href="ide_8c.html#afcd1cfa04037980c000c94c826517759" title="Sends an IDENTIFY DEVICE command to disk D and reads the response." alt="" coords="117,839,252,864"/>
<area shape="rect" href="lib_2stdio_8c.html#a913035b9a30cd1b34c5e587dfbf26f92" title="Like printf(), except that output is stored into BUFFER, which must have space for BUF_SIZE character..." alt="" coords="346,1216,411,1241"/>
<area shape="rect" href="ide_8c.html#a968e89e258918c93a81618744b6c0e35" title="ATA interrupt handler." alt="" coords="317,459,440,484"/>
<area shape="rect" href="interrupt_8c.html#a38cd217e72ddb3f58db591a061c99691" title="Registers external interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes." alt="" coords="126,976,243,1001"/>
<area shape="rect" href="synch_8c.html#aa760472aa4916bba476b2165ea25b411" title="Initializes LOCK." alt="" coords="150,1225,219,1251"/>
<area shape="rect" href="synch_8c.html#a1349a31f4880cf4eae026761f0ab3343" title="This file is derived from source code for the Nachos instructional operating system." alt="" coords="339,1315,418,1340"/>
<area shape="rect" href="ide_8c.html#a03eb0d9954faefcc1634f76a286f78f5" title="Resets an ATA channel and waits for any devices present on it to finish the reset." alt="" coords="326,309,431,335"/>
<area shape="rect" href="io_8h.html#a0223c8898dfec29069879dc51076e28a" title="Reads and returns a byte from PORT." alt="" coords="775,183,814,208"/>
<area shape="rect" href="ide_8c.html#a7252ab4c28b6aed431703ba2b124e05e" title="Program D&#39;s channel so that D is now the selected disk." alt="" coords="547,5,649,31"/>
<area shape="rect" href="io_8h.html#a903c588b94e0e8386c8a6f8caa4a5a72" title="Writes byte DATA to PORT." alt="" coords="771,56,818,81"/>
<area shape="rect" href="timer_8c.html#a5d4df9c9580a97f5eee2e70ae8ad43a0" title="Sleeps for approximately NS nanoseconds." alt="" coords="746,7,844,32"/>
<area shape="rect" href="timer_8c.html#a9bd10eb80561359273e022f4c80b483f" title="Sleep for approximately NUM/DENOM seconds." alt="" coords="899,323,1014,348"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1219,487,1319,512"/>
<area shape="rect" href="block_8c.html#a2975afa33bd2e5caa0981756b2192f77" title="Registers a new block device with the given NAME." alt="" coords="326,889,431,915"/>
<area shape="rect" href="lib_2stdio_8c.html#a225f673cc2251206f9da043c5a55a80b" title="Prints SIZE, which represents a number of bytes, in a human&#45;readable format, e.g." alt="" coords="505,661,691,687"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="769,715,820,740"/>
<area shape="rect" href="ide_8c.html#a6a992ae2a2f8f5e9dbaa54b2200a5e44" title="Disk detection and identification." alt="" coords="300,1167,457,1192"/>
<area shape="rect" href="ide_8c.html#ad6e24dabc72eca487989a0d9b6fe1347" title="Reads a sector from channel C&#39;s data register in PIO mode into SECTOR, which must have room for BLOCK..." alt="" coords="332,1117,426,1143"/>
<area shape="rect" href="ide_8c.html#acdfc60cf49c8edf42ed8d25b0d2b6314" title="Writes COMMAND to channel C and prepares for receiving a completion interrupt." alt="" coords="526,411,669,436"/>
<area shape="rect" href="partition_8c.html#ae1af155dafc1e46f1725d8061189421a" title="Scans BLOCK for partitions of interest to Pintos." alt="" coords="326,825,431,851"/>
<area shape="rect" href="ide_8c.html#a5d8393ec752f120abb30d97b14a69600" title="Select disk D in its channel, as select_device(), but wait for the channel to become idle before and ..." alt="" coords="312,259,445,284"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="748,1063,841,1088"/>
<area shape="rect" href="ide_8c.html#a32d318073c2235e9b03bd77ed17ae580" title="Wait up to 30 seconds for disk D to clear BSY, and then return the status of the DRQ bit." alt="" coords="538,460,657,485"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="902,865,1012,891"/>
<area shape="rect" href="malloc_8c.html#a7ac38fce3243a7dcf448301ee9ffd392" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="765,863,825,888"/>
<area shape="rect" href="string_8c.html#a4637af6f79bac4043e1064f0837d0ddc" title="Copies string SRC to DST." alt="" coords="568,915,628,940"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="916,512,997,537"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="906,664,1007,689"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="928,715,986,740"/>
<area shape="rect" href="ctype_8h.html#a9318513eb3136e55002d65bf602f74a7" title=" " alt="" coords="564,1167,631,1192"/>
<area shape="rect" href="io_8h.html#a796ec08686cf1380808556b31cabc730" title="Reads CNT 16&#45;bit (halfword) units from PORT, one after another, and stores them into the buffer start..." alt="" coords="574,1117,622,1143"/>
<area shape="rect" href="block_8c.html#a805c68661c9837f08b82b27fb82b9f94" title="Returns BLOCK&#39;s name (e.g." alt="" coords="748,813,841,839"/>
<area shape="rect" href="partition_8c.html#a5723d235ee99ff5ebd79a4db49236237" title="Reads the partition table in the given SECTOR of BLOCK and scans it for partitions of interest to Pin..." alt="" coords="528,813,667,839"/>
<area shape="rect" href="ide_8c.html#ac51161a8c0b58de728cb08a3ff722b0f" title="Low&#45;level ATA primitives." alt="" coords="545,259,650,284"/>
<area shape="rect" href="timer_8c.html#ac386900a4e0ba0d6f338b8c5534776d1" title="Sleeps for approximately US microseconds." alt="" coords="746,309,844,335"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1071,1088,1162,1113"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1072,563,1161,588"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="907,613,1007,639"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="908,1037,1006,1063"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1062,987,1171,1012"/>
<area shape="rect" href="lib_2stdio_8c.html#a1286c6b071007938f54e9b859109f89d" title="Like vprintf(), except that output is stored into BUFFER, which must have space for BUF_SIZE characte..." alt="" coords="562,1216,633,1241"/>
<area shape="rect" href="timer_8c.html#a10cbeaa00e0ceb825ddd7a44724881c6" title="Sleeps for approximately MS milliseconds." alt="" coords="744,360,845,385"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="559,509,636,535"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="739,563,851,588"/>
<area shape="rect" href="interrupt_8c.html#a7e7d2edfe1ec7f51b54704080de2f4ca" title="Registers interrupt VEC_NO to invoke HANDLER with descriptor privilege level DPL." alt="" coords="320,1265,437,1291"/>
<area shape="rect" href="interrupt_8c.html#a75ac431d18ce7aff146bef22379c1dcd" title="Interrupt Descriptor Table helpers." alt="" coords="541,1265,654,1291"/>
<area shape="rect" href="interrupt_8c.html#a79e99b0236c49a7a12d52a2ec74fefa5" title="Creates a trap gate that invokes FUNCTION with the given DPL." alt="" coords="539,1315,656,1340"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a8aa862d10f52f7b0348fce990c7c12db" title="Initializes LIST as an empty list." alt="" coords="567,1364,629,1389"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a5e8e1409e0675bdd93040403c52dd660_icgraph.png" border="0" usemap="#ide_8c_a5e8e1409e0675bdd93040403c52dd660_icgraph" alt=""/></div>
<map name="ide_8c_a5e8e1409e0675bdd93040403c52dd660_icgraph" id="ide_8c_a5e8e1409e0675bdd93040403c52dd660_icgraph">
<area shape="rect" title="Initialize the disk subsystem and detect disks." alt="" coords="135,5,198,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
</map>
</div>

</div>
</div>
<a id="afc9cbaf0892e023867624dca21f5bfa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc9cbaf0892e023867624dca21f5bfa2">&#9670;&nbsp;</a></span>ide_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ide_read </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>d_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a>&#160;</td>
          <td class="paramname"><em>sec_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes. </p>
<p>Internally synchronizes accesses to disks, so external per-disk locking is unneeded. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00345">345</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">References <a class="el" href="input_8c_source.html#l00007">buffer</a>, <a class="el" href="ide_8c_source.html#l00057">ata_disk::channel</a>, <a class="el" href="ide_8c_source.html#l00050">CMD_READ_SECTOR_RETRY</a>, <a class="el" href="ide_8c_source.html#l00073">channel::completion_wait</a>, <a class="el" href="ide_8c_source.html#l00420">input_sector()</a>, <a class="el" href="ide_8c_source.html#l00407">issue_pio_command()</a>, <a class="el" href="ide_8c_source.html#l00070">channel::lock</a>, <a class="el" href="synch_8c_source.html#l00193">lock_acquire()</a>, <a class="el" href="synch_8c_source.html#l00229">lock_release()</a>, <a class="el" href="ide_8c_source.html#l00056">ata_disk::name</a>, <a class="el" href="debug_8h_source.html#l00014">PANIC</a>, <a class="el" href="block_8h_source.html#l00019">PRDSNu</a>, <a class="el" href="ide_8c_source.html#l00389">select_sector()</a>, <a class="el" href="synch_8c_source.html#l00061">sema_down()</a>, and <a class="el" href="ide_8c_source.html#l00460">wait_while_busy()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_afc9cbaf0892e023867624dca21f5bfa2_cgraph.png" border="0" usemap="#ide_8c_afc9cbaf0892e023867624dca21f5bfa2_cgraph" alt=""/></div>
<map name="ide_8c_afc9cbaf0892e023867624dca21f5bfa2_cgraph" id="ide_8c_afc9cbaf0892e023867624dca21f5bfa2_cgraph">
<area shape="rect" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="5,553,79,578"/>
<area shape="rect" href="ide_8c.html#ad6e24dabc72eca487989a0d9b6fe1347" title="Reads a sector from channel C&#39;s data register in PIO mode into SECTOR, which must have room for BLOCK..." alt="" coords="130,401,223,426"/>
<area shape="rect" href="ide_8c.html#acdfc60cf49c8edf42ed8d25b0d2b6314" title="Writes COMMAND to channel C and prepares for receiving a completion interrupt." alt="" coords="456,853,599,878"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1127,502,1223,527"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1298,551,1391,577"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="971,383,1067,409"/>
<area shape="rect" href="ide_8c.html#ad7c31783f9f455b20c35d43f46ee03d8" title="Selects device D, waiting for it to become ready, and then writes SEC_NO to the disk&#39;s sector selecti..." alt="" coords="127,709,226,734"/>
<area shape="rect" href="ide_8c.html#a32d318073c2235e9b03bd77ed17ae580" title="Wait up to 30 seconds for disk D to clear BSY, and then return the status of the DRQ bit." alt="" coords="468,641,587,666"/>
<area shape="rect" href="io_8h.html#a796ec08686cf1380808556b31cabc730" title="Reads CNT 16&#45;bit (halfword) units from PORT, one after another, and stores them into the buffer start..." alt="" coords="317,401,365,426"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1978,698,2079,723"/>
<area shape="rect" href="io_8h.html#a903c588b94e0e8386c8a6f8caa4a5a72" title="Writes byte DATA to PORT." alt="" coords="674,850,722,875"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1807,799,1898,825"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1271,181,1419,219"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1624,295,1732,321"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1815,346,1891,371"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1973,397,2084,422"/>
<area shape="rect" href="vaddr_8h.html#a5a07aa5a4d70694db19884626f4b0fa3" title="Round down to nearest page boundary." alt="" coords="2132,397,2249,422"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1634,498,1723,523"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1472,498,1572,523"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1467,245,1576,270"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1473,599,1570,625"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1635,549,1722,574"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="2431,218,2499,243"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1640,145,1717,170"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="2298,69,2377,94"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1825,145,1880,170"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1641,447,1716,473"/>
<area shape="rect" href="intq_8c.html#ac473f50d2829cba1321d34a57c425042" title="Returns the position after POS within an intq." alt="" coords="1829,546,1876,571"/>
<area shape="rect" href="thread_8c.html#ace7a46dcf0f5c9c4cbb8f47a5b3c76f5" title="Chooses and returns the next thread to be scheduled." alt="" coords="1784,194,1921,219"/>
<area shape="rect" href="switch_8h.html#aa804e4fa090f4acb6a73b98f64b81cff" title="Switches from CUR, which must be the running thread, to NEXT, which must also be running switch_threa..." alt="" coords="1797,497,1908,522"/>
<area shape="rect" href="thread_8c.html#acbbd25908c41e62d44a179cfbc3962e2" title="Completes a thread switch by activating the new thread&#39;s page tables, and, if the previous thread is ..." alt="" coords="1780,447,1925,473"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="2297,169,2378,194"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1978,119,2079,145"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="2426,169,2504,194"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="2154,143,2226,169"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="2146,94,2235,119"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1137,383,1213,409"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1289,383,1401,409"/>
<area shape="rect" href="ide_8c.html#a5d8393ec752f120abb30d97b14a69600" title="Select disk D in its channel, as select_device(), but wait for the channel to become idle before and ..." alt="" coords="274,709,408,734"/>
<area shape="rect" href="ide_8c.html#a7252ab4c28b6aed431703ba2b124e05e" title="Program D&#39;s channel so that D is now the selected disk." alt="" coords="476,751,579,777"/>
<area shape="rect" href="ide_8c.html#ac51161a8c0b58de728cb08a3ff722b0f" title="Low&#45;level ATA primitives." alt="" coords="475,702,580,727"/>
<area shape="rect" href="io_8h.html#a0223c8898dfec29069879dc51076e28a" title="Reads and returns a byte from PORT." alt="" coords="678,702,718,727"/>
<area shape="rect" href="timer_8c.html#a5d4df9c9580a97f5eee2e70ae8ad43a0" title="Sleeps for approximately NS nanoseconds." alt="" coords="649,801,747,826"/>
<area shape="rect" href="timer_8c.html#a9bd10eb80561359273e022f4c80b483f" title="Sleep for approximately NUM/DENOM seconds." alt="" coords="797,775,912,801"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="673,603,723,629"/>
<area shape="rect" href="timer_8c.html#ac386900a4e0ba0d6f338b8c5534776d1" title="Sleeps for approximately US microseconds." alt="" coords="649,751,747,777"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="826,603,883,629"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="983,653,1056,678"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="960,603,1079,629"/>
<area shape="rect" href="timer_8c.html#a10cbeaa00e0ceb825ddd7a44724881c6" title="Sleeps for approximately MS milliseconds." alt="" coords="647,653,749,678"/>
</map>
</div>

</div>
</div>
<a id="a968318bffbdf3ecb701360fc0ed9cf49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a968318bffbdf3ecb701360fc0ed9cf49">&#9670;&nbsp;</a></span>ide_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ide_write </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>d_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a>&#160;</td>
          <td class="paramname"><em>sec_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes. </p>
<p>Returns after the disk has acknowledged receiving the data. Internally synchronizes accesses to disks, so external per-disk locking is unneeded. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00365">365</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">References <a class="el" href="input_8c_source.html#l00007">buffer</a>, <a class="el" href="ide_8c_source.html#l00057">ata_disk::channel</a>, <a class="el" href="ide_8c_source.html#l00051">CMD_WRITE_SECTOR_RETRY</a>, <a class="el" href="ide_8c_source.html#l00073">channel::completion_wait</a>, <a class="el" href="ide_8c_source.html#l00407">issue_pio_command()</a>, <a class="el" href="ide_8c_source.html#l00070">channel::lock</a>, <a class="el" href="synch_8c_source.html#l00193">lock_acquire()</a>, <a class="el" href="synch_8c_source.html#l00229">lock_release()</a>, <a class="el" href="ide_8c_source.html#l00056">ata_disk::name</a>, <a class="el" href="ide_8c_source.html#l00428">output_sector()</a>, <a class="el" href="debug_8h_source.html#l00014">PANIC</a>, <a class="el" href="block_8h_source.html#l00019">PRDSNu</a>, <a class="el" href="ide_8c_source.html#l00389">select_sector()</a>, <a class="el" href="synch_8c_source.html#l00061">sema_down()</a>, and <a class="el" href="ide_8c_source.html#l00460">wait_while_busy()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a968318bffbdf3ecb701360fc0ed9cf49_cgraph.png" border="0" usemap="#ide_8c_a968318bffbdf3ecb701360fc0ed9cf49_cgraph" alt=""/></div>
<map name="ide_8c_a968318bffbdf3ecb701360fc0ed9cf49_cgraph" id="ide_8c_a968318bffbdf3ecb701360fc0ed9cf49_cgraph">
<area shape="rect" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="5,653,80,678"/>
<area shape="rect" href="ide_8c.html#acdfc60cf49c8edf42ed8d25b0d2b6314" title="Writes COMMAND to channel C and prepares for receiving a completion interrupt." alt="" coords="459,853,603,878"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1130,502,1226,527"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1302,550,1395,575"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="975,383,1071,409"/>
<area shape="rect" href="ide_8c.html#a825fd294c52f5c4983939b1d84607a61" title="Writes SECTOR to channel C&#39;s data register in PIO mode." alt="" coords="128,903,230,929"/>
<area shape="rect" href="ide_8c.html#ad7c31783f9f455b20c35d43f46ee03d8" title="Selects device D, waiting for it to become ready, and then writes SEC_NO to the disk&#39;s sector selecti..." alt="" coords="129,727,229,753"/>
<area shape="rect" href="ide_8c.html#a32d318073c2235e9b03bd77ed17ae580" title="Wait up to 30 seconds for disk D to clear BSY, and then return the status of the DRQ bit." alt="" coords="472,653,590,678"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1982,698,2082,723"/>
<area shape="rect" href="io_8h.html#a903c588b94e0e8386c8a6f8caa4a5a72" title="Writes byte DATA to PORT." alt="" coords="678,850,725,875"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1811,799,1901,825"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1274,181,1423,219"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1628,295,1736,321"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1818,346,1894,371"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1977,397,2088,422"/>
<area shape="rect" href="vaddr_8h.html#a5a07aa5a4d70694db19884626f4b0fa3" title="Round down to nearest page boundary." alt="" coords="2136,397,2253,422"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1637,498,1727,523"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1475,498,1575,523"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1471,245,1580,270"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1476,599,1574,625"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1638,549,1726,574"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="2435,218,2502,243"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1643,145,1721,170"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="2302,69,2381,94"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1829,145,1884,170"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1645,449,1719,474"/>
<area shape="rect" href="intq_8c.html#ac473f50d2829cba1321d34a57c425042" title="Returns the position after POS within an intq." alt="" coords="1833,546,1880,571"/>
<area shape="rect" href="thread_8c.html#ace7a46dcf0f5c9c4cbb8f47a5b3c76f5" title="Chooses and returns the next thread to be scheduled." alt="" coords="1788,194,1925,219"/>
<area shape="rect" href="switch_8h.html#aa804e4fa090f4acb6a73b98f64b81cff" title="Switches from CUR, which must be the running thread, to NEXT, which must also be running switch_threa..." alt="" coords="1801,497,1911,522"/>
<area shape="rect" href="thread_8c.html#acbbd25908c41e62d44a179cfbc3962e2" title="Completes a thread switch by activating the new thread&#39;s page tables, and, if the previous thread is ..." alt="" coords="1784,447,1929,473"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="2301,169,2382,194"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1981,119,2083,145"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="2430,169,2508,194"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="2158,143,2230,169"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="2149,94,2239,119"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1140,383,1216,409"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1292,383,1405,409"/>
<area shape="rect" href="io_8h.html#a15c5b7146a500280afa7fc8dded78b49" title="Writes to PORT each 16&#45;bit unit (halfword) of data in the CNT&#45;halfword buffer starting at ADDR." alt="" coords="317,903,373,929"/>
<area shape="rect" href="ide_8c.html#a5d8393ec752f120abb30d97b14a69600" title="Select disk D in its channel, as select_device(), but wait for the channel to become idle before and ..." alt="" coords="278,727,411,753"/>
<area shape="rect" href="ide_8c.html#a7252ab4c28b6aed431703ba2b124e05e" title="Program D&#39;s channel so that D is now the selected disk." alt="" coords="480,751,582,777"/>
<area shape="rect" href="ide_8c.html#ac51161a8c0b58de728cb08a3ff722b0f" title="Low&#45;level ATA primitives." alt="" coords="479,702,584,727"/>
<area shape="rect" href="io_8h.html#a0223c8898dfec29069879dc51076e28a" title="Reads and returns a byte from PORT." alt="" coords="682,702,721,727"/>
<area shape="rect" href="timer_8c.html#a5d4df9c9580a97f5eee2e70ae8ad43a0" title="Sleeps for approximately NS nanoseconds." alt="" coords="653,801,751,826"/>
<area shape="rect" href="timer_8c.html#a9bd10eb80561359273e022f4c80b483f" title="Sleep for approximately NUM/DENOM seconds." alt="" coords="800,777,916,802"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="676,603,727,629"/>
<area shape="rect" href="timer_8c.html#ac386900a4e0ba0d6f338b8c5534776d1" title="Sleeps for approximately US microseconds." alt="" coords="653,751,751,777"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="829,603,887,629"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="987,653,1059,678"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="964,603,1082,629"/>
<area shape="rect" href="timer_8c.html#a10cbeaa00e0ceb825ddd7a44724881c6" title="Sleeps for approximately MS milliseconds." alt="" coords="651,653,752,678"/>
</map>
</div>

</div>
</div>
<a id="afcd1cfa04037980c000c94c826517759"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcd1cfa04037980c000c94c826517759">&#9670;&nbsp;</a></span>identify_ata_device()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void identify_ata_device </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structata__disk.html">ata_disk</a> *&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an IDENTIFY DEVICE command to disk D and reads the response. </p>
<p>Registers the disk with the block device layer. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00260">260</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="block_8h_source.html#l00037">BLOCK_RAW</a>, <a class="el" href="block_8c_source.html#l00187">block_register()</a>, <a class="el" href="block_8h_source.html#l00011">BLOCK_SECTOR_SIZE</a>, <a class="el" href="ide_8c_source.html#l00057">ata_disk::channel</a>, <a class="el" href="ide_8c_source.html#l00049">CMD_IDENTIFY_DEVICE</a>, <a class="el" href="ide_8c_source.html#l00073">channel::completion_wait</a>, <a class="el" href="ide_8c_source.html#l00316">descramble_ata_string()</a>, <a class="el" href="ide_8c_source.html#l00082">ide_operations</a>, <a class="el" href="ide_8c_source.html#l00420">input_sector()</a>, <a class="el" href="ide_8c_source.html#l00059">ata_disk::is_ata</a>, <a class="el" href="ide_8c_source.html#l00407">issue_pio_command()</a>, <a class="el" href="ide_8c_source.html#l00056">ata_disk::name</a>, <a class="el" href="partition_8c_source.html#l00028">partition_scan()</a>, <a class="el" href="lib_2stdio_8c_source.html#l00642">print_human_readable_size()</a>, <a class="el" href="lib_2stdio_8c_source.html#l00079">printf()</a>, <a class="el" href="ide_8c_source.html#l00498">select_device_wait()</a>, <a class="el" href="synch_8c_source.html#l00061">sema_down()</a>, <a class="el" href="lib_2stdio_8c_source.html#l00062">snprintf()</a>, and <a class="el" href="ide_8c_source.html#l00460">wait_while_busy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ide_8c_source.html#l00102">ide_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_afcd1cfa04037980c000c94c826517759_cgraph.png" border="0" usemap="#ide_8c_afcd1cfa04037980c000c94c826517759_cgraph" alt=""/></div>
<map name="ide_8c_afcd1cfa04037980c000c94c826517759_cgraph" id="ide_8c_afcd1cfa04037980c000c94c826517759_cgraph">
<area shape="rect" title="Sends an IDENTIFY DEVICE command to disk D and reads the response." alt="" coords="5,464,141,490"/>
<area shape="rect" href="block_8c.html#a2975afa33bd2e5caa0981756b2192f77" title="Registers a new block device with the given NAME." alt="" coords="742,312,847,338"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1743,314,1836,339"/>
<area shape="rect" href="lib_2stdio_8c.html#a225f673cc2251206f9da043c5a55a80b" title="Prints SIZE, which represents a number of bytes, in a human&#45;readable format, e.g." alt="" coords="895,819,1080,844"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="1139,767,1190,792"/>
<area shape="rect" href="ide_8c.html#a6a992ae2a2f8f5e9dbaa54b2200a5e44" title="Disk detection and identification." alt="" coords="189,62,345,87"/>
<area shape="rect" href="ide_8c.html#ad6e24dabc72eca487989a0d9b6fe1347" title="Reads a sector from channel C&#39;s data register in PIO mode into SECTOR, which must have room for BLOCK..." alt="" coords="220,111,314,136"/>
<area shape="rect" href="ide_8c.html#acdfc60cf49c8edf42ed8d25b0d2b6314" title="Writes COMMAND to channel C and prepares for receiving a completion interrupt." alt="" coords="393,160,537,186"/>
<area shape="rect" href="partition_8c.html#ae1af155dafc1e46f1725d8061189421a" title="Scans BLOCK for partitions of interest to Pintos." alt="" coords="215,464,319,490"/>
<area shape="rect" href="lib_2stdio_8c.html#a913035b9a30cd1b34c5e587dfbf26f92" title="Like printf(), except that output is stored into BUFFER, which must have space for BUF_SIZE character..." alt="" coords="762,971,827,996"/>
<area shape="rect" href="ide_8c.html#a5d8393ec752f120abb30d97b14a69600" title="Select disk D in its channel, as select_device(), but wait for the channel to become idle before and ..." alt="" coords="200,718,334,743"/>
<area shape="rect" href="ide_8c.html#a32d318073c2235e9b03bd77ed17ae580" title="Wait up to 30 seconds for disk D to clear BSY, and then return the status of the DRQ bit." alt="" coords="406,870,524,895"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1884,136,1994,162"/>
<area shape="rect" href="malloc_8c.html#a7ac38fce3243a7dcf448301ee9ffd392" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="1134,390,1194,415"/>
<area shape="rect" href="string_8c.html#a4637af6f79bac4043e1064f0837d0ddc" title="Copies string SRC to DST." alt="" coords="958,211,1017,236"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="2062,187,2129,212"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="2057,136,2135,162"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="1251,590,1364,615"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="1251,540,1364,566"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1749,200,1830,226"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1257,390,1358,415"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1599,490,1695,515"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="1599,439,1695,464"/>
<area shape="rect" href="palloc_8c.html#a135bc426d035b41313b4542adfd2c05f" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="1415,439,1551,464"/>
<area shape="rect" href="palloc_8c.html#aa8cccdccaa05d4023e3e65c15ed486af" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="1248,439,1367,464"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="2051,516,2141,542"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="2042,390,2150,415"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="2051,263,2141,288"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1889,288,1989,314"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1890,440,1988,466"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="2198,263,2298,288"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="1279,767,1337,792"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="1447,792,1519,818"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="1424,742,1542,767"/>
<area shape="rect" href="string_8c.html#ac81277697db3331c21cac338b661817a" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="1128,248,1200,274"/>
<area shape="rect" href="string_8c.html#a2869404e70f06f4477271f26ce8c4920" title="Returns the length of STRING." alt="" coords="1137,199,1191,224"/>
<area shape="rect" href="ctype_8h.html#a9318513eb3136e55002d65bf602f74a7" title=" " alt="" coords="432,62,498,87"/>
<area shape="rect" href="io_8h.html#a796ec08686cf1380808556b31cabc730" title="Reads CNT 16&#45;bit (halfword) units from PORT, one after another, and stores them into the buffer start..." alt="" coords="441,111,489,136"/>
<area shape="rect" href="io_8h.html#a903c588b94e0e8386c8a6f8caa4a5a72" title="Writes byte DATA to PORT." alt="" coords="616,211,663,236"/>
<area shape="rect" href="block_8c.html#a805c68661c9837f08b82b27fb82b9f94" title="Returns BLOCK&#39;s name (e.g." alt="" coords="748,363,841,388"/>
<area shape="rect" href="partition_8c.html#a5723d235ee99ff5ebd79a4db49236237" title="Reads the partition table in the given SECTOR of BLOCK and scans it for partitions of interest to Pin..." alt="" coords="395,464,534,490"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="596,363,683,388"/>
<area shape="rect" href="block_8c.html#a66f8a413d9cb3ea11c9cd302f803daea" title="Returns the number of sectors in BLOCK." alt="" coords="753,515,836,540"/>
<area shape="rect" href="partition_8c.html#a80cdac8263b0ada84abe4ddf0adb8614" title="We have found a primary or logical partition of the given TYPE on BLOCK, starting at sector START and..." alt="" coords="585,464,694,490"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="1142,590,1186,615"/>
<area shape="rect" href="lib_2stdio_8c.html#a1286c6b071007938f54e9b859109f89d" title="Like vprintf(), except that output is stored into BUFFER, which must have space for BUF_SIZE characte..." alt="" coords="952,1072,1023,1098"/>
<area shape="rect" href="ide_8c.html#a7252ab4c28b6aed431703ba2b124e05e" title="Program D&#39;s channel so that D is now the selected disk." alt="" coords="414,718,516,743"/>
<area shape="rect" href="ide_8c.html#ac51161a8c0b58de728cb08a3ff722b0f" title="Low&#45;level ATA primitives." alt="" coords="412,767,517,792"/>
<area shape="rect" href="io_8h.html#a0223c8898dfec29069879dc51076e28a" title="Reads and returns a byte from PORT." alt="" coords="620,718,659,743"/>
<area shape="rect" href="timer_8c.html#a10cbeaa00e0ceb825ddd7a44724881c6" title="Sleeps for approximately MS milliseconds." alt="" coords="589,920,690,946"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_afcd1cfa04037980c000c94c826517759_icgraph.png" border="0" usemap="#ide_8c_afcd1cfa04037980c000c94c826517759_icgraph" alt=""/></div>
<map name="ide_8c_afcd1cfa04037980c000c94c826517759_icgraph" id="ide_8c_afcd1cfa04037980c000c94c826517759_icgraph">
<area shape="rect" title="Sends an IDENTIFY DEVICE command to disk D and reads the response." alt="" coords="246,5,382,31"/>
<area shape="rect" href="ide_8h.html#a5e8e1409e0675bdd93040403c52dd660" title="devices/ide.h" alt="" coords="135,5,198,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
</map>
</div>

</div>
</div>
<a id="ad6e24dabc72eca487989a0d9b6fe1347"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6e24dabc72eca487989a0d9b6fe1347">&#9670;&nbsp;</a></span>input_sector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void input_sector </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structchannel.html">channel</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>sector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads a sector from channel C's data register in PIO mode into SECTOR, which must have room for BLOCK_SECTOR_SIZE bytes. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00420">420</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">References <a class="el" href="block_8h_source.html#l00011">BLOCK_SECTOR_SIZE</a>, <a class="el" href="io_8h_source.html#l00039">insw()</a>, and <a class="el" href="ide_8c_source.html#l00017">reg_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="ide_8c_source.html#l00345">ide_read()</a>, and <a class="el" href="ide_8c_source.html#l00260">identify_ata_device()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_ad6e24dabc72eca487989a0d9b6fe1347_cgraph.png" border="0" usemap="#ide_8c_ad6e24dabc72eca487989a0d9b6fe1347_cgraph" alt=""/></div>
<map name="ide_8c_ad6e24dabc72eca487989a0d9b6fe1347_cgraph" id="ide_8c_ad6e24dabc72eca487989a0d9b6fe1347_cgraph">
<area shape="rect" title="Reads a sector from channel C&#39;s data register in PIO mode into SECTOR, which must have room for BLOCK..." alt="" coords="5,5,99,31"/>
<area shape="rect" href="io_8h.html#a796ec08686cf1380808556b31cabc730" title="Reads CNT 16&#45;bit (halfword) units from PORT, one after another, and stores them into the buffer start..." alt="" coords="147,5,195,31"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_ad6e24dabc72eca487989a0d9b6fe1347_icgraph.png" border="0" usemap="#ide_8c_ad6e24dabc72eca487989a0d9b6fe1347_icgraph" alt=""/></div>
<map name="ide_8c_ad6e24dabc72eca487989a0d9b6fe1347_icgraph" id="ide_8c_ad6e24dabc72eca487989a0d9b6fe1347_icgraph">
<area shape="rect" title="Reads a sector from channel C&#39;s data register in PIO mode into SECTOR, which must have room for BLOCK..." alt="" coords="430,31,524,56"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="277,5,351,31"/>
<area shape="rect" href="ide_8c.html#afcd1cfa04037980c000c94c826517759" title="Sends an IDENTIFY DEVICE command to disk D and reads the response." alt="" coords="246,55,382,80"/>
<area shape="rect" href="ide_8h.html#a5e8e1409e0675bdd93040403c52dd660" title="devices/ide.h" alt="" coords="135,55,198,80"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,55,87,80"/>
</map>
</div>

</div>
</div>
<a id="a968e89e258918c93a81618744b6c0e35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a968e89e258918c93a81618744b6c0e35">&#9670;&nbsp;</a></span>interrupt_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void interrupt_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structintr__frame.html">intr_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ATA interrupt handler. </p>
<p>&lt; Acknowledge interrupt.</p>
<p>&lt; Wake up waiter.</p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00507">507</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">References <a class="el" href="ide_8c_source.html#l00079">CHANNEL_CNT</a>, <a class="el" href="ide_8c_source.html#l00080">channels</a>, <a class="el" href="ide_8c_source.html#l00073">channel::completion_wait</a>, <a class="el" href="ide_8c_source.html#l00071">channel::expecting_interrupt</a>, <a class="el" href="io_8h_source.html#l00009">inb()</a>, <a class="el" href="ide_8c_source.html#l00068">channel::irq</a>, <a class="el" href="ide_8c_source.html#l00066">channel::name</a>, <a class="el" href="debug_8h_source.html#l00035">NOT_REACHED</a>, <a class="el" href="lib_2stdio_8c_source.html#l00079">printf()</a>, <a class="el" href="ide_8c_source.html#l00024">reg_status</a>, <a class="el" href="synch_8c_source.html#l00109">sema_up()</a>, and <a class="el" href="interrupt_8h_source.html#l00032">intr_frame::vec_no</a>.</p>

<p class="reference">Referenced by <a class="el" href="ide_8c_source.html#l00102">ide_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a968e89e258918c93a81618744b6c0e35_cgraph.png" border="0" usemap="#ide_8c_a968e89e258918c93a81618744b6c0e35_cgraph" alt=""/></div>
<map name="ide_8c_a968e89e258918c93a81618744b6c0e35_cgraph" id="ide_8c_a968e89e258918c93a81618744b6c0e35_cgraph">
<area shape="rect" title="ATA interrupt handler." alt="" coords="5,265,127,291"/>
<area shape="rect" href="io_8h.html#a0223c8898dfec29069879dc51076e28a" title="Reads and returns a byte from PORT." alt="" coords="1054,5,1093,31"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="175,265,226,291"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1234,841,1310,867"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="274,265,332,291"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="395,880,467,905"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="1014,221,1132,247"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="848,171,966,196"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="380,479,482,504"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="564,880,630,905"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="543,929,650,955"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="547,979,646,1004"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="534,781,660,807"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="566,831,628,856"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="711,979,800,1004"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="728,929,783,955"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1932,309,2022,335"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1224,464,1320,489"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1412,259,1560,297"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1766,512,1874,537"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1439,563,1533,588"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1939,588,2015,613"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1922,512,2033,537"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1775,905,1864,931"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1613,816,1713,841"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1608,664,1718,689"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1614,563,1712,588"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1927,1195,2028,1220"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1776,804,1863,829"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1944,1019,2011,1044"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1781,671,1859,696"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1938,963,2017,988"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1950,671,2005,696"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="1025,385,1121,411"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1779,1068,1860,1093"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1435,1019,1537,1044"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1430,689,1542,715"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="1938,1068,2016,1093"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="1627,1068,1699,1093"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1618,1019,1708,1044"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="530,585,663,611"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="1180,197,1364,236"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="713,639,798,664"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="1448,867,1524,892"/>
<area shape="rect" href="serial_8c.html#aa1fb82a5be4690023966ea841c88a624" title="Initializes the serial port device for polling mode." alt="" coords="873,387,940,412"/>
<area shape="rect" href="intq_8c.html#aff4db6a96c4a1fb6898f26451a1049c2" title="Returns true if Q is full, false otherwise." alt="" coords="1040,841,1107,867"/>
<area shape="rect" href="intq_8c.html#a45ba970f3357ff262d7fafecc50735c6" title="Removes a byte from Q and returns it." alt="" coords="869,487,944,512"/>
<area shape="rect" href="intq_8c.html#a6a440110d5417c12cedf1c2e86f445f8" title="Adds BYTE to the end of Q." alt="" coords="869,639,944,664"/>
<area shape="rect" href="serial_8c.html#a15fd75cc421e6379650204e80853a68a" title="Polls the serial port until it&#39;s ready, and then transmits BYTE." alt="" coords="869,436,944,461"/>
<area shape="rect" href="serial_8c.html#ac89212325aed0ffe38beb0b4bde0bf30" title="Update interrupt enable register." alt="" coords="1236,1372,1308,1397"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a968e89e258918c93a81618744b6c0e35_icgraph.png" border="0" usemap="#ide_8c_a968e89e258918c93a81618744b6c0e35_icgraph" alt=""/></div>
<map name="ide_8c_a968e89e258918c93a81618744b6c0e35_icgraph" id="ide_8c_a968e89e258918c93a81618744b6c0e35_icgraph">
<area shape="rect" title="ATA interrupt handler." alt="" coords="246,5,368,31"/>
<area shape="rect" href="ide_8h.html#a5e8e1409e0675bdd93040403c52dd660" title="devices/ide.h" alt="" coords="135,5,198,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
</map>
</div>

</div>
</div>
<a id="acdfc60cf49c8edf42ed8d25b0d2b6314"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdfc60cf49c8edf42ed8d25b0d2b6314">&#9670;&nbsp;</a></span>issue_pio_command()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void issue_pio_command </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structchannel.html">channel</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>command</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes COMMAND to channel C and prepares for receiving a completion interrupt. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00407">407</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="ide_8c_source.html#l00071">channel::expecting_interrupt</a>, <a class="el" href="interrupt_8c_source.html#l00065">intr_get_level()</a>, <a class="el" href="interrupt_8h_source.html#l00011">INTR_ON</a>, <a class="el" href="io_8h_source.html#l00066">outb()</a>, and <a class="el" href="ide_8c_source.html#l00025">reg_command</a>.</p>

<p class="reference">Referenced by <a class="el" href="ide_8c_source.html#l00345">ide_read()</a>, <a class="el" href="ide_8c_source.html#l00365">ide_write()</a>, and <a class="el" href="ide_8c_source.html#l00260">identify_ata_device()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_acdfc60cf49c8edf42ed8d25b0d2b6314_cgraph.png" border="0" usemap="#ide_8c_acdfc60cf49c8edf42ed8d25b0d2b6314_cgraph" alt=""/></div>
<map name="ide_8c_acdfc60cf49c8edf42ed8d25b0d2b6314_cgraph" id="ide_8c_acdfc60cf49c8edf42ed8d25b0d2b6314_cgraph">
<area shape="rect" title="Writes COMMAND to channel C and prepares for receiving a completion interrupt." alt="" coords="5,31,149,56"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="197,5,298,31"/>
<area shape="rect" href="io_8h.html#a903c588b94e0e8386c8a6f8caa4a5a72" title="Writes byte DATA to PORT." alt="" coords="224,55,271,80"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_acdfc60cf49c8edf42ed8d25b0d2b6314_icgraph.png" border="0" usemap="#ide_8c_acdfc60cf49c8edf42ed8d25b0d2b6314_icgraph" alt=""/></div>
<map name="ide_8c_acdfc60cf49c8edf42ed8d25b0d2b6314_icgraph" id="ide_8c_acdfc60cf49c8edf42ed8d25b0d2b6314_icgraph">
<area shape="rect" title="Writes COMMAND to channel C and prepares for receiving a completion interrupt." alt="" coords="430,55,573,80"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="277,5,351,31"/>
<area shape="rect" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="277,55,351,80"/>
<area shape="rect" href="ide_8c.html#afcd1cfa04037980c000c94c826517759" title="Sends an IDENTIFY DEVICE command to disk D and reads the response." alt="" coords="246,104,382,129"/>
<area shape="rect" href="ide_8h.html#a5e8e1409e0675bdd93040403c52dd660" title="devices/ide.h" alt="" coords="135,104,198,129"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,104,87,129"/>
</map>
</div>

</div>
</div>
<a id="a825fd294c52f5c4983939b1d84607a61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a825fd294c52f5c4983939b1d84607a61">&#9670;&nbsp;</a></span>output_sector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void output_sector </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structchannel.html">channel</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>sector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes SECTOR to channel C's data register in PIO mode. </p>
<p>SECTOR must contain BLOCK_SECTOR_SIZE bytes. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00428">428</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">References <a class="el" href="block_8h_source.html#l00011">BLOCK_SECTOR_SIZE</a>, <a class="el" href="io_8h_source.html#l00092">outsw()</a>, and <a class="el" href="ide_8c_source.html#l00017">reg_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="ide_8c_source.html#l00365">ide_write()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a825fd294c52f5c4983939b1d84607a61_cgraph.png" border="0" usemap="#ide_8c_a825fd294c52f5c4983939b1d84607a61_cgraph" alt=""/></div>
<map name="ide_8c_a825fd294c52f5c4983939b1d84607a61_cgraph" id="ide_8c_a825fd294c52f5c4983939b1d84607a61_cgraph">
<area shape="rect" title="Writes SECTOR to channel C&#39;s data register in PIO mode." alt="" coords="5,5,107,31"/>
<area shape="rect" href="io_8h.html#a15c5b7146a500280afa7fc8dded78b49" title="Writes to PORT each 16&#45;bit unit (halfword) of data in the CNT&#45;halfword buffer starting at ADDR." alt="" coords="155,5,212,31"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a825fd294c52f5c4983939b1d84607a61_icgraph.png" border="0" usemap="#ide_8c_a825fd294c52f5c4983939b1d84607a61_icgraph" alt=""/></div>
<map name="ide_8c_a825fd294c52f5c4983939b1d84607a61_icgraph" id="ide_8c_a825fd294c52f5c4983939b1d84607a61_icgraph">
<area shape="rect" title="Writes SECTOR to channel C&#39;s data register in PIO mode." alt="" coords="128,5,230,31"/>
<area shape="rect" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="5,5,80,31"/>
</map>
</div>

</div>
</div>
<a id="a03eb0d9954faefcc1634f76a286f78f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03eb0d9954faefcc1634f76a286f78f5">&#9670;&nbsp;</a></span>reset_channel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void reset_channel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structchannel.html">channel</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resets an ATA channel and waits for any devices present on it to finish the reset. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00165">165</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">References <a class="el" href="ide_8c_source.html#l00039">CTL_SRST</a>, <a class="el" href="ide_8c_source.html#l00058">ata_disk::dev_no</a>, <a class="el" href="ide_8c_source.html#l00075">channel::devices</a>, <a class="el" href="io_8h_source.html#l00009">inb()</a>, <a class="el" href="io_8h_source.html#l00066">outb()</a>, <a class="el" href="ide_8c_source.html#l00030">reg_ctl</a>, <a class="el" href="ide_8c_source.html#l00020">reg_lbal</a>, <a class="el" href="ide_8c_source.html#l00019">reg_nsect</a>, <a class="el" href="ide_8c_source.html#l00484">select_device()</a>, <a class="el" href="timer_8c_source.html#l00102">timer_msleep()</a>, <a class="el" href="timer_8c_source.html#l00110">timer_usleep()</a>, and <a class="el" href="ide_8c_source.html#l00460">wait_while_busy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ide_8c_source.html#l00102">ide_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a03eb0d9954faefcc1634f76a286f78f5_cgraph.png" border="0" usemap="#ide_8c_a03eb0d9954faefcc1634f76a286f78f5_cgraph" alt=""/></div>
<map name="ide_8c_a03eb0d9954faefcc1634f76a286f78f5_cgraph" id="ide_8c_a03eb0d9954faefcc1634f76a286f78f5_cgraph">
<area shape="rect" title="Resets an ATA channel and waits for any devices present on it to finish the reset." alt="" coords="5,305,110,331"/>
<area shape="rect" href="io_8h.html#a0223c8898dfec29069879dc51076e28a" title="Reads and returns a byte from PORT." alt="" coords="356,331,395,356"/>
<area shape="rect" href="io_8h.html#a903c588b94e0e8386c8a6f8caa4a5a72" title="Writes byte DATA to PORT." alt="" coords="352,431,399,456"/>
<area shape="rect" href="ide_8c.html#a7252ab4c28b6aed431703ba2b124e05e" title="Program D&#39;s channel so that D is now the selected disk." alt="" coords="167,381,269,407"/>
<area shape="rect" href="timer_8c.html#a10cbeaa00e0ceb825ddd7a44724881c6" title="Sleeps for approximately MS milliseconds." alt="" coords="325,229,426,255"/>
<area shape="rect" href="timer_8c.html#ac386900a4e0ba0d6f338b8c5534776d1" title="Sleeps for approximately US microseconds." alt="" coords="169,179,266,204"/>
<area shape="rect" href="ide_8c.html#a32d318073c2235e9b03bd77ed17ae580" title="Wait up to 30 seconds for disk D to clear BSY, and then return the status of the DRQ bit." alt="" coords="158,280,277,305"/>
<area shape="rect" href="timer_8c.html#a5d4df9c9580a97f5eee2e70ae8ad43a0" title="Sleeps for approximately NS nanoseconds." alt="" coords="327,381,424,407"/>
<area shape="rect" href="timer_8c.html#a9bd10eb80561359273e022f4c80b483f" title="Sleep for approximately NUM/DENOM seconds." alt="" coords="474,204,590,229"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1537,257,1637,283"/>
<area shape="rect" href="timer_8c.html#a28553fa387ff127de26e330dfcfe9fa1" title="Busy&#45;wait for approximately NUM/DENOM seconds." alt="" coords="639,5,755,31"/>
<area shape="rect" href="timer_8c.html#aa24fbc19fb550d9efd5cabd97489a399" title="Sleeps for approximately TICKS timer ticks." alt="" coords="652,351,742,376"/>
<area shape="rect" href="timer_8c.html#a804190f8e66f39ac2ddb5891de3eec73" title="Iterates through a simple loop LOOPS times, for implementing brief delays." alt="" coords="830,5,911,31"/>
<area shape="rect" href="thread_8c.html#aaa9229e0f462f60bb9550919fa3d7699" title="Yields the CPU." alt="" coords="1012,553,1106,579"/>
<area shape="rect" href="timer_8c.html#a58f1f79abf9bc0515a305ba89c58b9fa" title="Returns the number of timer ticks elapsed since THEN, which should be a value once returned by timer_..." alt="" coords="818,351,923,376"/>
<area shape="rect" href="timer_8c.html#a2b50be77101b38176d21b52cc425cf3e" title="Returns the number of timer ticks since the OS booted." alt="" coords="1017,401,1102,427"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1542,832,1632,857"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1366,457,1456,483"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1186,503,1286,528"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1181,655,1291,680"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1199,328,1274,353"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1182,756,1290,781"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1368,556,1455,581"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1378,655,1445,680"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1372,605,1450,631"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1373,507,1449,532"/>
<area shape="rect" href="intq_8c.html#ac473f50d2829cba1321d34a57c425042" title="Returns the position after POS within an intq." alt="" coords="1388,208,1434,233"/>
<area shape="rect" href="thread_8c.html#ace7a46dcf0f5c9c4cbb8f47a5b3c76f5" title="Chooses and returns the next thread to be scheduled." alt="" coords="1343,257,1480,283"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1531,407,1642,432"/>
<area shape="rect" href="switch_8h.html#aa804e4fa090f4acb6a73b98f64b81cff" title="Switches from CUR, which must be the running thread, to NEXT, which must also be running switch_threa..." alt="" coords="1356,307,1466,332"/>
<area shape="rect" href="thread_8c.html#acbbd25908c41e62d44a179cfbc3962e2" title="Completes a thread switch by activating the new thread&#39;s page tables, and, if the previous thread is ..." alt="" coords="1339,356,1483,381"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="350,281,401,307"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="503,705,561,731"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="661,1108,733,1133"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="638,781,756,807"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="638,705,756,731"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="646,656,748,681"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="838,1157,904,1183"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="817,1207,924,1232"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="821,1059,920,1084"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="807,1009,934,1035"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="840,1108,901,1133"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="1015,1132,1103,1157"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="1032,1009,1087,1035"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="823,807,919,832"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="985,743,1133,781"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1013,675,1106,700"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="823,705,919,731"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1021,503,1098,528"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="804,656,937,681"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a03eb0d9954faefcc1634f76a286f78f5_icgraph.png" border="0" usemap="#ide_8c_a03eb0d9954faefcc1634f76a286f78f5_icgraph" alt=""/></div>
<map name="ide_8c_a03eb0d9954faefcc1634f76a286f78f5_icgraph" id="ide_8c_a03eb0d9954faefcc1634f76a286f78f5_icgraph">
<area shape="rect" title="Resets an ATA channel and waits for any devices present on it to finish the reset." alt="" coords="246,5,351,31"/>
<area shape="rect" href="ide_8h.html#a5e8e1409e0675bdd93040403c52dd660" title="devices/ide.h" alt="" coords="135,5,198,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
</map>
</div>

</div>
</div>
<a id="a7252ab4c28b6aed431703ba2b124e05e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7252ab4c28b6aed431703ba2b124e05e">&#9670;&nbsp;</a></span>select_device()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void select_device </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structata__disk.html">ata_disk</a> *&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Program D's channel so that D is now the selected disk. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00484">484</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">References <a class="el" href="ide_8c_source.html#l00057">ata_disk::channel</a>, <a class="el" href="ide_8c_source.html#l00044">DEV_DEV</a>, <a class="el" href="ide_8c_source.html#l00042">DEV_MBS</a>, <a class="el" href="ide_8c_source.html#l00058">ata_disk::dev_no</a>, <a class="el" href="io_8h_source.html#l00009">inb()</a>, <a class="el" href="io_8h_source.html#l00066">outb()</a>, <a class="el" href="ide_8c_source.html#l00031">reg_alt_status</a>, <a class="el" href="ide_8c_source.html#l00023">reg_device</a>, and <a class="el" href="timer_8c_source.html#l00118">timer_nsleep()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ide_8c_source.html#l00230">check_device_type()</a>, <a class="el" href="ide_8c_source.html#l00165">reset_channel()</a>, and <a class="el" href="ide_8c_source.html#l00498">select_device_wait()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a7252ab4c28b6aed431703ba2b124e05e_cgraph.png" border="0" usemap="#ide_8c_a7252ab4c28b6aed431703ba2b124e05e_cgraph" alt=""/></div>
<map name="ide_8c_a7252ab4c28b6aed431703ba2b124e05e_cgraph" id="ide_8c_a7252ab4c28b6aed431703ba2b124e05e_cgraph">
<area shape="rect" title="Program D&#39;s channel so that D is now the selected disk." alt="" coords="5,881,107,907"/>
<area shape="rect" href="io_8h.html#a0223c8898dfec29069879dc51076e28a" title="Reads and returns a byte from PORT." alt="" coords="185,832,224,857"/>
<area shape="rect" href="io_8h.html#a903c588b94e0e8386c8a6f8caa4a5a72" title="Writes byte DATA to PORT." alt="" coords="181,881,228,907"/>
<area shape="rect" href="timer_8c.html#a5d4df9c9580a97f5eee2e70ae8ad43a0" title="Sleeps for approximately NS nanoseconds." alt="" coords="155,931,253,956"/>
<area shape="rect" href="timer_8c.html#a9bd10eb80561359273e022f4c80b483f" title="Sleep for approximately NUM/DENOM seconds." alt="" coords="301,931,417,956"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1275,892,1376,917"/>
<area shape="rect" href="timer_8c.html#a28553fa387ff127de26e330dfcfe9fa1" title="Busy&#45;wait for approximately NUM/DENOM seconds." alt="" coords="465,831,580,856"/>
<area shape="rect" href="timer_8c.html#aa24fbc19fb550d9efd5cabd97489a399" title="Sleeps for approximately TICKS timer ticks." alt="" coords="477,931,567,956"/>
<area shape="rect" href="timer_8c.html#a804190f8e66f39ac2ddb5891de3eec73" title="Iterates through a simple loop LOOPS times, for implementing brief delays." alt="" coords="640,804,721,829"/>
<area shape="rect" href="thread_8c.html#aaa9229e0f462f60bb9550919fa3d7699" title="Yields the CPU." alt="" coords="781,804,875,829"/>
<area shape="rect" href="timer_8c.html#a58f1f79abf9bc0515a305ba89c58b9fa" title="Returns the number of timer ticks elapsed since THEN, which should be a value once returned by timer_..." alt="" coords="628,956,733,981"/>
<area shape="rect" href="timer_8c.html#a2b50be77101b38176d21b52cc425cf3e" title="Returns the number of timer ticks since the OS booted." alt="" coords="786,931,871,956"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1280,819,1370,844"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1098,905,1188,931"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="923,855,1023,880"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1270,31,1380,56"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="936,631,1010,656"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1639,605,1747,631"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1100,856,1187,881"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1836,31,1904,56"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1466,31,1544,56"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1653,80,1732,105"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1665,31,1721,56"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1832,504,1908,529"/>
<area shape="rect" href="intq_8c.html#ac473f50d2829cba1321d34a57c425042" title="Returns the position after POS within an intq." alt="" coords="1120,605,1166,631"/>
<area shape="rect" href="thread_8c.html#ace7a46dcf0f5c9c4cbb8f47a5b3c76f5" title="Chooses and returns the next thread to be scheduled." alt="" coords="1075,180,1212,205"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1815,605,1926,631"/>
<area shape="rect" href="switch_8h.html#aa804e4fa090f4acb6a73b98f64b81cff" title="Switches from CUR, which must be the running thread, to NEXT, which must also be running switch_threa..." alt="" coords="1088,655,1198,680"/>
<area shape="rect" href="thread_8c.html#acbbd25908c41e62d44a179cfbc3962e2" title="Completes a thread switch by activating the new thread&#39;s page tables, and, if the previous thread is ..." alt="" coords="1071,704,1215,729"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1652,129,1734,155"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1275,129,1376,155"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ab1b18b2991e80f9e1005acd6f1bfbb2a" title="Returns the beginning of LIST." alt="" coords="1831,129,1909,155"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9b0ec9912b9a1a4d95b47984e0777e66" title="Returns the front element in LIST." alt="" coords="1469,129,1541,155"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a9574755a392b556ddb650b8672f9f4af" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1460,80,1550,105"/>
<area shape="rect" href="vaddr_8h.html#a5a07aa5a4d70694db19884626f4b0fa3" title="Round down to nearest page boundary." alt="" coords="1977,605,2094,631"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="1263,365,1387,391"/>
<area shape="rect" href="process_8c.html#a23823b283ef2815ecc5ae19e772dac24" title="Sets up the CPU for running user code in the current thread." alt="" coords="1265,680,1386,705"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="1435,329,1575,355"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1652,280,1734,305"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1623,379,1763,404"/>
<area shape="rect" href="string_8c.html#ab1e7a2e7d71d61a771b43da7c18fdba6" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1659,329,1727,355"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1634,179,1752,204"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1841,229,1899,255"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1662,428,1724,453"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1811,280,1929,305"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1827,379,1913,404"/>
<area shape="rect" href="bitmap_8c.html#a576f7d29f091eac024f70ae8d68997a9" title="Bitmap size." alt="" coords="1824,179,1916,204"/>
<area shape="rect" href="pagedir_8c.html#ac0a75950cc56724fef94d224df4b0cd0" title="Loads page directory PD into the CPU&#39;s page directory base register." alt="" coords="1445,705,1565,731"/>
<area shape="rect" href="tss_8c.html#a089f0d1278964a0cc36f92d47febd2d4" title="Sets the ring 0 stack pointer in the TSS to point to the end of the thread stack." alt="" coords="1462,656,1548,681"/>
<area shape="rect" href="vaddr_8h.html#a0f6ff2f4a18892d83d6e1c1a3c2d9f9b" title="Returns physical address at which kernel virtual address VADDR is mapped." alt="" coords="1670,705,1716,731"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a7252ab4c28b6aed431703ba2b124e05e_icgraph.png" border="0" usemap="#ide_8c_a7252ab4c28b6aed431703ba2b124e05e_icgraph" alt=""/></div>
<map name="ide_8c_a7252ab4c28b6aed431703ba2b124e05e_icgraph" id="ide_8c_a7252ab4c28b6aed431703ba2b124e05e_icgraph">
<area shape="rect" title="Program D&#39;s channel so that D is now the selected disk." alt="" coords="622,56,724,81"/>
<area shape="rect" href="ide_8c.html#afb1b543e585d7b5757bf9406b8705349" title="Checks whether device D is an ATA disk and sets D&#39;s is_ata member appropriately." alt="" coords="258,5,393,31"/>
<area shape="rect" href="ide_8c.html#a03eb0d9954faefcc1634f76a286f78f5" title="Resets an ATA channel and waits for any devices present on it to finish the reset." alt="" coords="455,56,560,81"/>
<area shape="rect" href="ide_8c.html#a5d8393ec752f120abb30d97b14a69600" title="Select disk D in its channel, as select_device(), but wait for the channel to become idle before and ..." alt="" coords="441,107,574,132"/>
<area shape="rect" href="ide_8h.html#a5e8e1409e0675bdd93040403c52dd660" title="devices/ide.h" alt="" coords="140,56,204,81"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,56,87,81"/>
<area shape="rect" href="ide_8c.html#afcd1cfa04037980c000c94c826517759" title="Sends an IDENTIFY DEVICE command to disk D and reads the response." alt="" coords="257,107,393,132"/>
<area shape="rect" href="ide_8c.html#ad7c31783f9f455b20c35d43f46ee03d8" title="Selects device D, waiting for it to become ready, and then writes SEC_NO to the disk&#39;s sector selecti..." alt="" coords="275,156,375,181"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="135,131,209,156"/>
<area shape="rect" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="135,180,209,205"/>
</map>
</div>

</div>
</div>
<a id="a5d8393ec752f120abb30d97b14a69600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d8393ec752f120abb30d97b14a69600">&#9670;&nbsp;</a></span>select_device_wait()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void select_device_wait </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structata__disk.html">ata_disk</a> *&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Select disk D in its channel, as <a class="el" href="ide_8c.html#a7252ab4c28b6aed431703ba2b124e05e" title="Program D&#39;s channel so that D is now the selected disk.">select_device()</a>, but wait for the channel to become idle before and after. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00498">498</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">References <a class="el" href="ide_8c_source.html#l00484">select_device()</a>, and <a class="el" href="ide_8c_source.html#l00441">wait_until_idle()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ide_8c_source.html#l00260">identify_ata_device()</a>, and <a class="el" href="ide_8c_source.html#l00389">select_sector()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a5d8393ec752f120abb30d97b14a69600_cgraph.png" border="0" usemap="#ide_8c_a5d8393ec752f120abb30d97b14a69600_cgraph" alt=""/></div>
<map name="ide_8c_a5d8393ec752f120abb30d97b14a69600_cgraph" id="ide_8c_a5d8393ec752f120abb30d97b14a69600_cgraph">
<area shape="rect" title="Select disk D in its channel, as select_device(), but wait for the channel to become idle before and ..." alt="" coords="5,934,139,959"/>
<area shape="rect" href="ide_8c.html#a7252ab4c28b6aed431703ba2b124e05e" title="Program D&#39;s channel so that D is now the selected disk." alt="" coords="188,958,290,983"/>
<area shape="rect" href="ide_8c.html#ac51161a8c0b58de728cb08a3ff722b0f" title="Low&#45;level ATA primitives." alt="" coords="187,897,292,922"/>
<area shape="rect" href="io_8h.html#a0223c8898dfec29069879dc51076e28a" title="Reads and returns a byte from PORT." alt="" coords="369,933,408,958"/>
<area shape="rect" href="io_8h.html#a903c588b94e0e8386c8a6f8caa4a5a72" title="Writes byte DATA to PORT." alt="" coords="365,1031,412,1057"/>
<area shape="rect" href="timer_8c.html#a5d4df9c9580a97f5eee2e70ae8ad43a0" title="Sleeps for approximately NS nanoseconds." alt="" coords="340,982,437,1007"/>
<area shape="rect" href="timer_8c.html#a9bd10eb80561359273e022f4c80b483f" title="Sleep for approximately NUM/DENOM seconds." alt="" coords="485,982,601,1007"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1598,805,1699,830"/>
<area shape="rect" href="timer_8c.html#a28553fa387ff127de26e330dfcfe9fa1" title="Busy&#45;wait for approximately NUM/DENOM seconds." alt="" coords="650,1083,766,1109"/>
<area shape="rect" href="timer_8c.html#aa24fbc19fb550d9efd5cabd97489a399" title="Sleeps for approximately TICKS timer ticks." alt="" coords="663,931,753,957"/>
<area shape="rect" href="timer_8c.html#a804190f8e66f39ac2ddb5891de3eec73" title="Iterates through a simple loop LOOPS times, for implementing brief delays." alt="" coords="842,1083,922,1109"/>
<area shape="rect" href="thread_8c.html#aaa9229e0f462f60bb9550919fa3d7699" title="Yields the CPU." alt="" coords="1041,674,1135,699"/>
<area shape="rect" href="timer_8c.html#a58f1f79abf9bc0515a305ba89c58b9fa" title="Returns the number of timer ticks elapsed since THEN, which should be a value once returned by timer_..." alt="" coords="829,881,934,906"/>
<area shape="rect" href="timer_8c.html#a2b50be77101b38176d21b52cc425cf3e" title="Returns the number of timer ticks since the OS booted." alt="" coords="1046,906,1131,931"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1604,209,1694,234"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1433,805,1523,830"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1252,779,1352,805"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1247,310,1357,335"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1441,627,1516,653"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1424,497,1532,522"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1435,755,1522,781"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1445,359,1512,385"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1439,310,1517,335"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1611,570,1687,595"/>
<area shape="rect" href="intq_8c.html#ac473f50d2829cba1321d34a57c425042" title="Returns the position after POS within an intq." alt="" coords="1626,623,1672,649"/>
<area shape="rect" href="thread_8c.html#ace7a46dcf0f5c9c4cbb8f47a5b3c76f5" title="Chooses and returns the next thread to be scheduled." alt="" coords="1580,673,1717,698"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1593,513,1704,538"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="363,722,414,747"/>
<area shape="rect" href="timer_8c.html#ac386900a4e0ba0d6f338b8c5534776d1" title="Sleeps for approximately US microseconds." alt="" coords="340,883,437,909"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="514,610,572,635"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="672,610,744,635"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="649,361,767,386"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="649,462,767,487"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="657,735,759,761"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="849,610,915,635"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="828,511,936,537"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="832,659,931,685"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="819,709,945,734"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="851,561,913,586"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="1044,513,1132,538"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="1061,562,1116,587"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="834,310,930,335"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1228,462,1376,501"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1042,310,1135,335"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="834,462,930,487"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1050,729,1126,754"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="815,810,948,835"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="996,611,1180,650"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="1045,793,1131,818"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="1051,842,1126,867"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a5d8393ec752f120abb30d97b14a69600_icgraph.png" border="0" usemap="#ide_8c_a5d8393ec752f120abb30d97b14a69600_icgraph" alt=""/></div>
<map name="ide_8c_a5d8393ec752f120abb30d97b14a69600_icgraph" id="ide_8c_a5d8393ec752f120abb30d97b14a69600_icgraph">
<area shape="rect" title="Select disk D in its channel, as select_device(), but wait for the channel to become idle before and ..." alt="" coords="441,31,574,56"/>
<area shape="rect" href="ide_8c.html#afcd1cfa04037980c000c94c826517759" title="Sends an IDENTIFY DEVICE command to disk D and reads the response." alt="" coords="257,5,393,31"/>
<area shape="rect" href="ide_8c.html#ad7c31783f9f455b20c35d43f46ee03d8" title="Selects device D, waiting for it to become ready, and then writes SEC_NO to the disk&#39;s sector selecti..." alt="" coords="275,55,375,80"/>
<area shape="rect" href="ide_8h.html#a5e8e1409e0675bdd93040403c52dd660" title="devices/ide.h" alt="" coords="140,5,204,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="135,55,209,80"/>
<area shape="rect" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="135,104,209,129"/>
</map>
</div>

</div>
</div>
<a id="ad7c31783f9f455b20c35d43f46ee03d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7c31783f9f455b20c35d43f46ee03d8">&#9670;&nbsp;</a></span>select_sector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void select_sector </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structata__disk.html">ata_disk</a> *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a>&#160;</td>
          <td class="paramname"><em>sec_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Selects device D, waiting for it to become ready, and then writes SEC_NO to the disk's sector selection registers. </p>
<p>(We use LBA mode.) </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00389">389</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="ide_8c_source.html#l00057">ata_disk::channel</a>, <a class="el" href="ide_8c_source.html#l00044">DEV_DEV</a>, <a class="el" href="ide_8c_source.html#l00043">DEV_LBA</a>, <a class="el" href="ide_8c_source.html#l00042">DEV_MBS</a>, <a class="el" href="ide_8c_source.html#l00058">ata_disk::dev_no</a>, <a class="el" href="io_8h_source.html#l00066">outb()</a>, <a class="el" href="ide_8c_source.html#l00023">reg_device</a>, <a class="el" href="ide_8c_source.html#l00022">reg_lbah</a>, <a class="el" href="ide_8c_source.html#l00020">reg_lbal</a>, <a class="el" href="ide_8c_source.html#l00021">reg_lbam</a>, <a class="el" href="ide_8c_source.html#l00019">reg_nsect</a>, and <a class="el" href="ide_8c_source.html#l00498">select_device_wait()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ide_8c_source.html#l00345">ide_read()</a>, and <a class="el" href="ide_8c_source.html#l00365">ide_write()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_ad7c31783f9f455b20c35d43f46ee03d8_cgraph.png" border="0" usemap="#ide_8c_ad7c31783f9f455b20c35d43f46ee03d8_cgraph" alt=""/></div>
<map name="ide_8c_ad7c31783f9f455b20c35d43f46ee03d8_cgraph" id="ide_8c_ad7c31783f9f455b20c35d43f46ee03d8_cgraph">
<area shape="rect" title="Selects device D, waiting for it to become ready, and then writes SEC_NO to the disk&#39;s sector selecti..." alt="" coords="5,146,105,171"/>
<area shape="rect" href="io_8h.html#a903c588b94e0e8386c8a6f8caa4a5a72" title="Writes byte DATA to PORT." alt="" coords="513,121,560,146"/>
<area shape="rect" href="ide_8c.html#a5d8393ec752f120abb30d97b14a69600" title="Select disk D in its channel, as select_device(), but wait for the channel to become idle before and ..." alt="" coords="153,171,286,197"/>
<area shape="rect" href="ide_8c.html#a7252ab4c28b6aed431703ba2b124e05e" title="Program D&#39;s channel so that D is now the selected disk." alt="" coords="336,171,438,197"/>
<area shape="rect" href="ide_8c.html#ac51161a8c0b58de728cb08a3ff722b0f" title="Low&#45;level ATA primitives." alt="" coords="334,245,440,270"/>
<area shape="rect" href="io_8h.html#a0223c8898dfec29069879dc51076e28a" title="Reads and returns a byte from PORT." alt="" coords="517,219,556,245"/>
<area shape="rect" href="timer_8c.html#a5d4df9c9580a97f5eee2e70ae8ad43a0" title="Sleeps for approximately NS nanoseconds." alt="" coords="488,170,585,195"/>
<area shape="rect" href="timer_8c.html#a9bd10eb80561359273e022f4c80b483f" title="Sleep for approximately NUM/DENOM seconds." alt="" coords="633,170,749,195"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1746,246,1847,271"/>
<area shape="rect" href="timer_8c.html#a28553fa387ff127de26e330dfcfe9fa1" title="Busy&#45;wait for approximately NUM/DENOM seconds." alt="" coords="798,221,914,246"/>
<area shape="rect" href="timer_8c.html#aa24fbc19fb550d9efd5cabd97489a399" title="Sleeps for approximately TICKS timer ticks." alt="" coords="811,145,901,170"/>
<area shape="rect" href="timer_8c.html#a804190f8e66f39ac2ddb5891de3eec73" title="Iterates through a simple loop LOOPS times, for implementing brief delays." alt="" coords="989,246,1070,271"/>
<area shape="rect" href="thread_8c.html#aaa9229e0f462f60bb9550919fa3d7699" title="Yields the CPU." alt="" coords="1189,445,1283,470"/>
<area shape="rect" href="timer_8c.html#a58f1f79abf9bc0515a305ba89c58b9fa" title="Returns the number of timer ticks elapsed since THEN, which should be a value once returned by timer_..." alt="" coords="977,145,1082,170"/>
<area shape="rect" href="timer_8c.html#a2b50be77101b38176d21b52cc425cf3e" title="Returns the number of timer ticks since the OS booted." alt="" coords="1194,119,1279,145"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1752,803,1842,829"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1581,246,1671,271"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1400,297,1500,322"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1395,499,1505,525"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1589,349,1663,374"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1572,651,1680,677"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1582,398,1670,423"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a0769702e25e1739befbbd453d9fc73bf" title="Returns LIST&#39;s tail." alt="" coords="1593,499,1660,525"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1587,450,1665,475"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1759,525,1835,550"/>
<area shape="rect" href="intq_8c.html#ac473f50d2829cba1321d34a57c425042" title="Returns the position after POS within an intq." alt="" coords="1773,323,1820,349"/>
<area shape="rect" href="thread_8c.html#ace7a46dcf0f5c9c4cbb8f47a5b3c76f5" title="Chooses and returns the next thread to be scheduled." alt="" coords="1728,373,1865,398"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="511,391,562,417"/>
<area shape="rect" href="timer_8c.html#ac386900a4e0ba0d6f338b8c5534776d1" title="Sleeps for approximately US microseconds." alt="" coords="488,269,585,294"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="662,542,720,567"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="820,443,892,469"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="797,817,915,842"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="797,542,915,567"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="805,591,907,617"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="997,443,1063,469"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="976,345,1083,370"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="980,295,1079,321"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="966,493,1093,518"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="999,394,1060,419"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="1192,198,1280,223"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="1209,247,1264,273"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="982,766,1078,791"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1376,854,1524,893"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1190,550,1283,575"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="982,542,1078,567"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1198,297,1274,322"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="963,591,1096,617"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="1144,702,1328,741"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="1193,346,1279,371"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="1198,395,1274,421"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_ad7c31783f9f455b20c35d43f46ee03d8_icgraph.png" border="0" usemap="#ide_8c_ad7c31783f9f455b20c35d43f46ee03d8_icgraph" alt=""/></div>
<map name="ide_8c_ad7c31783f9f455b20c35d43f46ee03d8_icgraph" id="ide_8c_ad7c31783f9f455b20c35d43f46ee03d8_icgraph">
<area shape="rect" title="Selects device D, waiting for it to become ready, and then writes SEC_NO to the disk&#39;s sector selecti..." alt="" coords="128,31,228,56"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="6,5,79,31"/>
<area shape="rect" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="5,55,80,80"/>
</map>
</div>

</div>
</div>
<a id="ac51161a8c0b58de728cb08a3ff722b0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac51161a8c0b58de728cb08a3ff722b0f">&#9670;&nbsp;</a></span>wait_until_idle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void wait_until_idle </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structata__disk.html">ata_disk</a> *&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Low-level ATA primitives. </p>
<p>Wait up to 10 seconds for the controller to become idle, that is, for the BSY and DRQ bits to clear in the status register.</p>
<p>As a side effect, reading the status register clears any pending interrupt. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00441">441</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">References <a class="el" href="ide_8c_source.html#l00057">ata_disk::channel</a>, <a class="el" href="io_8h_source.html#l00009">inb()</a>, <a class="el" href="ide_8c_source.html#l00056">ata_disk::name</a>, <a class="el" href="lib_2stdio_8c_source.html#l00079">printf()</a>, <a class="el" href="ide_8c_source.html#l00024">reg_status</a>, <a class="el" href="ide_8c_source.html#l00034">STA_BSY</a>, <a class="el" href="ide_8c_source.html#l00036">STA_DRQ</a>, and <a class="el" href="timer_8c_source.html#l00110">timer_usleep()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ide_8c_source.html#l00498">select_device_wait()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_ac51161a8c0b58de728cb08a3ff722b0f_cgraph.png" border="0" usemap="#ide_8c_ac51161a8c0b58de728cb08a3ff722b0f_cgraph" alt=""/></div>
<map name="ide_8c_ac51161a8c0b58de728cb08a3ff722b0f_cgraph" id="ide_8c_ac51161a8c0b58de728cb08a3ff722b0f_cgraph">
<area shape="rect" title="Low&#45;level ATA primitives." alt="" coords="5,1521,110,1547"/>
<area shape="rect" href="io_8h.html#a0223c8898dfec29069879dc51076e28a" title="Reads and returns a byte from PORT." alt="" coords="1116,1521,1155,1547"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="182,940,233,965"/>
<area shape="rect" href="timer_8c.html#ac386900a4e0ba0d6f338b8c5534776d1" title="Sleeps for approximately US microseconds." alt="" coords="158,1572,256,1597"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="304,375,362,400"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="425,175,497,200"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="877,275,996,300"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="877,375,996,400"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="410,585,512,611"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="594,175,659,200"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="573,125,680,151"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="577,76,676,101"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="563,224,690,249"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="596,273,657,299"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="741,101,829,127"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="757,224,813,249"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1642,308,1732,333"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1087,360,1184,385"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1275,257,1423,296"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1633,512,1741,537"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1303,561,1396,587"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1807,613,1883,639"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1789,512,1900,537"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1800,1016,1890,1041"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1637,1016,1737,1041"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1632,713,1741,739"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1479,511,1576,536"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1948,1319,2049,1344"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1649,561,1724,587"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="1087,409,1184,435"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1311,889,1387,915"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1487,865,1568,891"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1477,915,1578,940"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1471,764,1584,789"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="560,855,693,880"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="1044,176,1227,215"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="742,989,828,1015"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="1490,1168,1565,1193"/>
<area shape="rect" href="serial_8c.html#aa1fb82a5be4690023966ea841c88a624" title="Initializes the serial port device for polling mode." alt="" coords="903,964,970,989"/>
<area shape="rect" href="intq_8c.html#aff4db6a96c4a1fb6898f26451a1049c2" title="Returns true if Q is full, false otherwise." alt="" coords="1102,1420,1169,1445"/>
<area shape="rect" href="intq_8c.html#a45ba970f3357ff262d7fafecc50735c6" title="Removes a byte from Q and returns it." alt="" coords="899,476,974,501"/>
<area shape="rect" href="intq_8c.html#a6a440110d5417c12cedf1c2e86f445f8" title="Adds BYTE to the end of Q." alt="" coords="899,703,974,728"/>
<area shape="rect" href="serial_8c.html#a15fd75cc421e6379650204e80853a68a" title="Polls the serial port until it&#39;s ready, and then transmits BYTE." alt="" coords="899,1471,974,1496"/>
<area shape="rect" href="timer_8c.html#a9bd10eb80561359273e022f4c80b483f" title="Sleep for approximately NUM/DENOM seconds." alt="" coords="879,1572,994,1597"/>
<area shape="rect" href="timer_8c.html#a28553fa387ff127de26e330dfcfe9fa1" title="Busy&#45;wait for approximately NUM/DENOM seconds." alt="" coords="1078,1623,1193,1648"/>
<area shape="rect" href="timer_8c.html#aa24fbc19fb550d9efd5cabd97489a399" title="Sleeps for approximately TICKS timer ticks." alt="" coords="1090,1217,1181,1243"/>
<area shape="rect" href="timer_8c.html#a804190f8e66f39ac2ddb5891de3eec73" title="Iterates through a simple loop LOOPS times, for implementing brief delays." alt="" coords="1309,1623,1390,1648"/>
<area shape="rect" href="thread_8c.html#aaa9229e0f462f60bb9550919fa3d7699" title="Yields the CPU." alt="" coords="1481,663,1575,688"/>
<area shape="rect" href="timer_8c.html#a58f1f79abf9bc0515a305ba89c58b9fa" title="Returns the number of timer ticks elapsed since THEN, which should be a value once returned by timer_..." alt="" coords="1297,1217,1402,1243"/>
<area shape="rect" href="timer_8c.html#a2b50be77101b38176d21b52cc425cf3e" title="Returns the number of timer ticks since the OS booted." alt="" coords="1485,1217,1570,1243"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_ac51161a8c0b58de728cb08a3ff722b0f_icgraph.png" border="0" usemap="#ide_8c_ac51161a8c0b58de728cb08a3ff722b0f_icgraph" alt=""/></div>
<map name="ide_8c_ac51161a8c0b58de728cb08a3ff722b0f_icgraph" id="ide_8c_ac51161a8c0b58de728cb08a3ff722b0f_icgraph">
<area shape="rect" title="Low&#45;level ATA primitives." alt="" coords="622,31,727,56"/>
<area shape="rect" href="ide_8c.html#a5d8393ec752f120abb30d97b14a69600" title="Select disk D in its channel, as select_device(), but wait for the channel to become idle before and ..." alt="" coords="441,31,574,56"/>
<area shape="rect" href="ide_8c.html#afcd1cfa04037980c000c94c826517759" title="Sends an IDENTIFY DEVICE command to disk D and reads the response." alt="" coords="257,5,393,31"/>
<area shape="rect" href="ide_8c.html#ad7c31783f9f455b20c35d43f46ee03d8" title="Selects device D, waiting for it to become ready, and then writes SEC_NO to the disk&#39;s sector selecti..." alt="" coords="275,55,375,80"/>
<area shape="rect" href="ide_8h.html#a5e8e1409e0675bdd93040403c52dd660" title="devices/ide.h" alt="" coords="140,5,204,31"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,87,31"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="135,55,209,80"/>
<area shape="rect" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="135,104,209,129"/>
</map>
</div>

</div>
</div>
<a id="a32d318073c2235e9b03bd77ed17ae580"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32d318073c2235e9b03bd77ed17ae580">&#9670;&nbsp;</a></span>wait_while_busy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> wait_while_busy </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structata__disk.html">ata_disk</a> *&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait up to 30 seconds for disk D to clear BSY, and then return the status of the DRQ bit. </p>
<p>The ATA standards say that a disk may take as long as that to complete its reset. </p>

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00460">460</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">References <a class="el" href="ide_8c_source.html#l00057">ata_disk::channel</a>, <a class="el" href="io_8h_source.html#l00009">inb()</a>, <a class="el" href="ide_8c_source.html#l00056">ata_disk::name</a>, <a class="el" href="lib_2stdio_8c_source.html#l00079">printf()</a>, <a class="el" href="ide_8c_source.html#l00031">reg_alt_status</a>, <a class="el" href="ide_8c_source.html#l00034">STA_BSY</a>, <a class="el" href="ide_8c_source.html#l00036">STA_DRQ</a>, and <a class="el" href="timer_8c_source.html#l00102">timer_msleep()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ide_8c_source.html#l00345">ide_read()</a>, <a class="el" href="ide_8c_source.html#l00365">ide_write()</a>, <a class="el" href="ide_8c_source.html#l00260">identify_ata_device()</a>, and <a class="el" href="ide_8c_source.html#l00165">reset_channel()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a32d318073c2235e9b03bd77ed17ae580_cgraph.png" border="0" usemap="#ide_8c_a32d318073c2235e9b03bd77ed17ae580_cgraph" alt=""/></div>
<map name="ide_8c_a32d318073c2235e9b03bd77ed17ae580_cgraph" id="ide_8c_a32d318073c2235e9b03bd77ed17ae580_cgraph">
<area shape="rect" title="Wait up to 30 seconds for disk D to clear BSY, and then return the status of the DRQ bit." alt="" coords="5,1521,124,1547"/>
<area shape="rect" href="io_8h.html#a0223c8898dfec29069879dc51076e28a" title="Reads and returns a byte from PORT." alt="" coords="1133,1521,1172,1547"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="197,940,248,965"/>
<area shape="rect" href="timer_8c.html#a10cbeaa00e0ceb825ddd7a44724881c6" title="Sleeps for approximately MS milliseconds." alt="" coords="172,1572,273,1597"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="321,375,379,400"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="442,175,514,200"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="894,275,1013,300"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="894,375,1013,400"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="427,585,529,611"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="611,175,676,200"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="590,125,697,151"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="594,76,693,101"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="580,224,707,249"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="613,273,674,299"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="758,101,846,127"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="774,224,830,249"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1659,308,1749,333"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1104,360,1201,385"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1292,257,1440,296"/>
<area shape="rect" href="thread_8c.html#a13774a29a2abd2f197ceb07815f2a6ff" title="Returns the running thread." alt="" coords="1650,512,1758,537"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1320,561,1413,587"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1824,613,1900,639"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1806,512,1917,537"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1817,1016,1907,1041"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1654,1016,1754,1041"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1649,713,1758,739"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1496,511,1593,536"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1965,1319,2066,1344"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1666,561,1741,587"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="1104,409,1201,435"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1328,889,1404,915"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1504,865,1585,891"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afb61f0ab134a52505ed89bc2d1024165" title="Removes the front element from LIST and returns it." alt="" coords="1494,915,1595,940"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1488,764,1601,789"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="577,855,710,880"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="1061,176,1244,215"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="759,989,845,1015"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="1507,1168,1582,1193"/>
<area shape="rect" href="serial_8c.html#aa1fb82a5be4690023966ea841c88a624" title="Initializes the serial port device for polling mode." alt="" coords="920,964,987,989"/>
<area shape="rect" href="intq_8c.html#aff4db6a96c4a1fb6898f26451a1049c2" title="Returns true if Q is full, false otherwise." alt="" coords="1119,1420,1186,1445"/>
<area shape="rect" href="intq_8c.html#a45ba970f3357ff262d7fafecc50735c6" title="Removes a byte from Q and returns it." alt="" coords="916,476,991,501"/>
<area shape="rect" href="intq_8c.html#a6a440110d5417c12cedf1c2e86f445f8" title="Adds BYTE to the end of Q." alt="" coords="916,703,991,728"/>
<area shape="rect" href="serial_8c.html#a15fd75cc421e6379650204e80853a68a" title="Polls the serial port until it&#39;s ready, and then transmits BYTE." alt="" coords="916,1471,991,1496"/>
<area shape="rect" href="timer_8c.html#a9bd10eb80561359273e022f4c80b483f" title="Sleep for approximately NUM/DENOM seconds." alt="" coords="896,1572,1011,1597"/>
<area shape="rect" href="timer_8c.html#a28553fa387ff127de26e330dfcfe9fa1" title="Busy&#45;wait for approximately NUM/DENOM seconds." alt="" coords="1095,1623,1210,1648"/>
<area shape="rect" href="timer_8c.html#aa24fbc19fb550d9efd5cabd97489a399" title="Sleeps for approximately TICKS timer ticks." alt="" coords="1107,1217,1198,1243"/>
<area shape="rect" href="timer_8c.html#a804190f8e66f39ac2ddb5891de3eec73" title="Iterates through a simple loop LOOPS times, for implementing brief delays." alt="" coords="1326,1623,1407,1648"/>
<area shape="rect" href="thread_8c.html#aaa9229e0f462f60bb9550919fa3d7699" title="Yields the CPU." alt="" coords="1498,663,1592,688"/>
<area shape="rect" href="timer_8c.html#a58f1f79abf9bc0515a305ba89c58b9fa" title="Returns the number of timer ticks elapsed since THEN, which should be a value once returned by timer_..." alt="" coords="1314,1217,1419,1243"/>
<area shape="rect" href="timer_8c.html#a2b50be77101b38176d21b52cc425cf3e" title="Returns the number of timer ticks since the OS booted." alt="" coords="1502,1217,1587,1243"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ide_8c_a32d318073c2235e9b03bd77ed17ae580_icgraph.png" border="0" usemap="#ide_8c_a32d318073c2235e9b03bd77ed17ae580_icgraph" alt=""/></div>
<map name="ide_8c_a32d318073c2235e9b03bd77ed17ae580_icgraph" id="ide_8c_a32d318073c2235e9b03bd77ed17ae580_icgraph">
<area shape="rect" title="Wait up to 30 seconds for disk D to clear BSY, and then return the status of the DRQ bit." alt="" coords="430,80,548,105"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="277,5,351,31"/>
<area shape="rect" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="277,55,351,80"/>
<area shape="rect" href="ide_8c.html#afcd1cfa04037980c000c94c826517759" title="Sends an IDENTIFY DEVICE command to disk D and reads the response." alt="" coords="246,104,382,129"/>
<area shape="rect" href="ide_8c.html#a03eb0d9954faefcc1634f76a286f78f5" title="Resets an ATA channel and waits for any devices present on it to finish the reset." alt="" coords="261,153,367,179"/>
<area shape="rect" href="ide_8h.html#a5e8e1409e0675bdd93040403c52dd660" title="devices/ide.h" alt="" coords="135,129,198,155"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,129,87,155"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ae81c6d1c941d4f5fac5cfd5c2a26283c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae81c6d1c941d4f5fac5cfd5c2a26283c">&#9670;&nbsp;</a></span>channels</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structchannel.html">channel</a> channels[<a class="el" href="ide_8c.html#aed31f8d4617249f3a96e6038e652194e">CHANNEL_CNT</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00080">80</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="ide_8c_source.html#l00102">ide_init()</a>, and <a class="el" href="ide_8c_source.html#l00507">interrupt_handler()</a>.</p>

</div>
</div>
<a id="a023601e9a8f1fc769aa9d2243f10ed95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a023601e9a8f1fc769aa9d2243f10ed95">&#9670;&nbsp;</a></span>ide_operations</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structblock__operations.html">block_operations</a> ide_operations</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">  {</div>
<div class="line">    <a class="code" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2">ide_read</a>,</div>
<div class="line">    <a class="code" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49">ide_write</a></div>
<div class="line">  }</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="ide_8c_source.html#l00082">82</a> of file <a class="el" href="ide_8c_source.html">ide.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="ide_8c_source.html#l00260">identify_ata_device()</a>.</p>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="aide_8c_html_a968318bffbdf3ecb701360fc0ed9cf49"><div class="ttname"><a href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49">ide_write</a></div><div class="ttdeci">static void ide_write(void *d_, block_sector_t sec_no, const void *buffer)</div><div class="ttdoc">Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes.</div><div class="ttdef"><b>Definition:</b> <a href="ide_8c_source.html#l00365">ide.c:365</a></div></div>
<div class="ttc" id="aide_8c_html_afc9cbaf0892e023867624dca21f5bfa2"><div class="ttname"><a href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2">ide_read</a></div><div class="ttdeci">static void ide_read(void *d_, block_sector_t sec_no, void *buffer)</div><div class="ttdoc">Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes.</div><div class="ttdef"><b>Definition:</b> <a href="ide_8c_source.html#l00345">ide.c:345</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 22 2019 10:19:16 for CS318 - Pintos by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
